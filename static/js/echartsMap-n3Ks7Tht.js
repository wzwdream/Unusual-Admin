import{d as u,a as c,j as g,l as w,m as _,q as m,u as n,L as S,D as $,by as B,B as C,P as k}from"./@vue-CRj7PaMA.js";import{H as x}from"./vue-echarts-C0IzmTCj.js";import{c as z}from"./index-D4B603rM.js";import{u as M,a as E,c as j,d as F,e as J,h as T,j as O,k as V,l as H,m as I,r as L}from"./echarts-BhkYWNed.js";import{R as N,B as R}from"./naive-ui-ItunR-2b.js";import"./resize-detector-G6vbKCU7.js";import"./@vueuse-Bot-wEr0.js";import"./pinia-B-btkknc.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-i18n-BZ7cv-U7.js";import"./@intlify-Y34EtYYP.js";import"./vue-router-DYGa2EEA.js";import"./@iconify-D4xAYz74.js";import"./axios-B4uVmeYG.js";import"./@codemirror-uT1p_ncg.js";import"./@lezer-COsil1JX.js";import"./crelt-C8TCjufn.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";import"./lodash-es-q_UuXcXk.js";import"./pinia-plugin-persistedstate-RV7uh3T-.js";import"./vite-plugin-mock-CVu1TUMM.js";import"./mockjs-SqilSaKE.js";import"./@babel-dN-1QE0A.js";import"./path-to-regexp-D27XTR3m.js";import"./date-fns-BAYWyKT4.js";import"./vueuc-DHpchg3q.js";import"./evtd-CI_DDEu_.js";import"./seemly-pQYQdLy2.js";import"./@css-render-CcHFHqZ8.js";import"./vooks-Vv8Q4iio.js";import"./vdirs-Bxp-63WN.js";import"./@juggle-C8OzoCMD.js";import"./css-render-BDrvWz3H.js";import"./@emotion-WldOFDRm.js";import"./treemate-DKekKYbv.js";import"./async-validator-DKvM95Vc.js";import"./zrender-DGIA2jg-.js";import"./tslib-BDyQ-Jie.js";const q=u({name:"EchartsMap"}),Mt=u({...q,setup(A){M([E,j,F,J,T,O,V,H,I]);const d=N(),p=c(),r=c([]),f=g(()=>r.value.length!==0),h=async e=>{const a=`https://geo.datav.aliyun.com/areas_v3/bound/${e}.json`;return await fetch(a).then(o=>o.json())},y=(e,a)=>({tooltip:{show:!0,formatter:function(t){if(t&&t.data){const{adcode:o,name:s,data:l}=t.data;return`adcode: ${o}<br>name: ${s}<br>data: ${l}`}}},visualMap:{show:!0,min:0,max:100,left:"left",top:"bottom",text:["高","低"],calculable:!0,seriesIndex:[0],inRange:{color:["#00467F","#A5CC82"]}},geo:{map:e,roam:!0,select:!1,selectedMode:"single",label:{show:!0},emphasis:{itemStyle:{areaColor:"#389BB7",borderColor:"#389BB7",borderWidth:0},label:{fontSize:14}}},series:[{type:"map",map:e,roam:!0,geoIndex:0,select:!1,data:a},{name:"散点",type:"scatter",coordinateSystem:"geo",data:a,itemStyle:{color:"#05C3F9"}},{name:"点",type:"scatter",coordinateSystem:"geo",symbol:"pin",symbolSize:function(t){if(t)return t[2]/4+20},label:{show:!0,formatter:function(t){return t.data.data||0},color:"#fff",fontSize:9},itemStyle:{color:"#F62157"},zlevel:6,data:a},{name:"Top 5",type:"effectScatter",coordinateSystem:"geo",data:a.map(t=>{if(t.data>60)return t}),symbolSize:15,showEffectOn:"render",rippleEffect:{brushType:"stroke"},label:{formatter:"{b}",position:"right",show:!0},itemStyle:{color:"yellow",shadowBlur:10,shadowColor:"yellow"},zlevel:1}]}),i=async e=>{const a=await h(e);L(e,a);const t=a.features.map(o=>{const s=(Math.random()*80+20).toFixed(0),l=o.properties.center?[...o.properties.center,s]:o.properties.center;return{name:o.properties.name,value:l,adcode:o.properties.adcode,level:o.properties.level,data:s}});p.value=y(e,t)};i("100000_full");const v=e=>{if(e.seriesType!=="map")return;const{adcode:a,level:t}=e.data,o=t==="district"?a:a+"_full";if(r.value[r.value.length-1]===o)return d.warning({content:"已经是最下层了",duration:1e3});r.value.push(o),i(o)},b=()=>{const e=r.value[r.value.length-2]||"100000_full";r.value.pop(),i(e)};return(e,a)=>{const t=R;return w(),_("div",{style:k(`height: ${n(z)("main")};`),class:"wh-full pos-relative"},[m(n(x),{option:n(p),autoresize:!0,onClick:v},null,8,["option"]),S(m(t,{class:"pos-absolute top-10 left-10",onClick:b},{default:B(()=>[C("返回")]),_:1},512),[[$,n(f)]])],4)}}});export{Mt as default};
