import{d as u,a as c,j as v,l as b,m as w,q as m,u as n,K as S,D as $,bt as B,B as C,O as k}from"./@vue-b1321081.js";import{B as x}from"./vue-echarts-f350ff7c.js";import{c as z}from"./index-54c8dad2.js";import{u as M,a as E,c as j,d as F,e as J,h as O,j as T,k as V,l as I,m as N,r as q}from"./echarts-8b4ffd07.js";import{S as A,g as H}from"./naive-ui-e3a37dce.js";import"./resize-detector-a5205554.js";import"./@vueuse-d91fccee.js";import"./pinia-44adfabd.js";import"./vue-demi-71ba0ef2.js";import"./vue-i18n-d9dd9a4c.js";import"./@intlify-9ddbe450.js";import"./vue-router-655d402f.js";import"./@iconify-688b7688.js";import"./axios-47b9d439.js";import"./@codemirror-f87e1e31.js";import"./@lezer-42a0dbdf.js";import"./style-mod-fd510d21.js";import"./w3c-keyname-9fb136d3.js";import"./lodash-es-000674ce.js";import"./pinia-plugin-persistedstate-02097300.js";import"./date-fns-2c268c3c.js";import"./@babel-31db5498.js";import"./vueuc-e19c7b48.js";import"./evtd-b614532e.js";import"./seemly-4f9c12c5.js";import"./@css-render-490b4d85.js";import"./vooks-db1138e2.js";import"./vdirs-b0483831.js";import"./@juggle-41516555.js";import"./css-render-d3958e6a.js";import"./@emotion-8a8e73f6.js";import"./treemate-426a560e.js";import"./async-validator-dee29e8b.js";import"./zrender-d04178fe.js";import"./tslib-54e39b60.js";const K=u({name:"EchartsMap"}),Ct=u({...K,setup(L){M([E,j,F,J,O,T,V,I,N]);const d=A(),p=c(),r=c([]),f=v(()=>r.value.length!==0),h=async e=>{const a=`https://geo.datav.aliyun.com/areas_v3/bound/${e}.json`;return await fetch(a).then(o=>o.json())},y=(e,a)=>({tooltip:{show:!0,formatter:function(t){if(t&&t.data){const{adcode:o,name:s,data:l}=t.data;return`adcode: ${o}<br>name: ${s}<br>data: ${l}`}}},visualMap:{show:!0,min:0,max:100,left:"left",top:"bottom",text:["高","低"],calculable:!0,seriesIndex:[0],inRange:{color:["#00467F","#A5CC82"]}},geo:{map:e,roam:!0,select:!1,selectedMode:"single",label:{show:!0},emphasis:{itemStyle:{areaColor:"#389BB7",borderColor:"#389BB7",borderWidth:0},label:{fontSize:14}}},series:[{type:"map",map:e,roam:!0,geoIndex:0,select:!1,data:a},{name:"散点",type:"scatter",coordinateSystem:"geo",data:a,itemStyle:{color:"#05C3F9"}},{name:"点",type:"scatter",coordinateSystem:"geo",symbol:"pin",symbolSize:function(t){if(t)return t[2]/4+20},label:{show:!0,formatter:function(t){return t.data.data||0},color:"#fff",fontSize:9},itemStyle:{color:"#F62157"},zlevel:6,data:a},{name:"Top 5",type:"effectScatter",coordinateSystem:"geo",data:a.map(t=>{if(t.data>60)return t}),symbolSize:15,showEffectOn:"render",rippleEffect:{brushType:"stroke"},label:{formatter:"{b}",position:"right",show:!0},itemStyle:{color:"yellow",shadowBlur:10,shadowColor:"yellow"},zlevel:1}]}),i=async e=>{const a=await h(e);q(e,a);const t=a.features.map(o=>{const s=(Math.random()*80+20).toFixed(0),l=o.properties.center?[...o.properties.center,s]:o.properties.center;return{name:o.properties.name,value:l,adcode:o.properties.adcode,level:o.properties.level,data:s}});p.value=y(e,t)};i("100000_full");const _=e=>{if(e.seriesType!=="map")return;const{adcode:a,level:t}=e.data,o=t==="district"?a:a+"_full";if(r.value[r.value.length-1]===o)return d.warning({content:"已经是最下层了",duration:1e3});r.value.push(o),i(o)},g=()=>{const e=r.value[r.value.length-2]||"100000_full";r.value.pop(),i(e)};return(e,a)=>{const t=H;return b(),w("div",{style:k(`height: ${n(z)("main")};`),class:"wh-full pos-relative"},[m(n(x),{option:n(p),autoresize:!0,onClick:_},null,8,["option"]),S(m(t,{class:"pos-absolute top-10 left-10",onClick:g},{default:B(()=>[C("返回")]),_:1},512),[[$,n(f)]])],4)}}});export{Ct as default};
