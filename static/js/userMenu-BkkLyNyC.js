import{_ as le,u as te,a as ne}from"./index-59ks69yh.js";import{_ as ae,a as oe}from"./queryItem.vue_vue_type_style_index_0_scope_true_lang-B3wX29Tv.js";import{a as ie,i as ue,f as re,j as pe,k as se,m as de,n as me,o as _e}from"./index-BSo8LMmg.js";import{j as fe,T as ve,a0 as be,$ as ce,L as ye,G as ke,Y as ge,W as Ue,a1 as Te,H as Le,M as we}from"./naive-ui-ItunR-2b.js";import{d as h,a as L,h as f,l as u,m as he,q as t,by as n,u as e,f as w,ad as r,ae as m}from"./@vue-CRj7PaMA.js";import"./vue-i18n-BZ7cv-U7.js";import"./@intlify-Y34EtYYP.js";import"./lodash-es-q_UuXcXk.js";import"./pinia-B-btkknc.js";import"./vue-demi-Dq6ymT-8.js";import"./@vueuse-Bot-wEr0.js";import"./vue-echarts-C0IzmTCj.js";import"./resize-detector-G6vbKCU7.js";import"./echarts-BhkYWNed.js";import"./zrender-DGIA2jg-.js";import"./tslib-BDyQ-Jie.js";import"./vue-router-DYGa2EEA.js";import"./@iconify-D4xAYz74.js";import"./axios-B4uVmeYG.js";import"./@codemirror-DRVzKoOo.js";import"./@lezer-COsil1JX.js";import"./crelt-C8TCjufn.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";import"./pinia-plugin-persistedstate-RV7uh3T-.js";import"./date-fns-BAYWyKT4.js";import"./@babel-dN-1QE0A.js";import"./vueuc-DHpchg3q.js";import"./evtd-CI_DDEu_.js";import"./seemly-pQYQdLy2.js";import"./@css-render-CcHFHqZ8.js";import"./vooks-Vv8Q4iio.js";import"./vdirs-Bxp-63WN.js";import"./@juggle-C8OzoCMD.js";import"./css-render-BDrvWz3H.js";import"./@emotion-WldOFDRm.js";import"./treemate-DKekKYbv.js";import"./async-validator-DKvM95Vc.js";const xe=h({name:"UserMenu"}),ml=h({...xe,setup(Ae){const y={add:["admin","menu:add"],del:["admin","menu:del"],edit:["admin","menu:edit"]},v=L([{type:"selection"},{title:"ID",key:"id"},{title:"菜单标题",key:"title"},{title:"图标",key:"icon",render(i){return f(ie,{icon:i.icon||""})}},{title:"排序",key:"sort"},{title:"组件路径",key:"component"},{title:"外链",key:"externalLink",render(i){return f("span",i.externalLink?"否":"是")}},{title:"缓存",key:"keepAlive",render(i){return f("span",i.keepAlive?"否":"是")}},{title:"可见",key:"visibily",render(i){return f("span",i.visibily?"否":"是")}},{title:"创建日期",key:"createTime"},{title:"操作",key:"actions",align:"center",fixed:"right",render(i){return[f(le,{permission:y,onHandleDelete:()=>g(i.id),onHandleEdit:()=>U(i),onHandleView:()=>C(i)})]}}]),x=i=>pe({pid:i.id}).then(a=>{i.children=a.data.data}),k=L(),A={title:[{required:!0,message:"请输入菜单标题",trigger:"blur"}],path:[{required:!0,message:"请输入路由地址",trigger:"blur"}],name:[{required:!0,message:"请输入组件名称",trigger:"blur"}],component:[{required:!0,message:"请输入组件地址",trigger:"blur"}],link:[{required:!0,message:"请输入外链菜单地址",trigger:"blur"}]},R={add:!0,del:!0,edit:!0,view:!0,download:!1},{modalVisible:c,modalAction:D,modalShowFooter:M,modalTitle:S,modalLoading:$,handleAdd:B,handleDelete:g,handleEdit:U,handleView:C,handleSave:V,handlereset:q,defualtQuery:T,modalForm:l,modalFormRef:E,changeCheckRow:F,listQuery:H,listData:K,loading:Q,rowKey:j,btnDisabled:N,checkedRowKeys:z}=te({name:"菜单",url:"/menu",key:"id",isPagination:!1,initForm:{pid:0,path:"",title:"",visibily:!0,menuType:1,icon:"",name:"",component:"",keepAlive:!1,externalLink:!1,link:"",sort:1,competence:""},initQuery:{pid:0,title:""},beforeRefresh:i=>(i&&i.title&&(i.pid=void 0),i),beforeAsyncValidate:async()=>{const i=await se();k.value=[{id:0,title:"顶级菜单",isLeaf:!1,children:i.data}]},beforeSave:i=>(i.menuType===2&&(i.visibily=!0),i),doDelete:de,doCreate:me,doUpdate:_e}),G=i=>{l.menuType=i,l.externalLink=!1};return(i,a)=>{const _=fe,I=ae,P=ve,W=oe,d=be,b=ce,p=ye,s=ke,Y=ge,J=Ue,O=Te,X=Le,Z=we,ee=ne;return u(),he("div",null,[t(W,{columns:e(v),"onUpdate:columns":a[1]||(a[1]=o=>w(v)?v.value=o:null),btnDisabled:e(N),permission:y,optShow:R,onSearch:e(H),onReset:e(q),onAdd:e(B),onDelete:e(g),onEdit:e(U)},{queryBar:n(()=>[t(I,{label:"菜单名称"},{default:n(()=>[t(_,{value:e(T).title,"onUpdate:value":a[0]||(a[0]=o=>e(T).title=o),size:"small",clearable:"",placeholder:"输入菜单名称，模糊搜索"},null,8,["value"])]),_:1})]),default:n(()=>[t(P,{columns:e(v),data:e(K),loading:e(Q),"row-key":e(j),striped:"",remote:!0,cascade:!1,"allow-checking-not-loaded":"","checked-row-keys":e(z),onLoad:x,"onUpdate:checkedRowKeys":e(F)},null,8,["columns","data","loading","row-key","checked-row-keys","onUpdate:checkedRowKeys"])]),_:1},8,["columns","btnDisabled","onSearch","onReset","onAdd","onDelete","onEdit"]),t(ee,{visible:e(c),"onUpdate:visible":a[15]||(a[15]=o=>w(c)?c.value=o:null),title:e(S),loading:e($),"show-footer":e(M),width:"600px",onSave:e(V)},{default:n(()=>[t(Z,{ref_key:"modalFormRef",ref:E,"label-placement":"left","label-align":"right","label-width":80,model:e(l),rules:A,disabled:e(D)==="view"},{default:n(()=>[t(X,{"x-gap":"12",cols:6},{default:n(()=>[t(s,{span:"3"},{default:n(()=>[t(p,{label:"菜单类型",path:"menuType"},{default:n(()=>[t(b,{value:e(l).menuType,"onUpdate:value":a[2]||(a[2]=o=>e(l).menuType=o),name:"menuType","on-update:value":G},{default:n(()=>[(u(),r(d,{key:1,value:1,label:"目录"})),(u(),r(d,{key:0,value:0,label:"菜单"})),(u(),r(d,{key:2,value:2,label:"按钮"}))]),_:1},8,["value"])]),_:1})]),_:1}),e(l).menuType!==2?(u(),r(s,{key:0,span:"3"},{default:n(()=>[t(p,{label:"菜单图标",path:"icon"},{default:n(()=>[t(Y,{value:e(l).icon,"onUpdate:value":a[3]||(a[3]=o=>e(l).icon=o),options:e(ue),renderLabel:e(re),filterable:"",clearable:""},null,8,["value","options","renderLabel"])]),_:1})]),_:1})):m("",!0),e(l).menuType!==2?(u(),r(s,{key:1,span:"2"},{default:n(()=>[t(p,{label:"菜单可见",path:"visibily"},{default:n(()=>[t(b,{value:e(l).visibily,"onUpdate:value":a[4]||(a[4]=o=>e(l).visibily=o),name:"visibily"},{default:n(()=>[(u(),r(d,{key:1,value:!0,label:"是"})),(u(),r(d,{key:0,value:!1,label:"否"}))]),_:1},8,["value"])]),_:1})]),_:1})):m("",!0),e(l).menuType?m("",!0):(u(),r(s,{key:2,span:"2"},{default:n(()=>[t(p,{label:"菜单缓存",path:"keepAlive"},{default:n(()=>[t(b,{value:e(l).keepAlive,"onUpdate:value":a[5]||(a[5]=o=>e(l).keepAlive=o),name:"keepAlive"},{default:n(()=>[(u(),r(d,{key:1,value:!0,label:"是"})),(u(),r(d,{key:0,value:!1,label:"否"}))]),_:1},8,["value"])]),_:1})]),_:1})),e(l).menuType?m("",!0):(u(),r(s,{key:3,span:"2"},{default:n(()=>[t(p,{label:"外链菜单",path:"externalLink"},{default:n(()=>[t(b,{value:e(l).externalLink,"onUpdate:value":a[6]||(a[6]=o=>e(l).externalLink=o),name:"externalLink"},{default:n(()=>[(u(),r(d,{key:1,value:!0,label:"是"})),(u(),r(d,{key:0,value:!1,label:"否"}))]),_:1},8,["value"])]),_:1})]),_:1})),e(l).externalLink&&!e(l).menuType?(u(),r(s,{key:4,span:"6"},{default:n(()=>[t(p,{label:"外链链接",path:"link"},{default:n(()=>[t(_,{value:e(l).link,"onUpdate:value":a[7]||(a[7]=o=>e(l).link=o),clearable:""},null,8,["value"])]),_:1})]),_:1})):m("",!0),t(s,{span:e(l).menuType===2?3:6},{default:n(()=>[t(p,{label:e(l).menuType===2?"按钮名称":"菜单标题",path:"title"},{default:n(()=>[t(_,{value:e(l).title,"onUpdate:value":a[8]||(a[8]=o=>e(l).title=o),clearable:""},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["span"]),e(l).menuType!==1&&!e(l).externalLink?(u(),r(s,{key:5,span:"3"},{default:n(()=>[t(p,{label:"权限标识",path:"competence"},{default:n(()=>[t(_,{value:e(l).competence,"onUpdate:value":a[9]||(a[9]=o=>e(l).competence=o),clearable:""},null,8,["value"])]),_:1})]),_:1})):m("",!0),t(s,{span:"3"},{default:n(()=>[t(p,{label:"菜单排序",path:"sort"},{default:n(()=>[t(J,{value:e(l).sort,"onUpdate:value":a[10]||(a[10]=o=>e(l).sort=o),clearable:""},null,8,["value"])]),_:1})]),_:1}),e(l).menuType!==2?(u(),r(s,{key:6,span:"3"},{default:n(()=>[t(p,{label:"路由地址",path:"path"},{default:n(()=>[t(_,{value:e(l).path,"onUpdate:value":a[11]||(a[11]=o=>e(l).path=o),clearable:""},null,8,["value"])]),_:1})]),_:1})):m("",!0),!e(l).menuType&&!e(l).externalLink?(u(),r(s,{key:7,span:"3"},{default:n(()=>[t(p,{label:"组件名称",path:"name"},{default:n(()=>[t(_,{value:e(l).name,"onUpdate:value":a[12]||(a[12]=o=>e(l).name=o),clearable:""},null,8,["value"])]),_:1})]),_:1})):m("",!0),!e(l).menuType&&!e(l).externalLink?(u(),r(s,{key:8,span:"3"},{default:n(()=>[t(p,{label:"组件路径",path:"component"},{default:n(()=>[t(_,{value:e(l).component,"onUpdate:value":a[13]||(a[13]=o=>e(l).component=o),clearable:""},null,8,["value"])]),_:1})]),_:1})):m("",!0),t(s,{span:"6"},{default:n(()=>[t(p,{label:"上级菜单",path:"pid"},{default:n(()=>[t(O,{options:e(k),filterable:"","default-value":e(l).pid,"label-field":"title","key-field":"id","onUpdate:value":a[14]||(a[14]=o=>e(l).pid=o)},null,8,["options","default-value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","disabled"])]),_:1},8,["visible","title","loading","show-footer","onSave"])])}}});export{ml as default};
