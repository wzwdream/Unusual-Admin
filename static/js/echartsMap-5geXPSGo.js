import{d as u,a as m,j as g,l as w,m as S,y as c,L as _,u as n,H as $,bI as B,E as C,S as k}from"./@vue-hDPt79YI.js";import{H as x}from"./vue-echarts-DSlFlwne.js";import{c as z}from"./index-BukTgyxp.js";import{u as M,a as E,c as j,d as F,e as J,h as T,j as H,k as I,l as O,m as V,r as L}from"./echarts-CuRpVpP4.js";import{R as N,B as R}from"./naive-ui-B0x1dlqI.js";import"./resize-detector-G6vbKCU7.js";import"./@vueuse-BiuUNhkd.js";import"./pinia-BjKXS5ic.js";import"./vue-i18n-Dk-SIn3V.js";import"./@intlify-ZcBRI--x.js";import"./vue-router-DqVd_W5F.js";import"./@iconify-BjyHS9ah.js";import"./axios-BQJyKPGC.js";import"./@codemirror-BcTyK8Ct.js";import"./@lezer-Bq4_8UpH.js";import"./crelt-C8TCjufn.js";import"./@marijn-DXwl3gUT.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";import"./lodash-es-DkZVwyoF.js";import"./pinia-plugin-persistedstate-RV7uh3T-.js";import"./vite-plugin-mock-m67_kHJ6.js";import"./mockjs-DcYjckXe.js";import"./copy-to-clipboard-CoXQxBGa.js";import"./toggle-selection-BHUZwh74.js";import"./path-to-regexp-CkFk_Ecl.js";import"./date-fns-pQOEqued.js";import"./vueuc-Cy6NzoKr.js";import"./evtd-CI_DDEu_.js";import"./seemly-DXTCRGqE.js";import"./@css-render-Ed7HajDt.js";import"./vooks-COlTATDB.js";import"./vdirs-DRH9Xvnd.js";import"./@juggle-C8OzoCMD.js";import"./css-render-BDrvWz3H.js";import"./@emotion-WldOFDRm.js";import"./treemate-DKekKYbv.js";import"./async-validator-9PlIezaS.js";import"./zrender-DGX4euIw.js";import"./tslib-BDyQ-Jie.js";const A=u({name:"EchartsMap"}),Et=u({...A,setup(W){M([E,j,F,J,T,H,I,O,V]);const d=N(),p=m(),a=m([]),f=g(()=>a.value.length!==0),h=async o=>{const e=`https://geo.datav.aliyun.com/areas_v3/bound/${o}.json`;return await fetch(e).then(r=>r.json())},y=(o,e)=>({tooltip:{show:!0,formatter:function(t){if(t&&t.data){const{adcode:r,name:s,data:l}=t.data;return`adcode: ${r}<br>name: ${s}<br>data: ${l}`}}},visualMap:{show:!0,min:0,max:100,left:"left",top:"bottom",text:["高","低"],calculable:!0,seriesIndex:[0],inRange:{color:["#00467F","#A5CC82"]}},geo:{map:o,roam:!0,select:!1,selectedMode:"single",label:{show:!0},emphasis:{itemStyle:{areaColor:"#389BB7",borderColor:"#389BB7",borderWidth:0},label:{fontSize:14}}},series:[{type:"map",map:o,roam:!0,geoIndex:0,select:!1,data:e},{name:"散点",type:"scatter",coordinateSystem:"geo",data:e,itemStyle:{color:"#05C3F9"}},{name:"点",type:"scatter",coordinateSystem:"geo",symbol:"pin",symbolSize:function(t){if(t)return t[2]/4+20},label:{show:!0,formatter:function(t){return t.data.data||0},color:"#fff",fontSize:9},itemStyle:{color:"#F62157"},zlevel:6,data:e},{name:"Top 5",type:"effectScatter",coordinateSystem:"geo",data:e.map(t=>{if(t.data>60)return t}),symbolSize:15,showEffectOn:"render",rippleEffect:{brushType:"stroke"},label:{formatter:"{b}",position:"right",show:!0},itemStyle:{color:"yellow",shadowBlur:10,shadowColor:"yellow"},zlevel:1}]}),i=async o=>{const e=await h(o);L(o,e);const t=e.features.map(r=>{const s=(Math.random()*80+20).toFixed(0),l=r.properties.center?[...r.properties.center,s]:r.properties.center;return{name:r.properties.name,value:l,adcode:r.properties.adcode,level:r.properties.level,data:s}});p.value=y(o,t)};i("100000_full");const v=o=>{if(o.seriesType!=="map")return;const{adcode:e,level:t}=o.data,r=t==="district"?e:e+"_full";if(a.value[a.value.length-1]===r)return d.warning({content:"已经是最下层了",duration:1e3});a.value.push(r),i(r)},b=()=>{const o=a.value[a.value.length-2]||"100000_full";a.value.pop(),i(o)};return(o,e)=>{const t=R;return S(),w("div",{style:k(`height: ${n(z)("main")};`),class:"wh-full pos-relative"},[c(n(x),{option:n(p),autoresize:!0,onClick:v},null,8,["option"]),_(c(t,{class:"pos-absolute top-10 left-10",onClick:b},{default:B(()=>[...e[0]||(e[0]=[C("返回",-1)])]),_:1},512),[[$,n(f)]])],4)}}});export{Et as default};
