import{_ as e,u as l,a}from"./index-cf1fd3fe.js";import{_ as t,a as n}from"./queryItem.vue_vue_type_style_index_0_scope_true_lang-eb668004.js";import{_ as i,c as d,i as u,r as o,d as s,f as r,j as p,k as v}from"./index-df40bf96.js";import{h as m,M as b,x as y,o as c,q as f,k,w as _,l as h,Q as g,j as U,K as w,S as x,b6 as T,bg as L,bf as D,aW as A,az as q,bd as R,bb as S,bh as j,ax as F,aX as E}from"./.pnpm-d4ef0e5d.js";const K=m({name:"UserMenu"}),M=m({...K,setup(m){const K=b([{type:"selection"},{title:"ID",key:"id"},{title:"菜单标题",key:"title"},{title:"图标",key:"icon",render:e=>y(i,{icon:e.icon||""})},{title:"排序",key:"sort"},{title:"组件路径",key:"component"},{title:"外链",key:"externalLink",render:e=>y("span",0===e.externalLink?"否":"是")},{title:"缓存",key:"keepAlive",render:e=>y("span",0===e.keepAlive?"否":"是")},{title:"可见",key:"visibily",render:e=>y("span",0===e.visibily?"否":"是")},{title:"创建日期",key:"createTime"},{title:"操作",key:"actions",align:"center",fixed:"right",render:l=>[y(e,{onHandleDelete:()=>X([l.id]),onHandleEdit:()=>G(l),onHandleView:()=>N(l)})]}]),M=e=>s({pid:e.id}).then((l=>{e.children=l.data})),Q=[{id:0,title:"顶级菜单",isLeaf:!1,children:d().treeMenu}],H=b(Q),V={title:[{required:!0,message:"请输入菜单标题",trigger:"blur"}],path:[{required:!0,message:"请输入路由地址",trigger:"blur"}],name:[{required:!0,message:"请输入组件名称",trigger:"blur"}],component:[{required:!0,message:"请输入组件地址",trigger:"blur"}],link:[{required:!0,message:"请输入外链菜单地址",trigger:"blur"}]},{modalVisible:z,modalAction:C,modalShowFooter:I,modalTitle:B,modalLoading:P,handleAdd:W,handleDelete:X,handleEdit:G,handleDownload:J,handleView:N,handleSave:O,handlereset:Y,defualtQuery:Z,modalForm:$,modalFormRef:ee,changeCheckRow:le,listQuery:ae,listData:te,loading:ne,rowKey:ie,btnDisabled:de}=l({name:"菜单",url:"/userMenu",key:"id",isPagination:!1,initForm:{pid:0,path:"",title:"",visibily:1,menuType:1,icon:"",name:"",component:"",keepAlive:0,externalLink:0,link:"",sort:1,competence:""},initQuery:{pid:0,title:""},beforeRefresh:e=>(e&&e.title&&(e.pid=void 0),e),beforeSave:e=>(2===e.menuType&&(e.visibily=0),e),doDelete:r,doCreate:p,doUpdate:v});return(e,l)=>{const i=x,d=t,s=T,r=n,p=L,v=D,m=A,b=q,y=R,Q=S,N=j,ue=F,oe=E,se=a;return c(),f("div",null,[k(r,{columns:h(K),"onUpdate:columns":l[1]||(l[1]=e=>g(K)?K.value=e:null),btnDisabled:h(de),onSearch:h(ae),onReset:h(Y),onAdd:h(W),onDelete:h(X),onEdit:h(G),onDownload:h(J)},{queryBar:_((()=>[k(d,{label:"菜单名称"},{default:_((()=>[k(i,{value:h(Z).title,"onUpdate:value":l[0]||(l[0]=e=>h(Z).title=e),size:"small",clearable:"",placeholder:"输入菜单名称，模糊搜索"},null,8,["value"])])),_:1})])),default:_((()=>[k(s,{columns:h(K),data:h(te),loading:h(ne),"row-key":h(ie),striped:"",remote:!0,cascade:!1,"allow-checking-not-loaded":"",onLoad:M,"onUpdate:checkedRowKeys":h(le)},null,8,["columns","data","loading","row-key","onUpdate:checkedRowKeys"])])),_:1},8,["columns","btnDisabled","onSearch","onReset","onAdd","onDelete","onEdit","onDownload"]),k(se,{visible:h(z),"onUpdate:visible":l[15]||(l[15]=e=>g(z)?z.value=e:null),title:h(B),loading:h(P),"show-footer":h(I),width:"600px",onSave:h(O)},{default:_((()=>[k(oe,{ref_key:"modalFormRef",ref:ee,"label-placement":"left","label-align":"right","label-width":80,model:h($),rules:V,disabled:"view"===h(C)},{default:_((()=>[k(ue,{"x-gap":"12",cols:6},{default:_((()=>[k(b,{span:"3"},{default:_((()=>[k(m,{label:"菜单类型",path:"menuType"},{default:_((()=>[k(v,{value:h($).menuType,"onUpdate:value":l[2]||(l[2]=e=>h($).menuType=e),name:"menuType"},{default:_((()=>[(c(),U(p,{key:1,value:1,label:"目录"})),(c(),U(p,{key:0,value:0,label:"菜单"})),(c(),U(p,{key:2,value:2,label:"按钮"}))])),_:1},8,["value"])])),_:1})])),_:1}),2!==h($).menuType?(c(),U(b,{key:0,span:"3"},{default:_((()=>[k(m,{label:"菜单图标",path:"icon"},{default:_((()=>[k(y,{value:h($).icon,"onUpdate:value":l[3]||(l[3]=e=>h($).icon=e),options:h(u),renderLabel:h(o),filterable:"",clearable:""},null,8,["value","options","renderLabel"])])),_:1})])),_:1})):w("",!0),2!==h($).menuType?(c(),U(b,{key:1,span:"2"},{default:_((()=>[k(m,{label:"菜单可见",path:"visibily"},{default:_((()=>[k(v,{value:h($).visibily,"onUpdate:value":l[4]||(l[4]=e=>h($).visibily=e),name:"visibily"},{default:_((()=>[(c(),U(p,{key:1,value:1,label:"是"})),(c(),U(p,{key:0,value:0,label:"否"}))])),_:1},8,["value"])])),_:1})])),_:1})):w("",!0),h($).menuType?w("",!0):(c(),U(b,{key:2,span:"2"},{default:_((()=>[k(m,{label:"菜单缓存",path:"keepAlive"},{default:_((()=>[k(v,{value:h($).keepAlive,"onUpdate:value":l[5]||(l[5]=e=>h($).keepAlive=e),name:"keepAlive"},{default:_((()=>[(c(),U(p,{key:1,value:1,label:"是"})),(c(),U(p,{key:0,value:0,label:"否"}))])),_:1},8,["value"])])),_:1})])),_:1})),h($).menuType?w("",!0):(c(),U(b,{key:3,span:"2"},{default:_((()=>[k(m,{label:"外链菜单",path:"externalLink"},{default:_((()=>[k(v,{value:h($).externalLink,"onUpdate:value":l[6]||(l[6]=e=>h($).externalLink=e),name:"externalLink"},{default:_((()=>[(c(),U(p,{key:1,value:1,label:"是"})),(c(),U(p,{key:0,value:0,label:"否"}))])),_:1},8,["value"])])),_:1})])),_:1})),h($).externalLink&&!h($).menuType?(c(),U(b,{key:4,span:"6"},{default:_((()=>[k(m,{label:"外链链接",path:"link"},{default:_((()=>[k(i,{value:h($).link,"onUpdate:value":l[7]||(l[7]=e=>h($).link=e),clearable:""},null,8,["value"])])),_:1})])),_:1})):w("",!0),k(b,{span:2===h($).menuType?3:6},{default:_((()=>[k(m,{label:2===h($).menuType?"按钮名称":"菜单标题",path:"title"},{default:_((()=>[k(i,{value:h($).title,"onUpdate:value":l[8]||(l[8]=e=>h($).title=e),clearable:""},null,8,["value"])])),_:1},8,["label"])])),_:1},8,["span"]),0!==h($).menuType?(c(),U(b,{key:5,span:"3"},{default:_((()=>[k(m,{label:"权限标识",path:"competence"},{default:_((()=>[k(i,{value:h($).competence,"onUpdate:value":l[9]||(l[9]=e=>h($).competence=e),clearable:""},null,8,["value"])])),_:1})])),_:1})):w("",!0),k(b,{span:"3"},{default:_((()=>[k(m,{label:"菜单排序",path:"sort"},{default:_((()=>[k(Q,{value:h($).sort,"onUpdate:value":l[10]||(l[10]=e=>h($).sort=e),clearable:""},null,8,["value"])])),_:1})])),_:1}),2!==h($).menuType?(c(),U(b,{key:6,span:"3"},{default:_((()=>[k(m,{label:"路由地址",path:"path"},{default:_((()=>[k(i,{value:h($).path,"onUpdate:value":l[11]||(l[11]=e=>h($).path=e),clearable:""},null,8,["value"])])),_:1})])),_:1})):w("",!0),h($).menuType||h($).externalLink?w("",!0):(c(),U(b,{key:7,span:"3"},{default:_((()=>[k(m,{label:"组件名称",path:"name"},{default:_((()=>[k(i,{value:h($).name,"onUpdate:value":l[12]||(l[12]=e=>h($).name=e),clearable:""},null,8,["value"])])),_:1})])),_:1})),h($).menuType||h($).externalLink?w("",!0):(c(),U(b,{key:8,span:"3"},{default:_((()=>[k(m,{label:"组件路径",path:"component"},{default:_((()=>[k(i,{value:h($).component,"onUpdate:value":l[13]||(l[13]=e=>h($).component=e),clearable:""},null,8,["value"])])),_:1})])),_:1})),k(b,{span:"6"},{default:_((()=>[k(m,{label:"上级菜单",path:"pid"},{default:_((()=>[k(N,{options:h(H),filterable:"","default-value":h($).pid,"label-field":"title","key-field":"id","onUpdate:value":l[14]||(l[14]=e=>h($).pid=e)},null,8,["options","default-value"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","disabled"])])),_:1},8,["visible","title","loading","show-footer","onSave"])])}}});export{M as default};
