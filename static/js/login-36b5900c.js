import{r as e,l as a,u as l,g as s,_ as n,a as r}from"./index-fb27e1cc.js";import{aQ as t,h as o,M as d,aR as i,aS as c,aG as u,O as p,o as h,q as g,t as m,k as v,w as f,l as w,aT as b,C as y,X as _,F as x,Y as U,S as k,aU as C,a7 as q,aV as K,aB as T,aC as A}from"./.pnpm-6218793e.js";import{c as E,a as F,b as S}from"./calibrationRules-6d34d65c.js";const z=t.enc.Utf8.parse("18873AC2978EC7FA"),I=t.enc.Utf8.parse("4FE46BE1C4485C95");function R(e){if("string"!=typeof e||!e)return e;try{const a=t.enc.Utf8.parse(e);return t.AES.encrypt(a,z,{iv:I,mode:t.mode.CBC,padding:t.pad.Pkcs7}).ciphertext.toString()}catch(a){return e}}const j=e=>(T("data-v-f42bc82f"),e=e(),A(),e),B={"wh-full":"","f-c-c":"",class:"bg-content"},G={class:"form-container sign-in-container"},L=j((()=>m("h1",{"m-0":""},"登录",-1))),M=j((()=>m("span",{"mb-10":"","font-size-12":""},"或者使用你的账号",-1))),O=j((()=>m("div",{flex:"","mb-10":"","min-w-308":""},[m("span",{"font-size-12":""},"忘记密码？")],-1))),P={class:"form-container sign-up-container"},Q=j((()=>m("h1",{"m-0":""},"注册",-1))),V={class:"overlay-container"},X={class:"overlay"},Y={class:"overlay-panel overlay-left"},$=j((()=>m("p",null,"要与我们保持联系，请使用您的个人信息登录",-1))),D={class:"overlay-panel overlay-right"},H=j((()=>m("p",null,"非常感谢您选择我们！我们将竭诚为您提供最优质、最全面的服务。",-1))),J=o({name:"Login"}),N=r(o({...J,setup(r){const t=d("signUp"),o=i({name:"admin",password:"123456",captchaText:"",captchaUid:""}),T=d(null),A=d(!1),z=c(),I={name:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],captchaText:[{required:!0,message:"请输入验证码",trigger:"blur"}]},j=u(),J=p(),N=()=>{var s;null==(s=T.value)||s.validate((s=>{if(!s){A.value=!0;const s={...o,password:R(o.password)};e(),a(s).then((async e=>{A.value=!1,z.success("登录成功,欢迎回来");l().setToken(e.data);const{redirect:a}=j.query;J.push(a||"/")})).catch((()=>{A.value=!1,Z()}))}}))},W=d(""),Z=()=>{s().then((e=>{W.value="data:image/*;base64, "+e.data.captcha,o.captchaUid=e.data.uid}))};Z();const ee=i({name:"",pwd:"",email:"",phone:""}),ae={name:[{required:!0,message:"请输入用户名",trigger:"blur"}],pwd:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:E,message:"密码格式不正确",trigger:"input"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:F,message:"请输入正确的邮箱",trigger:"input"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:S,message:"请输入正确的手机号",trigger:"input"}]},le=d(null),se=d(!1),ne=()=>{var e;null==(e=le.value)||e.validate((e=>{}))};function re(e){const a=null==e?void 0:e.$el.querySelectorAll(".n-input__input-el,.n-button"),l=Array.from(a),s=l.findIndex((e=>e===document.activeElement)),n=l[s+1];s+1<a.length&&n.focus()}return(e,a)=>{const l=n,s=x,r=U,d=k,i=C,c=q,u=K;return h(),g("div",B,[m("div",{class:_(["bg-white rd-12 relative w768 max-w-full min-h-480 card-shadow dark:bg-dark",{"right-panel-active":"signIn"===w(t)}])},[m("div",G,[v(u,{ref_key:"loginFormRef",ref:T,size:"small","show-label":!1,model:w(o),rules:I,class:"flex-col-c bg-white h-full rounded-10"},{default:f((()=>[L,v(r,{"my-20":""},{default:f((()=>[v(s,{circle:""},{icon:f((()=>[v(l,{icon:"bi:tencent-qq"})])),_:1}),v(s,{circle:""},{icon:f((()=>[v(l,{icon:"tabler:brand-wechat"})])),_:1}),v(s,{circle:""},{icon:f((()=>[v(l,{icon:"mdi:github"})])),_:1})])),_:1}),M,v(i,{path:"name",class:"w-[80%]"},{default:f((()=>[v(d,{value:w(o).name,"onUpdate:value":a[0]||(a[0]=e=>w(o).name=e),onKeydown:a[1]||(a[1]=b((e=>re(w(T))),["enter"])),placeholder:"请输入账户名称"},null,8,["value"])])),_:1}),v(i,{path:"password",class:"w-[80%]"},{default:f((()=>[v(d,{value:w(o).password,"onUpdate:value":a[2]||(a[2]=e=>w(o).password=e),onKeydown:a[3]||(a[3]=b((e=>re(w(T))),["enter"])),type:"password","show-password-on":"mousedown",placeholder:"请输入账户密码",maxlength:12},null,8,["value"])])),_:1}),v(i,{path:"captchaText",class:"w-[80%]"},{default:f((()=>[v(d,{value:w(o).captchaText,"onUpdate:value":a[4]||(a[4]=e=>w(o).captchaText=e),onKeydown:a[5]||(a[5]=b((e=>re(w(T))),["enter"])),placeholder:"请输入验证码"},null,8,["value"]),m("div",{onClick:Z,"h-28":"","w-100":"","cursor-pointer":""},[v(c,{src:w(W),"preview-disabled":!0,width:"100",height:"28"},null,8,["src"])])])),_:1}),O,v(s,{class:"w-[40%] font-bold",round:"",type:"primary",loading:w(A),onClick:N,onKeyup:b(N,["enter"])},{default:f((()=>[y("登录 ")])),_:1},8,["loading","onKeyup"])])),_:1},8,["model"])]),m("div",P,[v(u,{ref_key:"registFormRef",ref:le,size:"small","show-label":!1,model:w(ee),rules:ae,class:"flex-col-c bg-white h-full rounded-10"},{default:f((()=>[Q,v(i,{path:"name",class:"w-[80%]"},{default:f((()=>[v(d,{value:w(ee).name,"onUpdate:value":a[6]||(a[6]=e=>w(ee).name=e),onKeydown:a[7]||(a[7]=b((e=>re(w(le))),["enter"])),placeholder:"请输入账户名称"},null,8,["value"])])),_:1}),v(i,{path:"pwd",class:"w-[80%]"},{default:f((()=>[v(d,{value:w(ee).pwd,"onUpdate:value":a[8]||(a[8]=e=>w(ee).pwd=e),onKeydown:a[9]||(a[9]=b((e=>re(w(le))),["enter"])),type:"password","show-password-on":"click",placeholder:"请输入账户密码",maxlength:12},null,8,["value"])])),_:1}),v(i,{path:"email",class:"w-[80%]"},{default:f((()=>[v(d,{value:w(ee).email,"onUpdate:value":a[10]||(a[10]=e=>w(ee).email=e),onKeydown:a[11]||(a[11]=b((e=>re(w(le))),["enter"])),placeholder:"请输入邮箱"},null,8,["value"])])),_:1}),v(i,{path:"phone",class:"w-[80%]"},{default:f((()=>[v(d,{value:w(ee).phone,"onUpdate:value":a[12]||(a[12]=e=>w(ee).phone=e),onKeydown:a[13]||(a[13]=b((e=>re(w(le))),["enter"])),placeholder:"请输入手机号"},null,8,["value"])])),_:1}),v(s,{class:"w-[40%] font-bold",round:"",type:"primary",loading:w(se),onKeyup:b(ne,["enter"]),onClick:ne},{default:f((()=>[y("注册 ")])),_:1},8,["loading","onKeyup"])])),_:1},8,["model"])]),m("div",V,[m("div",X,[m("div",Y,[m("h1",null,[y("欢迎回来！ "),v(c,{width:"48",height:"48","preview-disabled":"",src:"/logo.webp",class:"b-rd-[50%]"})]),$,v(s,{ghost:"",round:"",color:"#fff",onClick:a[14]||(a[14]=e=>t.value="signUp")},{default:f((()=>[y("去登录")])),_:1})]),m("div",D,[m("h1",null,[y("你好，朋友！ "),v(c,{width:"48",height:"48","preview-disabled":"",src:"/logo.webp",class:"b-rd-[50%]"})]),H,v(s,{ghost:"",round:"",color:"#fff",onClick:a[15]||(a[15]=e=>t.value="signIn")},{default:f((()=>[y("去注册")])),_:1})])])])],2)])}}}),[["__scopeId","data-v-f42bc82f"]]);export{N as default};
