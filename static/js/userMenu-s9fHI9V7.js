import{u as te,_ as le,a as ne}from"./index-BANaz8LI.js";import{a as ae,_ as oe}from"./queryItem.vue_vue_type_style_index_0_scope_true_lang-AZnJkx_C.js";import{a as ie,f as ue,i as re,j as pe,k as se,m as de,n as me,o as _e}from"./index-BukTgyxp.js";import{T as fe,n as ve,M as be,H as ce,G as ye,L as ke,Z as ge,a0 as Ue,Y as Te,W as Le,a1 as we}from"./naive-ui-B0x1dlqI.js";import{d as h,a as L,h as f,l as he,m as u,y as l,bI as n,u as e,f as w,ae as r,af as m}from"./@vue-hDPt79YI.js";import"./vue-i18n-Dk-SIn3V.js";import"./@intlify-ZcBRI--x.js";import"./lodash-es-DkZVwyoF.js";import"./pinia-BjKXS5ic.js";import"./@vueuse-BiuUNhkd.js";import"./vue-echarts-DSlFlwne.js";import"./resize-detector-G6vbKCU7.js";import"./echarts-CuRpVpP4.js";import"./zrender-DGX4euIw.js";import"./tslib-BDyQ-Jie.js";import"./vue-router-DqVd_W5F.js";import"./@iconify-BjyHS9ah.js";import"./axios-BQJyKPGC.js";import"./@codemirror-BcTyK8Ct.js";import"./@lezer-Bq4_8UpH.js";import"./crelt-C8TCjufn.js";import"./@marijn-DXwl3gUT.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";import"./pinia-plugin-persistedstate-RV7uh3T-.js";import"./vite-plugin-mock-m67_kHJ6.js";import"./mockjs-DcYjckXe.js";import"./copy-to-clipboard-CoXQxBGa.js";import"./toggle-selection-BHUZwh74.js";import"./path-to-regexp-CkFk_Ecl.js";import"./date-fns-pQOEqued.js";import"./vueuc-Cy6NzoKr.js";import"./evtd-CI_DDEu_.js";import"./seemly-DXTCRGqE.js";import"./@css-render-Ed7HajDt.js";import"./vooks-COlTATDB.js";import"./vdirs-DRH9Xvnd.js";import"./@juggle-C8OzoCMD.js";import"./css-render-BDrvWz3H.js";import"./@emotion-WldOFDRm.js";import"./treemate-DKekKYbv.js";import"./async-validator-9PlIezaS.js";const xe=h({name:"UserMenu"}),bt=h({...xe,setup(Ae){const y={add:["admin","menu:add"],del:["admin","menu:del"],edit:["admin","menu:edit"]},v=L([{type:"selection"},{title:"ID",key:"id"},{title:"菜单标题",key:"title"},{title:"图标",key:"icon",render(i){return f(ie,{icon:i.icon||""})}},{title:"排序",key:"sort"},{title:"组件路径",key:"component"},{title:"外链",key:"externalLink",render(i){return f("span",i.externalLink?"否":"是")}},{title:"缓存",key:"keepAlive",render(i){return f("span",i.keepAlive?"否":"是")}},{title:"可见",key:"visibily",render(i){return f("span",i.visibily?"否":"是")}},{title:"创建日期",key:"createTime"},{title:"操作",key:"actions",align:"center",fixed:"right",render(i){return[f(le,{permission:y,onHandleDelete:()=>g(i.id),onHandleEdit:()=>U(i),onHandleView:()=>C(i)})]}}]),x=i=>pe({pid:i.id}).then(a=>{i.children=a.data.data}),k=L(),A={title:[{required:!0,message:"请输入菜单标题",trigger:"blur"}],path:[{required:!0,message:"请输入路由地址",trigger:"blur"}],name:[{required:!0,message:"请输入组件名称",trigger:"blur"}],component:[{required:!0,message:"请输入组件地址",trigger:"blur"}],link:[{required:!0,message:"请输入外链菜单地址",trigger:"blur"}]},R={add:!0,del:!0,edit:!0,view:!0,download:!1},{modalVisible:c,modalAction:D,modalShowFooter:M,modalTitle:S,modalLoading:B,handleAdd:$,handleDelete:g,handleEdit:U,handleView:C,handleSave:V,handlereset:E,defualtQuery:T,modalForm:t,modalFormRef:F,changeCheckRow:q,listQuery:H,listData:K,loading:Q,rowKey:I,btnDisabled:N,checkedRowKeys:j}=te({name:"菜单",url:"/menu",key:"id",isPagination:!1,initForm:{pid:0,path:"",title:"",visibily:!0,menuType:1,icon:"",name:"",component:"",keepAlive:!1,externalLink:!1,link:"",sort:1,competence:""},initQuery:{pid:0,title:""},beforeRefresh:i=>(i&&i.title&&(i.pid=void 0),i),beforeAsyncValidate:async()=>{const i=await _e();k.value=[{id:0,title:"顶级菜单",isLeaf:!1,children:i.data}]},beforeSave:i=>(i.menuType===2&&(i.visibily=!0),i),doDelete:de,doCreate:se,doUpdate:me}),z=i=>{t.menuType=i,t.externalLink=!1};return(i,a)=>{const _=ve,G=ae,P=fe,W=oe,d=Ue,b=ge,p=ke,s=ye,Y=Te,Z=Le,J=we,O=ce,X=be,ee=ne;return u(),he("div",null,[l(W,{columns:e(v),"onUpdate:columns":a[1]||(a[1]=o=>w(v)?v.value=o:null),btnDisabled:e(N),permission:y,optShow:R,onSearch:e(H),onReset:e(E),onAdd:e($),onDelete:e(g),onEdit:e(U)},{queryBar:n(()=>[l(G,{label:"菜单名称"},{default:n(()=>[l(_,{value:e(T).title,"onUpdate:value":a[0]||(a[0]=o=>e(T).title=o),size:"small",clearable:"",placeholder:"输入菜单名称，模糊搜索"},null,8,["value"])]),_:1})]),default:n(()=>[l(P,{columns:e(v),data:e(K),loading:e(Q),"row-key":e(I),striped:"",remote:!0,cascade:!1,"allow-checking-not-loaded":"","checked-row-keys":e(j),onLoad:x,"onUpdate:checkedRowKeys":e(q)},null,8,["columns","data","loading","row-key","checked-row-keys","onUpdate:checkedRowKeys"])]),_:1},8,["columns","btnDisabled","onSearch","onReset","onAdd","onDelete","onEdit"]),l(ee,{visible:e(c),"onUpdate:visible":a[15]||(a[15]=o=>w(c)?c.value=o:null),title:e(S),loading:e(B),"show-footer":e(M),width:"600px",onSave:e(V)},{default:n(()=>[l(X,{ref_key:"modalFormRef",ref:F,"label-placement":"left","label-align":"right","label-width":80,model:e(t),rules:A,disabled:e(D)==="view"},{default:n(()=>[l(O,{"x-gap":"12",cols:6},{default:n(()=>[l(s,{span:"3"},{default:n(()=>[l(p,{label:"菜单类型",path:"menuType"},{default:n(()=>[l(b,{value:e(t).menuType,"onUpdate:value":a[2]||(a[2]=o=>e(t).menuType=o),name:"menuType","on-update:value":z},{default:n(()=>[(u(),r(d,{key:1,value:1,label:"目录"})),(u(),r(d,{key:0,value:0,label:"菜单"})),(u(),r(d,{key:2,value:2,label:"按钮"}))]),_:1},8,["value"])]),_:1})]),_:1}),e(t).menuType!==2?(u(),r(s,{key:0,span:"3"},{default:n(()=>[l(p,{label:"菜单图标",path:"icon"},{default:n(()=>[l(Y,{value:e(t).icon,"onUpdate:value":a[3]||(a[3]=o=>e(t).icon=o),options:e(re),renderLabel:e(ue),filterable:"",clearable:""},null,8,["value","options","renderLabel"])]),_:1})]),_:1})):m("",!0),e(t).menuType!==2?(u(),r(s,{key:1,span:"2"},{default:n(()=>[l(p,{label:"菜单可见",path:"visibily"},{default:n(()=>[l(b,{value:e(t).visibily,"onUpdate:value":a[4]||(a[4]=o=>e(t).visibily=o),name:"visibily"},{default:n(()=>[(u(),r(d,{key:1,value:!0,label:"是"})),(u(),r(d,{key:0,value:!1,label:"否"}))]),_:1},8,["value"])]),_:1})]),_:1})):m("",!0),e(t).menuType?m("",!0):(u(),r(s,{key:2,span:"2"},{default:n(()=>[l(p,{label:"菜单缓存",path:"keepAlive"},{default:n(()=>[l(b,{value:e(t).keepAlive,"onUpdate:value":a[5]||(a[5]=o=>e(t).keepAlive=o),name:"keepAlive"},{default:n(()=>[(u(),r(d,{key:1,value:!0,label:"是"})),(u(),r(d,{key:0,value:!1,label:"否"}))]),_:1},8,["value"])]),_:1})]),_:1})),e(t).menuType?m("",!0):(u(),r(s,{key:3,span:"2"},{default:n(()=>[l(p,{label:"外链菜单",path:"externalLink"},{default:n(()=>[l(b,{value:e(t).externalLink,"onUpdate:value":a[6]||(a[6]=o=>e(t).externalLink=o),name:"externalLink"},{default:n(()=>[(u(),r(d,{key:1,value:!0,label:"是"})),(u(),r(d,{key:0,value:!1,label:"否"}))]),_:1},8,["value"])]),_:1})]),_:1})),e(t).externalLink&&!e(t).menuType?(u(),r(s,{key:4,span:"6"},{default:n(()=>[l(p,{label:"外链链接",path:"link"},{default:n(()=>[l(_,{value:e(t).link,"onUpdate:value":a[7]||(a[7]=o=>e(t).link=o),clearable:""},null,8,["value"])]),_:1})]),_:1})):m("",!0),l(s,{span:e(t).menuType===2?3:6},{default:n(()=>[l(p,{label:e(t).menuType===2?"按钮名称":"菜单标题",path:"title"},{default:n(()=>[l(_,{value:e(t).title,"onUpdate:value":a[8]||(a[8]=o=>e(t).title=o),clearable:""},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["span"]),e(t).menuType!==1&&!e(t).externalLink?(u(),r(s,{key:5,span:"3"},{default:n(()=>[l(p,{label:"权限标识",path:"competence"},{default:n(()=>[l(_,{value:e(t).competence,"onUpdate:value":a[9]||(a[9]=o=>e(t).competence=o),clearable:""},null,8,["value"])]),_:1})]),_:1})):m("",!0),l(s,{span:"3"},{default:n(()=>[l(p,{label:"菜单排序",path:"sort"},{default:n(()=>[l(Z,{value:e(t).sort,"onUpdate:value":a[10]||(a[10]=o=>e(t).sort=o),clearable:""},null,8,["value"])]),_:1})]),_:1}),e(t).menuType!==2?(u(),r(s,{key:6,span:"3"},{default:n(()=>[l(p,{label:"路由地址",path:"path"},{default:n(()=>[l(_,{value:e(t).path,"onUpdate:value":a[11]||(a[11]=o=>e(t).path=o),clearable:""},null,8,["value"])]),_:1})]),_:1})):m("",!0),!e(t).menuType&&!e(t).externalLink?(u(),r(s,{key:7,span:"3"},{default:n(()=>[l(p,{label:"组件名称",path:"name"},{default:n(()=>[l(_,{value:e(t).name,"onUpdate:value":a[12]||(a[12]=o=>e(t).name=o),clearable:""},null,8,["value"])]),_:1})]),_:1})):m("",!0),!e(t).menuType&&!e(t).externalLink?(u(),r(s,{key:8,span:"3"},{default:n(()=>[l(p,{label:"组件路径",path:"component"},{default:n(()=>[l(_,{value:e(t).component,"onUpdate:value":a[13]||(a[13]=o=>e(t).component=o),clearable:""},null,8,["value"])]),_:1})]),_:1})):m("",!0),l(s,{span:"6"},{default:n(()=>[l(p,{label:"上级菜单",path:"pid"},{default:n(()=>[l(J,{options:e(k),filterable:"","default-value":e(t).pid,"label-field":"title","key-field":"id","onUpdate:value":a[14]||(a[14]=o=>e(t).pid=o)},null,8,["options","default-value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","disabled"])]),_:1},8,["visible","title","loading","show-footer","onSave"])])}}});export{bt as default};
