import{a as P,r as M,l as N,u as V,g as H,_ as J}from"./index-CbgEwbzS.js";import{d as S,a as w,q as I,l as j,m as D,ag as s,y as t,bK as r,bM as m,u as o,E as _,P as G}from"./@vue-BxoxtTAP.js";import{c as h}from"./crypto-js-CfGshFXU.js";import{c as O,a as Q,b as W}from"./calibrationRules-BXKnawmw.js";import{b as X,u as Y}from"./vue-router-dgZRC-ml.js";import{K as Z,m as ee,B as te,L as oe,n as ne,t as se,M as re}from"./naive-ui-Bk4TGpAc.js";import"./@vueuse-DrRc1vxu.js";import"./pinia-CmUssEbr.js";import"./vue-i18n-D8g7FhYN.js";import"./@intlify-ZcBRI--x.js";import"./vue-echarts-CTGpP_pZ.js";import"./resize-detector-G6vbKCU7.js";import"./echarts-CuRpVpP4.js";import"./zrender-DGX4euIw.js";import"./tslib-BDyQ-Jie.js";import"./@iconify-CL9SbJpr.js";import"./axios-B9ygI19o.js";import"./@codemirror-Dl84AIwu.js";import"./@lezer-BKSZuLkY.js";import"./crelt-C8TCjufn.js";import"./@marijn-DXwl3gUT.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";import"./lodash-es-DkZVwyoF.js";import"./pinia-plugin-persistedstate-RV7uh3T-.js";import"./date-fns-CMuzgvE5.js";import"./vueuc-CJldP7Lx.js";import"./evtd-CI_DDEu_.js";import"./seemly-DXTCRGqE.js";import"./@css-render-EhH995Cp.js";import"./vooks-Cw9CgJAa.js";import"./vdirs-DRH9Xvnd.js";import"./@juggle-C8OzoCMD.js";import"./css-render-BDrvWz3H.js";import"./@emotion-WldOFDRm.js";import"./treemate-DKekKYbv.js";import"./async-validator-9PlIezaS.js";import"./copy-to-clipboard-DeoKWNS3.js";import"./toggle-selection-BHUZwh74.js";const ae=h.enc.Utf8.parse("18873AC2978EC7FA"),le=h.enc.Utf8.parse("4FE46BE1C4485C95");function ie(b){if(typeof b!="string"||!b)return b;try{const f=h.enc.Utf8.parse(b);return h.AES.encrypt(f,ae,{iv:le,mode:h.mode.CBC,padding:h.pad.Pkcs7}).ciphertext.toString()}catch(f){return console.log("error",f),b}}const pe={"wh-full":"","f-c-c":"",class:"bg-content"},ue={class:"form-container sign-in-container"},de={class:"form-container sign-up-container"},me={class:"overlay-container"},ce={class:"overlay"},fe={class:"overlay-panel overlay-left"},ge={class:"overlay-panel overlay-right"},ve=S({name:"Login"}),we=S({...ve,setup(b){const f=w("signUp"),i=I({name:"admin",password:"123456",captchaText:"",captchaUid:""}),k=w(null),x=w(!1),B=Z(),T={name:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],captchaText:[{required:!0,message:"请输入验证码",trigger:"blur"}]},A=X(),z=Y(),q=()=>{var l;(l=k.value)==null||l.validate(e=>{if(!e){x.value=!0;const c={...i,password:ie(i.password)};M(),N(c).then(async a=>{x.value=!1,B.success("登录成功,欢迎回来"),V().setToken(a.data);const{redirect:p}=A.query;z.push(p||"/")}).catch(()=>{var a,d;x.value=!1,(a=C.value)==null||a.focus(),(d=C.value)==null||d.select(),U()})}})},C=w(null),K=w(""),U=()=>{H().then(l=>{K.value="data:image/*;base64, "+l.data.captcha,i.captchaUid=l.data.uid})};U();const u=I({name:"",pwd:"",email:"",phone:""}),E={name:[{required:!0,message:"请输入用户名",trigger:"blur"}],pwd:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:W,message:"密码格式不正确",trigger:"input"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:Q,message:"请输入正确的邮箱",trigger:"input"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:O,message:"请输入正确的手机号",trigger:"input"}]},y=w(null),L=w(!1),R=()=>{var l;(l=y.value)==null||l.validate(e=>{e||console.log(u,"注册")})};function g(l){const e=l==null?void 0:l.$el.querySelectorAll(".n-input__input-el,.n-button"),c=Array.from(e),a=c.findIndex(p=>p===document.activeElement),d=c[a+1];a+1<e.length&&(d==null||d.focus())}return(l,e)=>{const c=P,a=te,d=ee,p=ne,v=oe,$=se,F=re;return D(),j("div",pe,[s("div",{class:G(["bg-white rd-12 relative w-768 max-w-full min-h-480 card-shadow dark:bg-dark",{"right-panel-active":o(f)==="signIn"}])},[s("div",ue,[t(F,{ref_key:"loginFormRef",ref:k,size:"small","show-label":!1,model:o(i),rules:T,class:"flex-col-c bg-white h-full rounded-10 dark:bg-dark"},{default:r(()=>[e[17]||(e[17]=s("h1",{"m-0":"",class:"dark:color-[#fff]"},"登录",-1)),t(d,{"my-20":""},{default:r(()=>[t(a,{circle:""},{icon:r(()=>[t(c,{icon:"bi:tencent-qq"})]),_:1}),t(a,{circle:""},{icon:r(()=>[t(c,{icon:"tabler:brand-wechat"})]),_:1}),t(a,{circle:""},{icon:r(()=>[t(c,{icon:"mdi:github"})]),_:1})]),_:1}),e[18]||(e[18]=s("span",{"mb-10":"","font-size-12":"",class:"dark:color-[#fff]"},"或者使用你的账号",-1)),t(v,{path:"name",class:"w-[80%]"},{default:r(()=>[t(p,{value:o(i).name,"onUpdate:value":e[0]||(e[0]=n=>o(i).name=n),onKeydown:e[1]||(e[1]=m(n=>g(o(k)),["enter"])),placeholder:"请输入账户名称"},null,8,["value"])]),_:1}),t(v,{path:"password",class:"w-[80%]"},{default:r(()=>[t(p,{value:o(i).password,"onUpdate:value":e[2]||(e[2]=n=>o(i).password=n),onKeydown:e[3]||(e[3]=m(n=>g(o(k)),["enter"])),type:"password","show-password-on":"mousedown",placeholder:"请输入账户密码",maxlength:12},null,8,["value"])]),_:1}),t(v,{path:"captchaText",class:"w-[80%]"},{default:r(()=>[t(p,{ref_key:"captchaInputRef",ref:C,value:o(i).captchaText,"onUpdate:value":e[4]||(e[4]=n=>o(i).captchaText=n),onKeydown:e[5]||(e[5]=m(n=>g(o(k)),["enter"])),placeholder:"请输入验证码"},null,8,["value"]),s("div",{onClick:U,"h-28":"","w-100":"","cursor-pointer":"",class:"bg-[#fff]"},[t($,{src:o(K),"preview-disabled":!0,width:"100",height:"28"},null,8,["src"])])]),_:1}),e[19]||(e[19]=s("div",{flex:"","mb-10":"","min-w-308":""},[s("span",{"font-size-12":"",class:"dark:color-[#fff]"},"忘记密码？")],-1)),t(a,{class:"w-[40%] font-bold",round:"",type:"primary",loading:o(x),onClick:q,onKeyup:m(q,["enter"])},{default:r(()=>[...e[16]||(e[16]=[_("登录 ",-1)])]),_:1},8,["loading"])]),_:1},8,["model"])]),s("div",de,[t(F,{ref_key:"registFormRef",ref:y,size:"small","show-label":!1,model:o(u),rules:E,class:"flex-col-c bg-white h-full rounded-10 dark:bg-dark"},{default:r(()=>[e[21]||(e[21]=s("h1",{"m-0":"",class:"dark:color-[#fff]"},"注册",-1)),t(v,{path:"name",class:"w-[80%]"},{default:r(()=>[t(p,{value:o(u).name,"onUpdate:value":e[6]||(e[6]=n=>o(u).name=n),onKeydown:e[7]||(e[7]=m(n=>g(o(y)),["enter"])),placeholder:"请输入账户名称"},null,8,["value"])]),_:1}),t(v,{path:"pwd",class:"w-[80%]"},{default:r(()=>[t(p,{value:o(u).pwd,"onUpdate:value":e[8]||(e[8]=n=>o(u).pwd=n),onKeydown:e[9]||(e[9]=m(n=>g(o(y)),["enter"])),type:"password","show-password-on":"click",placeholder:"请输入账户密码",maxlength:12},null,8,["value"])]),_:1}),t(v,{path:"email",class:"w-[80%]"},{default:r(()=>[t(p,{value:o(u).email,"onUpdate:value":e[10]||(e[10]=n=>o(u).email=n),onKeydown:e[11]||(e[11]=m(n=>g(o(y)),["enter"])),placeholder:"请输入邮箱"},null,8,["value"])]),_:1}),t(v,{path:"phone",class:"w-[80%]"},{default:r(()=>[t(p,{value:o(u).phone,"onUpdate:value":e[12]||(e[12]=n=>o(u).phone=n),onKeydown:e[13]||(e[13]=m(n=>g(o(y)),["enter"])),placeholder:"请输入手机号"},null,8,["value"])]),_:1}),t(a,{class:"w-[40%] font-bold",round:"",type:"primary",loading:o(L),onKeyup:m(R,["enter"]),onClick:R},{default:r(()=>[...e[20]||(e[20]=[_("注册 ",-1)])]),_:1},8,["loading"])]),_:1},8,["model"])]),s("div",me,[s("div",ce,[s("div",fe,[s("h1",null,[e[22]||(e[22]=_("欢迎回来！ ",-1)),t($,{width:"48",height:"48","preview-disabled":"",src:"/logo.webp",class:"b-rd-[50%]"})]),e[24]||(e[24]=s("p",null,"要与我们保持联系，请使用您的个人信息登录",-1)),t(a,{ghost:"",round:"",color:"#fff",onClick:e[14]||(e[14]=n=>f.value="signUp")},{default:r(()=>[...e[23]||(e[23]=[_("去登录",-1)])]),_:1})]),s("div",ge,[s("h1",null,[e[25]||(e[25]=_("你好，朋友！ ",-1)),t($,{width:"48",height:"48","preview-disabled":"",src:"/logo.webp",class:"b-rd-[50%]"})]),e[27]||(e[27]=s("p",null,"非常感谢您选择我们！我们将竭诚为您提供最优质、最全面的服务。",-1)),t(a,{ghost:"",round:"",color:"#fff",onClick:e[15]||(e[15]=n=>f.value="signIn")},{default:r(()=>[...e[26]||(e[26]=[_("去注册",-1)])]),_:1})])])])],2)])}}}),nt=J(we,[["__scopeId","data-v-193a4c4b"]]);export{nt as default};
