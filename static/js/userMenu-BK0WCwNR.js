import{_ as e,u as a,a as l}from"./index-rQKpO1eD.js";import{_ as t,a as i}from"./queryItem.vue_vue_type_style_index_0_scope_true_lang-NY9PludQ.js";import{a as n,i as o,f as d,j as s,k as r,m as u,n as p,o as m}from"./index-BYCMBCbo.js";import{j as v,T as y,a0 as c,$ as b,L as k,G as f,Y as h,W as _,a1 as j,H as g,M as w}from"./naive-ui-DtZk0WJ8.js";import{d as T,a as U,h as x,l as L,m as A,q as D,by as R,u as S,f as q,ad as F,ae as K}from"./@vue-7s647Hg9.js";import"./vue-i18n-Af_yDAzr.js";import"./@intlify-DTqJVEQS.js";import"./lodash-es-BqiBNFWB.js";import"./pinia-DxolVr3A.js";import"./vue-demi-Dq6ymT-8.js";import"./@vueuse-5kwDSbK9.js";import"./vue-echarts-DpynRI6o.js";import"./resize-detector-BnI0Kdmb.js";import"./echarts-BRR8dxA2.js";import"./zrender-BiYmND81.js";import"./tslib-ZseNXxlj.js";import"./vue-router-BiYFwnTs.js";import"./@iconify-BsjoIFlE.js";import"./axios-CURSphCx.js";import"./@codemirror-BDMijoIR.js";import"./@lezer-B1NhjyO5.js";import"./crelt-DSg10-ms.js";import"./style-mod-BCKp0_dq.js";import"./w3c-keyname-f-y9tSbI.js";import"./pinia-plugin-persistedstate-Cs-f0Iqr.js";import"./date-fns-YzY8oSGz.js";import"./@babel-DJq229zv.js";import"./vueuc-Bk9f_vlN.js";import"./evtd-hWw0KU7y.js";import"./seemly-B0CCZz1h.js";import"./@css-render-sXtP9vHb.js";import"./vooks-Dg4BxRLw.js";import"./vdirs-aWQMhJPa.js";import"./@juggle-BnTvdTVm.js";import"./css-render-7x70jhNC.js";import"./@emotion-DFFAhID7.js";import"./treemate-CC-CeH3d.js";import"./async-validator-Cuo4gI4y.js";const V=T({name:"UserMenu"}),z=T({...V,setup(T){const V={add:["admin","menu:add"],del:["admin","menu:del"],edit:["admin","menu:edit"]},z=U([{type:"selection"},{title:"ID",key:"id"},{title:"菜单标题",key:"title"},{title:"图标",key:"icon",render:e=>x(n,{icon:e.icon||""})},{title:"排序",key:"sort"},{title:"组件路径",key:"component"},{title:"外链",key:"externalLink",render:e=>x("span",e.externalLink?"否":"是")},{title:"缓存",key:"keepAlive",render:e=>x("span",e.keepAlive?"否":"是")},{title:"可见",key:"visibily",render:e=>x("span",e.visibily?"否":"是")},{title:"创建日期",key:"createTime"},{title:"操作",key:"actions",align:"center",fixed:"right",render:a=>[x(e,{permission:V,onHandleDelete:()=>J(a.id),onHandleEdit:()=>N(a),onHandleView:()=>O(a)})]}]),E=e=>s({pid:e.id}).then((a=>{e.children=a.data.data})),H=U(),Q={title:[{required:!0,message:"请输入菜单标题",trigger:"blur"}],path:[{required:!0,message:"请输入路由地址",trigger:"blur"}],name:[{required:!0,message:"请输入组件名称",trigger:"blur"}],component:[{required:!0,message:"请输入组件地址",trigger:"blur"}],link:[{required:!0,message:"请输入外链菜单地址",trigger:"blur"}]},M={add:!0,del:!0,edit:!0,view:!0,download:!1},{modalVisible:C,modalAction:I,modalShowFooter:P,modalTitle:W,modalLoading:B,handleAdd:G,handleDelete:J,handleEdit:N,handleView:O,handleSave:Y,handlereset:$,defualtQuery:X,modalForm:Z,modalFormRef:ee,changeCheckRow:ae,listQuery:le,listData:te,loading:ie,rowKey:ne,btnDisabled:oe,checkedRowKeys:de}=a({name:"菜单",url:"/menu",key:"id",isPagination:!1,initForm:{pid:0,path:"",title:"",visibily:!0,menuType:1,icon:"",name:"",component:"",keepAlive:!1,externalLink:!1,link:"",sort:1,competence:""},initQuery:{pid:0,title:""},beforeRefresh:e=>(e&&e.title&&(e.pid=void 0),e),beforeAsyncValidate:async()=>{const e=await r();H.value=[{id:0,title:"顶级菜单",isLeaf:!1,children:e.data}]},beforeSave:e=>(2===e.menuType&&(e.visibily=!0),e),doDelete:u,doCreate:p,doUpdate:m}),se=e=>{Z.menuType=e,Z.externalLink=!1};return(e,a)=>{const n=v,s=t,r=y,u=i,p=c,m=b,T=k,U=f,x=h,O=_,re=j,ue=g,pe=w,me=l;return L(),A("div",null,[D(u,{columns:S(z),"onUpdate:columns":a[1]||(a[1]=e=>q(z)?z.value=e:null),btnDisabled:S(oe),permission:V,optShow:M,onSearch:S(le),onReset:S($),onAdd:S(G),onDelete:S(J),onEdit:S(N)},{queryBar:R((()=>[D(s,{label:"菜单名称"},{default:R((()=>[D(n,{value:S(X).title,"onUpdate:value":a[0]||(a[0]=e=>S(X).title=e),size:"small",clearable:"",placeholder:"输入菜单名称，模糊搜索"},null,8,["value"])])),_:1})])),default:R((()=>[D(r,{columns:S(z),data:S(te),loading:S(ie),"row-key":S(ne),striped:"",remote:!0,cascade:!1,"allow-checking-not-loaded":"","checked-row-keys":S(de),onLoad:E,"onUpdate:checkedRowKeys":S(ae)},null,8,["columns","data","loading","row-key","checked-row-keys","onUpdate:checkedRowKeys"])])),_:1},8,["columns","btnDisabled","onSearch","onReset","onAdd","onDelete","onEdit"]),D(me,{visible:S(C),"onUpdate:visible":a[15]||(a[15]=e=>q(C)?C.value=e:null),title:S(W),loading:S(B),"show-footer":S(P),width:"600px",onSave:S(Y)},{default:R((()=>[D(pe,{ref_key:"modalFormRef",ref:ee,"label-placement":"left","label-align":"right","label-width":80,model:S(Z),rules:Q,disabled:"view"===S(I)},{default:R((()=>[D(ue,{"x-gap":"12",cols:6},{default:R((()=>[D(U,{span:"3"},{default:R((()=>[D(T,{label:"菜单类型",path:"menuType"},{default:R((()=>[D(m,{value:S(Z).menuType,"onUpdate:value":a[2]||(a[2]=e=>S(Z).menuType=e),name:"menuType","on-update:value":se},{default:R((()=>[(L(),F(p,{key:1,value:1,label:"目录"})),(L(),F(p,{key:0,value:0,label:"菜单"})),(L(),F(p,{key:2,value:2,label:"按钮"}))])),_:1},8,["value"])])),_:1})])),_:1}),2!==S(Z).menuType?(L(),F(U,{key:0,span:"3"},{default:R((()=>[D(T,{label:"菜单图标",path:"icon"},{default:R((()=>[D(x,{value:S(Z).icon,"onUpdate:value":a[3]||(a[3]=e=>S(Z).icon=e),options:S(o),renderLabel:S(d),filterable:"",clearable:""},null,8,["value","options","renderLabel"])])),_:1})])),_:1})):K("",!0),2!==S(Z).menuType?(L(),F(U,{key:1,span:"2"},{default:R((()=>[D(T,{label:"菜单可见",path:"visibily"},{default:R((()=>[D(m,{value:S(Z).visibily,"onUpdate:value":a[4]||(a[4]=e=>S(Z).visibily=e),name:"visibily"},{default:R((()=>[(L(),F(p,{key:1,value:!0,label:"是"})),(L(),F(p,{key:0,value:!1,label:"否"}))])),_:1},8,["value"])])),_:1})])),_:1})):K("",!0),S(Z).menuType?K("",!0):(L(),F(U,{key:2,span:"2"},{default:R((()=>[D(T,{label:"菜单缓存",path:"keepAlive"},{default:R((()=>[D(m,{value:S(Z).keepAlive,"onUpdate:value":a[5]||(a[5]=e=>S(Z).keepAlive=e),name:"keepAlive"},{default:R((()=>[(L(),F(p,{key:1,value:!0,label:"是"})),(L(),F(p,{key:0,value:!1,label:"否"}))])),_:1},8,["value"])])),_:1})])),_:1})),S(Z).menuType?K("",!0):(L(),F(U,{key:3,span:"2"},{default:R((()=>[D(T,{label:"外链菜单",path:"externalLink"},{default:R((()=>[D(m,{value:S(Z).externalLink,"onUpdate:value":a[6]||(a[6]=e=>S(Z).externalLink=e),name:"externalLink"},{default:R((()=>[(L(),F(p,{key:1,value:!0,label:"是"})),(L(),F(p,{key:0,value:!1,label:"否"}))])),_:1},8,["value"])])),_:1})])),_:1})),S(Z).externalLink&&!S(Z).menuType?(L(),F(U,{key:4,span:"6"},{default:R((()=>[D(T,{label:"外链链接",path:"link"},{default:R((()=>[D(n,{value:S(Z).link,"onUpdate:value":a[7]||(a[7]=e=>S(Z).link=e),clearable:""},null,8,["value"])])),_:1})])),_:1})):K("",!0),D(U,{span:2===S(Z).menuType?3:6},{default:R((()=>[D(T,{label:2===S(Z).menuType?"按钮名称":"菜单标题",path:"title"},{default:R((()=>[D(n,{value:S(Z).title,"onUpdate:value":a[8]||(a[8]=e=>S(Z).title=e),clearable:""},null,8,["value"])])),_:1},8,["label"])])),_:1},8,["span"]),1===S(Z).menuType||S(Z).externalLink?K("",!0):(L(),F(U,{key:5,span:"3"},{default:R((()=>[D(T,{label:"权限标识",path:"competence"},{default:R((()=>[D(n,{value:S(Z).competence,"onUpdate:value":a[9]||(a[9]=e=>S(Z).competence=e),clearable:""},null,8,["value"])])),_:1})])),_:1})),D(U,{span:"3"},{default:R((()=>[D(T,{label:"菜单排序",path:"sort"},{default:R((()=>[D(O,{value:S(Z).sort,"onUpdate:value":a[10]||(a[10]=e=>S(Z).sort=e),clearable:""},null,8,["value"])])),_:1})])),_:1}),2!==S(Z).menuType?(L(),F(U,{key:6,span:"3"},{default:R((()=>[D(T,{label:"路由地址",path:"path"},{default:R((()=>[D(n,{value:S(Z).path,"onUpdate:value":a[11]||(a[11]=e=>S(Z).path=e),clearable:""},null,8,["value"])])),_:1})])),_:1})):K("",!0),S(Z).menuType||S(Z).externalLink?K("",!0):(L(),F(U,{key:7,span:"3"},{default:R((()=>[D(T,{label:"组件名称",path:"name"},{default:R((()=>[D(n,{value:S(Z).name,"onUpdate:value":a[12]||(a[12]=e=>S(Z).name=e),clearable:""},null,8,["value"])])),_:1})])),_:1})),S(Z).menuType||S(Z).externalLink?K("",!0):(L(),F(U,{key:8,span:"3"},{default:R((()=>[D(T,{label:"组件路径",path:"component"},{default:R((()=>[D(n,{value:S(Z).component,"onUpdate:value":a[13]||(a[13]=e=>S(Z).component=e),clearable:""},null,8,["value"])])),_:1})])),_:1})),D(U,{span:"6"},{default:R((()=>[D(T,{label:"上级菜单",path:"pid"},{default:R((()=>[D(re,{options:S(H),filterable:"","default-value":S(Z).pid,"label-field":"title","key-field":"id","onUpdate:value":a[14]||(a[14]=e=>S(Z).pid=e)},null,8,["options","default-value"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","disabled"])])),_:1},8,["visible","title","loading","show-footer","onSave"])])}}});export{z as default};
