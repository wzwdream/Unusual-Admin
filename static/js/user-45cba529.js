import{_ as e,u as a,a as l}from"./index-906593f8.js";import{_ as t,a as s}from"./queryItem.vue_vue_type_style_index_0_scope_true_lang-2a7f3db2.js";import{h as u,a as d}from"./index-b3536dae.js";import{g as o}from"./userRole-0da7543c.js";import{u as n}from"./useDict-701118d3.js";import{c as i,a as r,b as m}from"./calibrationRules-6d34d65c.js";import{h as p,M as v,x as b,ba as c,o as h,q as f,k as g,w as _,l as y,Q as k,J as w,H as x,j as U,S as D,bb as N,b4 as R,aU as j,az as S,bc as q,bd as V,ax as F,aV as A}from"./.pnpm-222492af.js";import"./dict-ec7f526e.js";const E=e=>u.put("/user",e),H=e=>u.delete("/user",e),Q=e=>u.post("/user",e),z=p({name:"User"}),I=d(p({...z,setup(u){const d=v([]);o().then((e=>{d.value=e.data}));const{dict:p,getDictLabel:z}=n(["status","sex"]),I=v([{type:"selection",disabled:e=>1===e.id},{title:"ID",key:"id"},{title:"登录账号",key:"userName"},{title:"用户姓名",key:"name"},{title:"性别",key:"sex",render:e=>b("span",z("sex",String(e.sex)))},{title:"电话",key:"phone"},{title:"状态",key:"status",render:e=>b(c,{rubberBand:!1,value:Number(e.status),loading:!!e.loading,checkedValue:1,uncheckedValue:0,disabled:1===e.id,onUpdateValue:()=>K(e)})},{title:"创建日期",key:"createTime"},{title:"操作",key:"actions",align:"center",fixed:"right",render:a=>[b(e,{disabled:1===a.id,onHandleDelete:()=>G([a.id]),onHandleEdit:()=>O(a),onHandleView:()=>X(a)})]}]),K=async e=>{e.loading=!0;const a={...e,status:0===e.status?1:0};await E(a),await te(),e.loading=!1},B={userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],pwd:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:i,message:"密码格式不正确",trigger:"input"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:r,message:"请输入正确的邮箱",trigger:"input"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:m,message:"请输入正确的手机号",trigger:"input"}]},{modalVisible:C,modalAction:L,modalShowFooter:T,modalTitle:J,modalLoading:M,handleAdd:P,handleDelete:G,handleEdit:O,handleDownload:W,handleView:X,handleSave:Y,handlereset:Z,defualtQuery:$,modalForm:ee,modalFormRef:ae,changeCheckRow:le,listQuery:te,listData:se,loading:ue,rowKey:de,btnDisabled:oe}=a({name:"用户",url:"/user",key:"id",isPagination:!1,initForm:{userName:"",name:"",phone:"",email:"",sex:0,status:1,roles:[]},initQuery:{userName:void 0,phone:void 0,status:void 0},beforeRefresh:e=>(e&&e.title&&(e.pid=void 0),e),doDelete:H,doCreate:Q,doUpdate:E});return(e,a)=>{const u=D,o=t,n=N,i=R,r=s,m=j,v=S,b=q,c=V,E=F,H=A,Q=l;return h(),f("div",null,[g(r,{columns:y(I),"onUpdate:columns":a[3]||(a[3]=e=>k(I)?I.value=e:null),btnDisabled:y(oe),onSearch:y(te),onReset:y(Z),onAdd:y(P),onDelete:y(G),onEdit:y(O),onDownload:y(W)},{queryBar:_((()=>[g(o,{label:"用户名称"},{default:_((()=>[g(u,{value:y($).userName,"onUpdate:value":a[0]||(a[0]=e=>y($).userName=e),size:"small",clearable:"",placeholder:"输入用户名称，模糊搜索"},null,8,["value"])])),_:1}),g(o,{label:"手机号"},{default:_((()=>[g(u,{value:y($).phone,"onUpdate:value":a[1]||(a[1]=e=>y($).phone=e),size:"small",clearable:"",placeholder:"输入手机号，模糊搜索"},null,8,["value"])])),_:1}),g(o,{label:"用户状态"},{default:_((()=>{var e;return[g(n,{value:y($).status,"onUpdate:value":a[2]||(a[2]=e=>y($).status=e),placeholder:"选择用户状态",options:null==(e=y(p))?void 0:e.status,clearable:""},null,8,["value","options"])]})),_:1})])),default:_((()=>[g(i,{columns:y(I),data:y(se),loading:y(ue),"row-key":y(de),striped:"",remote:!0,"onUpdate:checkedRowKeys":y(le)},null,8,["columns","data","loading","row-key","onUpdate:checkedRowKeys"])])),_:1},8,["columns","btnDisabled","onSearch","onReset","onAdd","onDelete","onEdit","onDownload"]),g(Q,{visible:y(C),"onUpdate:visible":a[11]||(a[11]=e=>k(C)?C.value=e:null),title:y(J),loading:y(M),"show-footer":y(T),width:"600px",onSave:y(Y)},{default:_((()=>[g(H,{ref_key:"modalFormRef",ref:ae,"label-placement":"left","label-align":"right","label-width":80,model:y(ee),rules:B,disabled:"view"===y(L)},{default:_((()=>[g(E,{"x-gap":"12",cols:2},{default:_((()=>[g(v,null,{default:_((()=>[g(m,{label:"登录账号",path:"userName"},{default:_((()=>[g(u,{value:y(ee).userName,"onUpdate:value":a[4]||(a[4]=e=>y(ee).userName=e),clearable:""},null,8,["value"])])),_:1})])),_:1}),g(v,null,{default:_((()=>[g(m,{label:"电话",path:"phone"},{default:_((()=>[g(u,{value:y(ee).phone,"onUpdate:value":a[5]||(a[5]=e=>y(ee).phone=e),clearable:""},null,8,["value"])])),_:1})])),_:1}),g(v,null,{default:_((()=>[g(m,{label:"用户姓名",path:"name"},{default:_((()=>[g(u,{value:y(ee).name,"onUpdate:value":a[6]||(a[6]=e=>y(ee).name=e),clearable:""},null,8,["value"])])),_:1})])),_:1}),g(v,null,{default:_((()=>[g(m,{label:"邮箱",path:"email"},{default:_((()=>[g(u,{value:y(ee).email,"onUpdate:value":a[7]||(a[7]=e=>y(ee).email=e),clearable:""},null,8,["value"])])),_:1})])),_:1}),g(v,null,{default:_((()=>[g(m,{label:"性别",path:"sex"},{default:_((()=>[g(c,{value:y(ee).sex,"onUpdate:value":a[8]||(a[8]=e=>y(ee).sex=e),name:"sex"},{default:_((()=>{var e;return[(h(!0),f(w,null,x(null==(e=y(p))?void 0:e.sex,(e=>(h(),U(b,{key:e.id,value:Number(e.value),label:e.label},null,8,["value","label"])))),128))]})),_:1},8,["value"])])),_:1})])),_:1}),g(v,null,{default:_((()=>[g(m,{label:"状态",path:"status"},{default:_((()=>[g(c,{value:y(ee).status,"onUpdate:value":a[9]||(a[9]=e=>y(ee).status=e),name:"status"},{default:_((()=>{var e;return[(h(!0),f(w,null,x(null==(e=y(p))?void 0:e.status,(e=>(h(),U(b,{key:e.id,value:Number(e.value),label:e.label},null,8,["value","label"])))),128))]})),_:1},8,["value"])])),_:1})])),_:1}),g(v,{span:"2"},{default:_((()=>[g(m,{label:"用户角色",path:"roles"},{default:_((()=>[g(n,{value:y(ee).roles,"onUpdate:value":a[10]||(a[10]=e=>y(ee).roles=e),multiple:"","label-field":"roleName","value-field":"id",filterable:"",clearable:"",options:y(d)},null,8,["value","options"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","disabled"])])),_:1},8,["visible","title","loading","show-footer","onSave"])])}}}),[["__scopeId","data-v-c041deb7"]]);export{I as default};
