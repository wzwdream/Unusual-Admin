import{k as st,x as $o,M as To,u as So,U as lt,I as xo,C as Eo,$ as _o}from"./@vavt-DP7Y4tOx.js";import{d as D,q as ee,a as F,w as A,b as G,v as Ce,x as ot,y as d,i as E,h as Ao,s as ge,j as J,n as ue,T as Io,z as re,F as Ue,t as ce,A as Lo}from"./@vue-hDPt79YI.js";import{k as Ho,C as be,E as de,d as Fo,a as Ro,h as Mo,i as Po,b as fl,m as No,u as Oo,r as Bo,s as zl,c as Do,e as jo,f as Ye,g as Vo,p as Wo,j as ke,H as Gl,l as Uo,n as zo,S as Go}from"./@codemirror-BcTyK8Ct.js";import{d as w}from"./@lezer-Bq4_8UpH.js";import{m as qo}from"./medium-zoom-bWEtUbjf.js";import{a as Xo}from"./copy-to-clipboard-CoXQxBGa.js";import{M as Ko}from"./markdown-it-C44Roubk.js";import{r as Yo}from"./markdown-it-image-figures-IpqUZCLv.js";import{s as Zo}from"./markdown-it-sub-Bxi31R0z.js";import{s as Jo}from"./markdown-it-sup-Bp2DoVCN.js";import{L as Qo}from"./lru-cache-DmfXgoGS.js";const r="md-editor",en="https://at.alicdn.com/t/c/font_2605852_cmafimm6hot.js",tn="https://at.alicdn.com/t/c/font_2605852_cmafimm6hot.css",B="https://unpkg.com",ln=`${B}/@highlightjs/cdn-assets@11.10.0/highlight.min.js`,ml={main:`${B}/prettier@3.3.3/standalone.js`,markdown:`${B}/prettier@3.3.3/plugins/markdown.js`},on={css:`${B}/cropperjs@1.6.2/dist/cropper.min.css`,js:`${B}/cropperjs@1.6.2/dist/cropper.min.js`},nn=`${B}/screenfull@5.2.0/dist/screenfull.js`,an=`${B}/mermaid@11.3.0/dist/mermaid.min.js`,rn={js:`${B}/katex@0.16.11/dist/katex.min.js`,css:`${B}/katex@0.16.11/dist/katex.min.css`},nt={a11y:{light:`${B}/@highlightjs/cdn-assets@11.10.0/styles/a11y-light.min.css`,dark:`${B}/@highlightjs/cdn-assets@11.10.0/styles/a11y-dark.min.css`},atom:{light:`${B}/@highlightjs/cdn-assets@11.10.0/styles/atom-one-light.min.css`,dark:`${B}/@highlightjs/cdn-assets@11.10.0/styles/atom-one-dark.min.css`},github:{light:`${B}/@highlightjs/cdn-assets@11.10.0/styles/github.min.css`,dark:`${B}/@highlightjs/cdn-assets@11.10.0/styles/github-dark.min.css`},gradient:{light:`${B}/@highlightjs/cdn-assets@11.10.0/styles/gradient-light.min.css`,dark:`${B}/@highlightjs/cdn-assets@11.10.0/styles/gradient-dark.min.css`},kimbie:{light:`${B}/@highlightjs/cdn-assets@11.10.0/styles/kimbie-light.min.css`,dark:`${B}/@highlightjs/cdn-assets@11.10.0/styles/kimbie-dark.min.css`},paraiso:{light:`${B}/@highlightjs/cdn-assets@11.10.0/styles/paraiso-light.min.css`,dark:`${B}/@highlightjs/cdn-assets@11.10.0/styles/paraiso-dark.min.css`},qtcreator:{light:`${B}/@highlightjs/cdn-assets@11.10.0/styles/qtcreator-light.min.css`,dark:`${B}/@highlightjs/cdn-assets@11.10.0/styles/qtcreator-dark.min.css`},stackoverflow:{light:`${B}/@highlightjs/cdn-assets@11.10.0/styles/stackoverflow-light.min.css`,dark:`${B}/@highlightjs/cdn-assets@11.10.0/styles/stackoverflow-dark.min.css`}},ql=["bold","underline","italic","strikeThrough","-","title","sub","sup","quote","unorderedList","orderedList","task","-","codeRow","code","link","image","table","mermaid","katex","-","revoke","next","save","=","prettier","pageFullscreen","fullscreen","preview","previewOnly","htmlPreview","catalog","github"],Xl=["markdownTotal","=","scrollSwitch"],gl={"zh-CN":{toolbarTips:{bold:"加粗",underline:"下划线",italic:"斜体",strikeThrough:"删除线",title:"标题",sub:"下标",sup:"上标",quote:"引用",unorderedList:"无序列表",orderedList:"有序列表",task:"任务列表",codeRow:"行内代码",code:"块级代码",link:"链接",image:"图片",table:"表格",mermaid:"mermaid图",katex:"katex公式",revoke:"后退",next:"前进",save:"保存",prettier:"美化",pageFullscreen:"浏览器全屏",fullscreen:"屏幕全屏",preview:"预览",previewOnly:"仅预览",htmlPreview:"html代码预览",catalog:"目录",github:"源码地址"},titleItem:{h1:"一级标题",h2:"二级标题",h3:"三级标题",h4:"四级标题",h5:"五级标题",h6:"六级标题"},imgTitleItem:{link:"添加链接",upload:"上传图片",clip2upload:"裁剪上传"},linkModalTips:{linkTitle:"添加链接",imageTitle:"添加图片",descLabel:"链接描述：",descLabelPlaceHolder:"请输入描述...",urlLabel:"链接地址：",urlLabelPlaceHolder:"请输入链接...",buttonOK:"确定"},clipModalTips:{title:"裁剪图片上传",buttonUpload:"上传"},copyCode:{text:"复制代码",successTips:"已复制！",failTips:"复制失败！"},mermaid:{flow:"流程图",sequence:"时序图",gantt:"甘特图",class:"类图",state:"状态图",pie:"饼图",relationship:"关系图",journey:"旅程图"},katex:{inline:"行内公式",block:"块级公式"},footer:{markdownTotal:"字数",scrollAuto:"同步滚动"}},"en-US":{toolbarTips:{bold:"bold",underline:"underline",italic:"italic",strikeThrough:"strikeThrough",title:"title",sub:"subscript",sup:"superscript",quote:"quote",unorderedList:"unordered list",orderedList:"ordered list",task:"task list",codeRow:"inline code",code:"block-level code",link:"link",image:"image",table:"table",mermaid:"mermaid",katex:"formula",revoke:"revoke",next:"undo revoke",save:"save",prettier:"prettier",pageFullscreen:"fullscreen in page",fullscreen:"fullscreen",preview:"preview",previewOnly:"preview only",htmlPreview:"html preview",catalog:"catalog",github:"source code"},titleItem:{h1:"Lv1 Heading",h2:"Lv2 Heading",h3:"Lv3 Heading",h4:"Lv4 Heading",h5:"Lv5 Heading",h6:"Lv6 Heading"},imgTitleItem:{link:"Add Image Link",upload:"Upload Images",clip2upload:"Clip Upload"},linkModalTips:{linkTitle:"Add Link",imageTitle:"Add Image",descLabel:"Desc:",descLabelPlaceHolder:"Enter a description...",urlLabel:"Link:",urlLabelPlaceHolder:"Enter a link...",buttonOK:"OK"},clipModalTips:{title:"Crop Image",buttonUpload:"Upload"},copyCode:{text:"Copy",successTips:"Copied!",failTips:"Copy failed!"},mermaid:{flow:"flow",sequence:"sequence",gantt:"gantt",class:"class",state:"state",pie:"pie",relationship:"relationship",journey:"journey"},katex:{inline:"inline",block:"block"},footer:{markdownTotal:"Character Count",scrollAuto:"Scroll Auto"}}},z={editorExtensions:{highlight:{js:ln,css:nt},prettier:{standaloneJs:ml.main,parserMarkdownJs:ml.markdown},cropper:{...on},iconfont:en,iconfontClass:tn,screenfull:{js:nn},mermaid:{js:an},katex:{...rn}},editorExtensionsAttrs:{},editorConfig:{languageUserDefined:{},mermaidTemplate:{},renderDelay:500,zIndex:2e4},codeMirrorExtensions:(e,l)=>l,markdownItConfig:()=>{},markdownItPlugins:e=>e,iconfontType:"svg",mermaidConfig:e=>e,katexConfig:e=>e},Ie=170,ne=({instance:e,ctx:l,props:t={}},o="default")=>{const n=(e==null?void 0:e.$slots[o])||(l==null?void 0:l.slots[o]);return(n?n(e):"")||t[o]},sn={overlay:{type:[String,Object],default:""},visible:{type:Boolean,default:!1},onChange:{type:Function,default:()=>{}},relative:{type:String,default:"html"}},ye=D({props:sn,setup(e,l){const t=`${r}-dropdown-hidden`,o=ee({overlayClass:[t],overlayStyle:{},triggerHover:!1,overlayHover:!1}),n=F(),a=F(),u=()=>{var i,c;o.triggerHover=!0;const g=n.value,h=a.value;if(!g||!h)return;const y=g.getBoundingClientRect(),p=g.offsetTop,v=g.offsetLeft,k=y.height,b=y.width,T=g.getRootNode(),C=((i=T.querySelector(e.relative))==null?void 0:i.scrollLeft)||0,S=((c=T.querySelector(e.relative))==null?void 0:c.clientWidth)||0;let x=v-h.offsetWidth/2+b/2-C;x+h.offsetWidth>C+S&&(x=C+S-h.offsetWidth),x<0&&(x=0),o.overlayStyle={...o.overlayStyle,top:p+k+"px",left:x+"px"},e.onChange(!0)},f=()=>{o.overlayHover=!0};A(()=>e.visible,i=>{i?o.overlayClass=o.overlayClass.filter(c=>c!==t):o.overlayClass.push(t)});let s=-1;const m=i=>{n.value===i.target?o.triggerHover=!1:o.overlayHover=!1,clearTimeout(s),s=window.setTimeout(()=>{!o.overlayHover&&!o.triggerHover&&e.onChange(!1)},10)};return G(()=>{n.value.addEventListener("mouseenter",u),n.value.addEventListener("mouseleave",m),a.value.addEventListener("mouseenter",f),a.value.addEventListener("mouseleave",m)}),Ce(()=>{n.value.removeEventListener("mouseenter",u),n.value.removeEventListener("mouseleave",m),a.value.removeEventListener("mouseenter",f),a.value.removeEventListener("mouseleave",m)}),()=>{const i=ne({ctx:l}),c=ne({props:e,ctx:l},"overlay"),g=ot(i instanceof Array?i[0]:i,{ref:n,key:"cloned-dropdown-trigger"}),h=d("div",{class:[`${r}-dropdown`,o.overlayClass],style:o.overlayStyle,ref:a},[d("div",{class:`${r}-dropdown-overlay`},[c instanceof Array?c[0]:c])]);return[g,h]}}}),cn={title:{type:String,default:""},visible:{type:Boolean,default:void 0},trigger:{type:[String,Object],default:void 0},onChange:{type:Function,default:void 0},overlay:{type:[String,Object],default:void 0},insert:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},previewTheme:{type:String,default:void 0},codeTheme:{type:String,default:void 0},default:{type:[String,Object],default:void 0}},Me=D({name:"DropdownToolbar",props:cn,emits:["onChange"],setup(e,l){const t=E("editorId");return()=>{const o=ne({props:e,ctx:l},"trigger"),n=ne({props:e,ctx:l},"overlay"),a=ne({props:e,ctx:l});return d(ye,{relative:`#${t}-toolbar-wrapper`,visible:e.visible,onChange:u=>{e.onChange instanceof Function?e.onChange(u):l.emit("onChange",u)},overlay:n},{default:()=>[d("div",{class:`${r}-toolbar-item`,title:e.title||""},[o,a])]})}}});Me.install=e=>(e.component(Me.name,Me),e);var un=Object.defineProperty,dn=(e,l,t)=>l in e?un(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,fn=(e,l,t)=>dn(e,l+"",t);class mn{constructor(){fn(this,"pools",{})}remove(l,t,o){const a=this.pools[l]&&this.pools[l][t];a&&(this.pools[l][t]=a.filter(u=>u!==o))}clear(l){this.pools[l]={}}on(l,t){return this.pools[l]||(this.pools[l]={}),this.pools[l][t.name]||(this.pools[l][t.name]=[]),this.pools[l][t.name].push(t.callback),this.pools[l][t.name].includes(t.callback)}emit(l,t,...o){this.pools[l]||(this.pools[l]={});const a=this.pools[l][t];a&&a.forEach(u=>{try{u(...o)}catch(f){console.error(`${t} monitor event exception！`,f)}})}}const $=new mn,ze="onSave",ct="changeCatalogVisible",Kl="changeFullscreen",vl="pageFullscreenChanged",hl="fullscreenChanged",pl="previewChanged",bl="previewOnlyChanged",yl="htmlPreviewChanged",kl="catalogVisibleChanged",Pe="buildFinished",ve="errorCatcher",P="replace",Ge="uploadImage",at="openModals",Yl="ctrlZ",Zl="ctrlShiftZ",Ee="catalogChanged",Jl="pushCatalog",ut="rerender",Ql="eventListener",eo="taskStateChanged",wl=(e,l)=>{const t=o=>{const n=e.parentElement||document.body,a=n.offsetWidth,u=n.offsetHeight,{clientWidth:f,clientHeight:s}=document.documentElement,m=o.offsetX,i=o.offsetY,c=h=>{let y=h.x+document.body.scrollLeft-document.body.clientLeft-m,p=h.y+document.body.scrollTop-document.body.clientTop-i;y=y<1?1:y<f-a-1?y:f-a-1,p=p<1?1:p<s-u-1?p:s-u-1,l?l(y,p):(n.style.left=`${y}px`,n.style.top=`${p}px`)};document.addEventListener("mousemove",c);const g=()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",g)};document.addEventListener("mouseup",g)};return e.addEventListener("mousedown",t),()=>{e.removeEventListener("mousedown",t)}},oe=(e,l,t="")=>{var o;const n=document.getElementById(l.id);if(n)t!==""&&(Reflect.get(window,t)?(o=l.onload)==null||o.call(n,new Event("load")):l.onload&&n.addEventListener("load",l.onload));else{const a={...l};a.onload=null;const u=vn(e,a);l.onload&&u.addEventListener("load",l.onload),document.head.appendChild(u)}},gn=(e,l)=>{const t=document.getElementById(l.id);t==null||t.remove(),oe(e,l)},vn=(e,l)=>{const t=document.createElement(e);return Object.keys(l).forEach(o=>{l[o]!==void 0&&(t[o]=l[o])}),t},Cl=(()=>{const e=t=>{if(!t)return;const o=t.firstChild;let n=1,a=0,u=0,f=!1,s,m,i,c=1;const g=()=>{o.style.transform=`translate(${a}px, ${u}px) scale(${n})`};t.addEventListener("touchstart",h=>{h.touches.length===1?(f=!0,s=h.touches[0].clientX-a,m=h.touches[0].clientY-u):h.touches.length===2&&(i=Math.hypot(h.touches[0].clientX-h.touches[1].clientX,h.touches[0].clientY-h.touches[1].clientY),c=n)},{passive:!1}),t.addEventListener("touchmove",h=>{if(h.preventDefault(),f&&h.touches.length===1)a=h.touches[0].clientX-s,u=h.touches[0].clientY-m,g();else if(h.touches.length===2){const p=Math.hypot(h.touches[0].clientX-h.touches[1].clientX,h.touches[0].clientY-h.touches[1].clientY)/i,v=n;n=c*(1+(p-1));const k=(h.touches[0].clientX+h.touches[1].clientX)/2,b=(h.touches[0].clientY+h.touches[1].clientY)/2,T=o.getBoundingClientRect(),C=(k-T.left)/v,S=(b-T.top)/v;a-=C*(n-v),u-=S*(n-v),g()}},{passive:!1}),t.addEventListener("touchend",()=>{f=!1}),t.addEventListener("wheel",h=>{h.preventDefault();const y=.02,p=n;h.deltaY<0?n+=y:n=Math.max(.1,n-y);const v=o.getBoundingClientRect(),k=h.clientX-v.left,b=h.clientY-v.top;a-=k/p*(n-p),u-=b/p*(n-p),g()},{passive:!1}),t.addEventListener("mousedown",h=>{f=!0,s=h.clientX-a,m=h.clientY-u}),t.addEventListener("mousemove",h=>{f&&(a=h.clientX-s,u=h.clientY-m,g())}),t.addEventListener("mouseup",()=>{f=!1}),t.addEventListener("mouseleave",()=>{f=!1})};return t=>{t.forEach(o=>{e(o)})}})(),hn=(e,l="image.png")=>{const t=e.split(","),o=t[0].match(/:(.*?);/);if(o){const n=o[1],a=atob(t[1]);let u=a.length;const f=new Uint8Array(u);for(;u--;)f[u]=a.charCodeAt(u);return new File([f],l,{type:n})}return null},pn=(e,l)=>{if(!e)return e;const t=l.split(`
`),o=['<span rn-wrapper aria-hidden="true">'];return t.forEach(()=>{o.push("<span></span>")}),o.push("</span>"),`<span class="${r}-code-block">${e}</span>${o.join("")}`},bn=(e,l)=>{if(!e||!l)return 0;const t=e==null?void 0:e.getBoundingClientRect();if(l===document.documentElement)return t.top-l.clientTop;const o=l==null?void 0:l.getBoundingClientRect();return t.top-o.top},yn=(()=>{let e=0;return l=>l+ ++e})(),$l=(()=>{let e=0;return()=>++e})(),kn=D({props:{name:{type:String,default:""}},setup(e){return()=>d("svg",{class:`${r}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":`#${r}-icon-${e.name}`},null)])}}),H=D({props:{name:{type:String,default:""}},setup(e){const l=E("customIcon");return()=>{const t=l.value[e.name];return typeof t=="object"?typeof t.component=="object"?Ao(t.component,t.props):d("span",{innerHTML:t.component},null):d(kn,{name:e.name},null)}}}),wn={title:{type:String,default:""},visible:{type:Boolean,default:!1},width:{type:String,default:"auto"},height:{type:String,default:"auto"},onClose:{type:Function},showAdjust:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},onAdjust:{type:Function,default:()=>{}},class:{type:String},style:{type:[Object,String],default:()=>({})},showMask:{type:Boolean,default:!0}},we=D({name:"MdModal",props:wn,emits:["onClose"],setup(e,l){const t=E("theme"),o=E("rootRef"),n=F(e.visible),a=F([`${r}-modal`]),u=F(),f=F(),s=F(),m=ge();let i=()=>{};const c=ee({maskStyle:{zIndex:-1},modalStyle:{zIndex:-1},initPos:{left:"0px",top:"0px"},historyPos:{left:"0px",top:"0px"}}),g=J(()=>e.isFullscreen?{width:"100%",height:"100%"}:{width:e.width,height:e.height});A(()=>e.isFullscreen,p=>{p?i():ue(()=>{i=wl(f.value,(v,k)=>{c.initPos.left=v+"px",c.initPos.top=k+"px"})})}),A(()=>e.visible,p=>{p?(c.maskStyle.zIndex=z.editorConfig.zIndex+$l(),c.modalStyle.zIndex=z.editorConfig.zIndex+$l(),a.value.push("zoom-in"),n.value=p,ue(()=>{const v=u.value.offsetWidth/2,k=u.value.offsetHeight/2,b=document.documentElement.clientWidth/2,T=document.documentElement.clientHeight/2;c.initPos.left=b-v+"px",c.initPos.top=T-k+"px",e.isFullscreen||(i=wl(f.value,(C,S)=>{c.initPos.left=C+"px",c.initPos.top=S+"px"}))}),setTimeout(()=>{a.value=a.value.filter(v=>v!=="zoom-in")},140)):(a.value.push("zoom-out"),i(),setTimeout(()=>{a.value=a.value.filter(v=>v!=="zoom-out"),n.value=p},130))});const h=J(()=>({display:n.value?"block":"none"})),y=J(()=>typeof e.style=="string"?[e.style,h.value].join("; "):e.style instanceof Object?{...h.value,...e.style}:h.value);return G(()=>{var p;const v=(p=o.value)==null?void 0:p.getRootNode();s.value=v instanceof Document?document.body:v}),()=>{const p=ne({ctx:l}),v=ne({props:e,ctx:l},"title");return s.value?d(Io,{to:s.value},{default:()=>[d("div",{ref:m,class:`${r}-modal-container`,"data-theme":t.value},[d("div",{class:e.class,style:y.value},[e.showMask&&d("div",{class:`${r}-modal-mask`,style:c.maskStyle,onClick:()=>{e.onClose?e.onClose():l.emit("onClose")}},null),d("div",{class:a.value,style:{...c.modalStyle,...c.initPos,...g.value},ref:u},[d("div",{class:`${r}-modal-header`,ref:f},[v||""]),d("div",{class:`${r}-modal-body`},[p]),d("div",{class:`${r}-modal-func`},[e.showAdjust&&d("div",{class:`${r}-modal-adjust`,onClick:k=>{k.stopPropagation(),e.isFullscreen?c.initPos=c.historyPos:(c.historyPos=c.initPos,c.initPos={left:"0",top:"0"}),e.onAdjust(!e.isFullscreen)}},[d(H,{name:e.isFullscreen?"suoxiao":"fangda"},null)]),d("div",{class:`${r}-modal-close`,onClick:k=>{k.stopPropagation(),e.onClose?e.onClose():l.emit("onClose")}},[d(H,{name:"close"},null)])])])])])]}):""}}});we.install=e=>(e.component(we.name,we),e);const Cn=`.${r}-preview > [data-line]`,Te=(e,l)=>+getComputedStyle(e).getPropertyValue(l).replace("px",""),$n=(e,l)=>{const t=st(()=>{e.removeEventListener("scroll",o),e.addEventListener("scroll",o),l.removeEventListener("scroll",o),l.addEventListener("scroll",o)},50),o=n=>{const a=e.clientHeight,u=l.clientHeight,f=e.scrollHeight,s=l.scrollHeight,m=(f-a)/(s-u);n.target===e?(l.removeEventListener("scroll",o),l.scrollTo({top:e.scrollTop/m}),t()):(e.removeEventListener("scroll",o),e.scrollTo({top:l.scrollTop*m}),t())};return[()=>{t().finally(()=>{e.dispatchEvent(new Event("scroll"))})},()=>{e.removeEventListener("scroll",o),l.removeEventListener("scroll",o)}]},Tn=(e,l,t)=>{const{view:o}=t,n=$o(),a=k=>o.lineBlockAt(o.state.doc.line(k+1).from).top,u=k=>o.lineBlockAt(o.state.doc.line(k+1).from).bottom;let f=[],s=[],m=[];const i=()=>{f=[],s=Array.from(l.querySelectorAll(Cn)),m=s.map(S=>Number(S.dataset.line));const k=[...m],{lines:b}=o.state.doc;let T=k.shift()||0,C=k.shift()||b;for(let S=0;S<b;S++)S===C&&(T=S,C=k.shift()||b),f.push({start:T,end:C-1})},c=(k,b)=>{let T=1;for(let C=s.length-1;C-1>=0;C--){const S=s[C],x=s[C-1];if(S.offsetTop+S.offsetHeight>b&&x.offsetTop<b){T=Number(x.dataset.line);break}}for(let C=f.length-1;C>=0;C--){const S=u(f[C].end),x=a(f[C].start);if(S>k&&x<=k){T=T<f[C].start?T:f[C].start;break}}return T};let g=0,h=0;const y=()=>{var k,b,T;if(h!==0)return!1;g++;const{scrollDOM:C,contentHeight:S}=o;let x=Te(l,"padding-top");const N=o.lineBlockAtHeight(C.scrollTop),{number:I}=o.state.doc.lineAt(N.from),_=f[I-1];if(!_)return!1;let M=1;const R=l.querySelector(`[data-line="${_.start}"]`)||((k=l.firstElementChild)==null?void 0:k.firstElementChild),O=l.querySelector(`[data-line="${_.end+1}"]`)||((b=l.lastElementChild)==null?void 0:b.lastElementChild),V=C.scrollHeight-C.clientHeight,q=l.scrollHeight-l.clientHeight;let K=a(_.start),te=u(_.end),ae=R.offsetTop,U=O.offsetTop-ae;K===0&&(ae=0,R===O?(x=0,te=S-C.offsetHeight,U=q):U=O.offsetTop),M=(C.scrollTop-K)/(te-K);const X=O==((T=l.lastElementChild)==null?void 0:T.lastElementChild)?O.offsetTop+O.clientHeight:O.offsetTop;if(te>=V||X>q){const le=c(V,q);K=a(le),M=(C.scrollTop-K)/(V-K);const Q=l.querySelector(`[data-line="${le}"]`);K>0&&Q&&(ae=Q.offsetTop),U=q-ae+Te(l,"padding-top")}const ie=ae-x+U*M;n(l,ie,()=>{g--})},p=()=>{var k,b,T,C,S,x;if(g!==0)return;h++;const{scrollDOM:N}=o,I=l.scrollTop,_=l.scrollHeight,M=N.scrollHeight-N.clientHeight,R=l.scrollHeight-l.clientHeight;let O=(k=l.firstElementChild)==null?void 0:k.firstElementChild,V=(b=l.firstElementChild)==null?void 0:b.lastElementChild;if(m.length>0){let Q=Math.ceil(m[m.length-1]*(I/_)),W=m.findLastIndex(Y=>Y<=Q);W=W===-1?0:W,Q=m[W];for(let Y=W;Y>=0&&Y<m.length;)if(s[Y].offsetTop>I){if(Y-1>=0){Y--;continue}Q=-1,W=Y;break}else{if(Y+1<m.length&&s[Y+1].offsetTop<I){Y++;continue}Q=m[Y],W=Y;break}switch(W){case-1:{O=(T=l.firstElementChild)==null?void 0:T.firstElementChild,V=s[W];break}case m.length-1:{O=s[W],V=(C=l.firstElementChild)==null?void 0:C.lastElementChild;break}default:O=s[W],V=s[W+1===s.length?W:W+1]}}let q=O===((S=l.firstElementChild)==null?void 0:S.firstElementChild)?0:O.offsetTop-Te(O,"margin-top"),K=V.offsetTop,te=0;const{start:ae,end:U}=f[Number(O.dataset.line||0)];let X=a(ae);const ie=a(U+1===o.state.doc.lines?U:U+1);let le=0;if(ie>M||V.offsetTop+V.offsetHeight>R){const Q=c(M,R),W=l.querySelector(`[data-line="${Q}"]`);q=W?W.offsetTop-Te(W,"margin-top"):q,X=a(Q),te=(I-q)/(R-q),le=M-X}else O===((x=l.firstElementChild)==null?void 0:x.firstElementChild)?(O===V&&(K=V.offsetTop+V.offsetHeight+ +getComputedStyle(V).marginBottom.replace("px","")),le=ie,te=Math.max(I/K,0)):(te=Math.max((I-q)/(K-q),0),le=ie-X);n(e,X+le*te,()=>{h--})},v=k=>{var b;const{scrollDOM:T,contentHeight:C}=o,S=T.clientHeight;if(C<=S||l.firstElementChild.clientHeight<=l.clientHeight||o.state.doc.lines<=((b=f[f.length-1])==null?void 0:b.end))return!1;k.target===e?y():p()};return[()=>{i(),e.addEventListener("scroll",v),l.addEventListener("scroll",v),e.dispatchEvent(new Event("scroll"))},()=>{e.removeEventListener("scroll",v),l.removeEventListener("scroll",v)}]},Sn={tocItem:{type:Object,default:()=>({})},mdHeadingId:{type:Function,default:()=>{}},onClick:{type:Function,default:()=>{}},scrollElementOffsetTop:{type:Number,default:0}},to=D({props:Sn,setup(e){const l=E("scrollElementRef"),t=E("roorNodeRef");return()=>{const{tocItem:o,mdHeadingId:n,onClick:a,scrollElementOffsetTop:u}=e;return d("div",{class:[`${r}-catalog-link`,o.active&&`${r}-catalog-active`],onClick:f=>{a(f,o),f.stopPropagation();const s=n(o.text,o.level,o.index),m=t.value.getElementById(s),i=l.value;if(m&&i){let c=m.offsetParent,g=m.offsetTop;if(i.contains(c))for(;c&&i!=c;)g+=c==null?void 0:c.offsetTop,c=c==null?void 0:c.offsetParent;const h=m.previousElementSibling;let y=0;h||(y=Te(m,"margin-top")),i==null||i.scrollTo({top:g-u-y,behavior:"smooth"})}}},[d("span",{title:o.text},[o.text]),d("div",{class:`${r}-catalog-wrapper`},[o.children&&o.children.map(f=>d(to,{mdHeadingId:n,key:`${o.text}-link-${f.level}-${f.text}`,tocItem:f,onClick:a,scrollElementOffsetTop:u},null))])])}}}),xn={editorId:{type:String,default:void 0},class:{type:String,default:""},mdHeadingId:{type:Function,default:e=>e},scrollElement:{type:[String,Object],default:void 0},theme:{type:String,default:"light"},offsetTop:{type:Number,default:20},scrollElementOffsetTop:{type:Number,default:0},onClick:{type:Function,default:void 0},onActive:{type:Function,default:void 0},isScrollElementInShadow:{type:Boolean,default:!1}},_e=D({name:"MdCatalog",props:xn,emits:["onClick","onActive"],setup(e,l){const t=e.editorId,o=`#${t}-preview-wrapper`,n=ee({list:[],show:!1,scrollElement:e.scrollElement||o}),a=ge(),u=F(),f=F(),s=F(),m=F();re("scrollElementRef",f),re("roorNodeRef",m);const i=J(()=>{const p=[];return n.list.forEach((v,k)=>{const{text:b,level:T}=v,C={level:T,text:b,index:k+1,active:a.value===v};if(p.length===0)p.push(C);else{let S=p[p.length-1];if(C.level>S.level)for(let x=S.level+1;x<=6;x++){const{children:N}=S;if(!N){S.children=[C];break}if(S=N[N.length-1],C.level<=S.level){N.push(C);break}}else p.push(C)}}),p}),c=()=>{var p;if(n.scrollElement instanceof HTMLElement)return n.scrollElement;let v=document;return(n.scrollElement===o||e.isScrollElementInShadow)&&(v=(p=u.value)==null?void 0:p.getRootNode()),v.querySelector(n.scrollElement)},g=p=>{if(p.length===0)return n.list=[],!1;const{activeHead:v}=p.reduce((k,b,T)=>{var C;const S=(C=m.value)==null?void 0:C.getElementById(e.mdHeadingId(b.text,b.level,T+1));if(S instanceof HTMLElement){const x=bn(S,f.value);if(x<e.offsetTop&&x>k.minTop)return{activeHead:b,minTop:x}}return k},{activeHead:p[0],minTop:Number.MIN_SAFE_INTEGER});a.value=v,n.list=p},h=()=>{g(n.list)},y=p=>{var v,k;const b=c();f.value=b,s.value=b===document.documentElement?document:b,(v=s.value)==null||v.removeEventListener("scroll",h),g(p),(k=s.value)==null||k.addEventListener("scroll",h)};return A(()=>a.value,p=>{const v=p?{...p}:void 0;e.onActive?e.onActive(v):l.emit("onActive",v)}),G(()=>{m.value=u.value.getRootNode(),$.on(t,{name:Ee,callback:y}),$.emit(t,Jl)}),Ce(()=>{var p;$.remove(t,Ee,y),(p=s.value)==null||p.removeEventListener("scroll",h)}),()=>d("div",{class:[`${r}-catalog`,e.theme==="dark"&&`${r}-catalog-dark`,e.class||""],ref:u},[i.value.map(p=>d(to,{mdHeadingId:e.mdHeadingId,tocItem:p,key:`link-${p.level}-${p.text}`,onClick:(v,k)=>{e.onClick?e.onClick(v,k):l.emit("onClick",v,k)},scrollElementOffsetTop:e.scrollElementOffsetTop},null))])}});_e.install=e=>(e.component(_e.name,_e),e);function En(e,l){for(var t=0;t<l.length;t++){const o=l[t];if(typeof o!="string"&&!Array.isArray(o)){for(const n in o)if(n!=="default"&&!(n in e)){const a=Object.getOwnPropertyDescriptor(o,n);a&&Object.defineProperty(e,n,a.get?a:{enumerable:!0,get:()=>o[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const _n=(e,l)=>{const t=E("editorId"),{noImgZoomIn:o}=e,n=st(()=>{const a=document.querySelectorAll(`#${t}-preview img:not(.not-zoom):not(.medium-zoom-image)`);a.length!==0&&qo(a,{background:"#00000073"})});G(()=>{!o&&e.setting.preview&&n()}),A([l,ce(e.setting,"preview")],()=>{!o&&e.setting.preview&&n()})},An=(e,l,t)=>{const o=E("editorId"),n=E("rootRef"),a=E("usedLanguageText"),u=()=>{n.value.querySelectorAll(`#${o} .${r}-preview .${r}-code`).forEach(m=>{let i=-1;const c=m.querySelector(`.${r}-copy-button`);c&&(c.onclick=g=>{g.preventDefault(),clearTimeout(i);const y=(m.querySelector("input:checked + pre code")||m.querySelector("pre code")).textContent,p=Xo(e.formatCopiedText(y)),{text:v,successTips:k,failTips:b}=a.value.copyCode,T=p?k:b;c.dataset.isIcon?c.dataset.tips=T:c.innerHTML=T,i=window.setTimeout(()=>{c.dataset.isIcon?c.dataset.tips=v:c.innerHTML=v},1500)})})},f=()=>{ue(u)},s=m=>{m&&ue(u)};A([l,t],f),A(()=>e.setting.preview,s),A(()=>e.setting.htmlPreview,s),A(()=>a.value,u),G(u)},In=e=>{const l=E("highlight"),t=ge(z.editorExtensions.highlight.instance);return G(()=>{e.noHighlight||t.value||(oe("link",{...l.value.css,rel:"stylesheet",id:`${r}-hlCss`}),oe("script",{...l.value.js,id:`${r}-hljs`,onload(){t.value=window.hljs}},"hljs"))}),A(()=>l.value.css,()=>{e.noHighlight||z.editorExtensions.highlight.instance||gn("link",{...l.value.css,rel:"stylesheet",id:`${r}-hlCss`})}),t},Ne=new Qo({max:1e3,ttl:6e5}),Ln=e=>{const l=E("theme"),t=E("rootRef"),{editorExtensions:o,editorExtensionsAttrs:n,mermaidConfig:a}=z,u=ge(o.mermaid.instance),f=ge(-1),s=()=>{const i=u.value;!e.noMermaid&&i&&(i.initialize(a({startOnLoad:!1,theme:l.value==="dark"?"dark":"default"})),f.value=f.value+1)};return A(()=>l.value,()=>{Ne.clear(),s()}),G(()=>{var i,c;if(e.noMermaid||u.value)return;const g=o.mermaid.js;/\.mjs/.test(g)?(oe("link",{...(i=n.mermaid)==null?void 0:i.js,rel:"modulepreload",href:g,id:`${r}-mermaid-m`}),import(g).then(h=>{u.value=h.default,s()})):oe("script",{...(c=n.mermaid)==null?void 0:c.js,src:g,id:`${r}-mermaid`,onload(){u.value=window.mermaid,s()}},"mermaid")}),{mermaidRef:u,reRenderRef:f,replaceMermaid:async()=>{if(!e.noMermaid&&u.value){const i=t.value.querySelectorAll(`div.${r}-mermaid`),c=document.createElement("div"),g=document.body.offsetWidth>1366?document.body.offsetWidth:1366,h=document.body.offsetHeight>768?document.body.offsetHeight:768;c.style.width=g+"px",c.style.height=h+"px",c.style.position="fixed",c.style.zIndex="-10000",c.style.top="-10000";let y=i.length;y>0&&document.body.appendChild(c),await Promise.allSettled(Array.from(i).map(p=>(async k=>{var b;let T=Ne.get(k.innerText);if(!T){const C=lt();let S={svg:""};try{S=await u.value.render(C,k.innerText,c),T=await e.sanitizeMermaid(S.svg);const x=document.createElement("p");x.className=`${r}-mermaid`,x.setAttribute("data-processed",""),x.innerHTML=T,(b=x.children[0])==null||b.removeAttribute("height"),Ne.set(k.innerText,x.innerHTML),k.dataset.line!==void 0&&(x.dataset.line=k.dataset.line),k.replaceWith(x)}catch{}--y===0&&c.remove()}})(p)))}}}},Hn=e=>{const l=ge(z.editorExtensions.katex.instance);return G(()=>{if(e.noKatex||l.value)return;const{editorExtensions:t}=z;oe("script",{src:t.katex.js,id:`${r}-katex`,onload(){l.value=window.katex}},"katex"),oe("link",{rel:"stylesheet",href:t.katex.css,id:`${r}-katexCss`})}),l},Fn=(e,l)=>{const t=e.renderer.rules.fence.bind(e.renderer.rules);e.renderer.rules.fence=(o,n,a,u,f)=>{const s=o[n],m=s.content.trim();if(s.info==="mermaid"){let i;o[n].map&&o[n].level===0&&(i=o[n].map[0],o[n].attrSet("data-line",String(i)));const c=Ne.get(m);return c?`<p class="${r}-mermaid" ${i!==void 0?"data-line="+i:""} data-processed>${c}</p>`:`<div class="${r}-mermaid" ${i!==void 0?"data-line="+i:""} data-mermaid-theme=${l.themeRef.value}>${m}</div>`}return t(o,n,a,u,f)}},Ve=(e,l)=>{const t=e.attrs?e.attrs.slice():[];return l.forEach(o=>{const n=e.attrIndex(o[0]);n<0?t.push(o):(t[n]=t[n].slice(),t[n][1]+=` ${o[1]}`)}),t},Rn=(e,l)=>{const t=[{open:"$",close:"$"},{open:"\\(",close:"\\)"}];let o,n,a;for(const u of t)if(e.src.startsWith(u.open,e.pos)){const f=e.pos+u.open.length;for(o=f;(o=e.src.indexOf(u.close,o))!==-1;){for(a=o-1;e.src[a]==="\\";)a-=1;if((o-a)%2==1)break;o+=u.close.length}return o===-1?(l||(e.pending+=u.open),e.pos=f,!0):o-f===0?(l||(e.pending+=u.open+u.close),e.pos=f+u.close.length,!0):(l||(n=e.push("math_inline","math",0),n.markup=u.open,n.content=e.src.slice(f,o)),e.pos=o+u.close.length,!0)}return!1},Mn=(e,l,t,o)=>{const n=[{open:"$$",close:"$$"},{open:"\\[",close:"\\]"}];let a,u,f,s,m=!1,i=e.bMarks[l]+e.tShift[l],c=e.eMarks[l];for(const g of n){if(i+g.open.length>c||e.src.slice(i,i+g.open.length)!==g.open)continue;if(i+=g.open.length,a=e.src.slice(i,c),o)return!0;for(a.trim().slice(-g.close.length)===g.close&&(a=a.trim().slice(0,-g.close.length),m=!0),f=l;!m&&(f++,!(f>=t||(i=e.bMarks[f]+e.tShift[f],c=e.eMarks[f],i<c&&e.tShift[f]<e.blkIndent)));)e.src.slice(i,c).trim().slice(-g.close.length)===g.close&&(s=e.src.slice(0,c).lastIndexOf(g.close),u=e.src.slice(i,s),m=!0);e.line=f+1;const h=e.push("math_block","math",0);return h.block=!0,h.content=(a&&a.trim()?a+`
`:"")+e.getLines(l+1,f,e.tShift[l],!0)+(u&&u.trim()?u:""),h.map=[l,e.line],h.markup=g.open,!0}return!1},Pn=(e,{katexRef:l})=>{const t=(n,a,u,f,s)=>{const m=n[a],i={attrs:Ve(m,[["class",`${r}-katex-inline`]])};if(l.value){const c=l.value.renderToString(m.content,z.katexConfig({throwOnError:!1}));return`<span ${s.renderAttrs(i)} data-processed>${c}</span>`}else return`<span ${s.renderAttrs(i)}>${m.content}</span>`},o=(n,a,u,f,s)=>{const m=n[a],i={attrs:Ve(m,[["class",`${r}-katex-block`]])};if(l.value){const c=l.value.renderToString(m.content,z.katexConfig({throwOnError:!1,displayMode:!0}));return`<p ${s.renderAttrs(i)} data-processed>${c}</p>`}else return`<p ${s.renderAttrs(i)}>${m.content}</p>`};e.inline.ruler.before("escape","math_inline",Rn),e.block.ruler.after("blockquote","math_block",Mn,{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.math_inline=t,e.renderer.rules.math_block=o},Nn=(e,l)=>{l=l||{};const t=3,o=l.marker||"!",n=o.charCodeAt(0),a=o.length;let u="",f="";const s=(i,c,g,h,y)=>{const p=i[c];return p.type==="admonition_open"?i[c].attrPush(["class",`${r}-admonition ${r}-admonition-${p.info}`]):p.type==="admonition_title_open"&&i[c].attrPush(["class",`${r}-admonition-title`]),y.renderToken(i,c,g)},m=i=>{const c=i.trim().split(" ",2);f="",u=c[0],c.length>1&&(f=i.substring(u.length+2))};e.block.ruler.before("code","admonition",(i,c,g,h)=>{let y,p,v,k=!1,b=i.bMarks[c]+i.tShift[c],T=i.eMarks[c];if(n!==i.src.charCodeAt(b))return!1;for(y=b+1;y<=T&&o[(y-b)%a]===i.src[y];y++);const C=Math.floor((y-b)/a);if(C!==t)return!1;y-=(y-b)%a;const S=i.src.slice(b,y),x=i.src.slice(y,T);if(m(x),h)return!0;for(p=c;p++,!(p>=g||(b=i.bMarks[p]+i.tShift[p],T=i.eMarks[p],b<T&&i.sCount[p]<i.blkIndent));)if(n===i.src.charCodeAt(b)&&!(i.sCount[p]-i.blkIndent>=4)){for(y=b+1;y<=T&&o[(y-b)%a]===i.src[y];y++);if(!(Math.floor((y-b)/a)<C)&&(y-=(y-b)%a,y=i.skipSpaces(y),!(y<T))){k=!0;break}}const N=i.parentType,I=i.lineMax;return i.parentType="root",i.lineMax=p,v=i.push("admonition_open","div",1),v.markup=S,v.block=!0,v.info=u,v.map=[c,p],f&&(v=i.push("admonition_title_open","p",1),v.markup=S+" "+u,v.map=[c,p],v=i.push("inline","",0),v.content=f,v.map=[c,i.line-1],v.children=[],v=i.push("admonition_title_close","p",-1),v.markup=S+" "+u),i.md.block.tokenize(i,c+1,p),v=i.push("admonition_close","div",-1),v.markup=i.src.slice(b,y),v.block=!0,i.parentType=N,i.lineMax=I,i.line=p+(k?1:0),!0},{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.admonition_open=s,e.renderer.rules.admonition_title_open=s,e.renderer.rules.admonition_title_close=s,e.renderer.rules.admonition_close=s},On=(e,l)=>{e.renderer.rules.heading_open=(t,o)=>{var n;const a=t[o],u=((n=t[o+1].children)==null?void 0:n.reduce((s,m)=>s+(["text","code_inline","math_inline"].includes(m.type)&&m.content||""),""))||"",f=a.markup.length;return l.headsRef.value.push({text:u,level:f}),a.map&&a.level===0&&a.attrSet("id",l.mdHeadingId(u,f,l.headsRef.value.length)),e.renderer.renderToken(t,o,l)},e.renderer.rules.heading_close=(t,o,n,a,u)=>u.renderToken(t,o,n)},Bn=(e,l)=>{if(typeof l[e]=="string")return l[e];const t=`<i class="${r}-iconfont ${r}-icon-${e}"></i>`;switch(z.iconfontType){case"svg":return`<svg class="${r}-icon" aria-hidden="true"><use xlink:href="#${r}-icon-${e}"></use></svg>`;default:return t}},Dn=Bn,jn=(e,l)=>{const t=e.renderer.rules.fence,o=e.utils.unescapeAll,n=/\[(\w*)(?::([\w ]*))?\]/,a=/::(open|close)/,u=c=>c.info?o(c.info).trim():"",f=c=>{const g=u(c),[h=null,y=""]=(n.exec(g)||[]).slice(1);return[h,y]},s=c=>{const g=u(c);return g?g.split(/(\s+)/g)[0]:""},m=c=>{const g=c.info.match(a)||[],h=g[1]==="open"||g[1]!=="close"&&l.codeFoldable&&c.content.trim().split(`
`).length<l.autoFoldThreshold,y=g[1]||l.codeFoldable?"details":"div",p=g[1]||l.codeFoldable?"summary":"div";return{open:h,tagContainer:y,tagHeader:p}},i=(c,g,h,y,p)=>{var v;if(c[g].hidden)return"";const k=(v=l.usedLanguageTextRef.value)==null?void 0:v.copyCode.text,b=l.customIconRef.value.copy||k,T=!!l.customIconRef.value.copy,C=`<span class="${r}-collapse-tips">${Dn("collapse-tips",l.customIconRef.value)}</span>`,[S]=f(c[g]);if(S===null){const{open:U,tagContainer:X,tagHeader:ie}=m(c[g]),le=[["class",`${r}-code`]];U&&le.push(["open",""]);const Q={attrs:Ve(c[g],le)};c[g].info=c[g].info.replace(a,"");const W=t(c,g,h,y,p);return`
        <${X} ${p.renderAttrs(Q)}>
          <${ie} class="${r}-code-head">
            <div class="${r}-code-flag"><span></span><span></span><span></span></div>
            <div class="${r}-code-action">
              <span class="${r}-code-lang">${c[g].info.trim()}</span>
              <span class="${r}-copy-button" data-tips="${k}"${T?" data-is-icon=true":""}>${b}</span>
              ${X==="details"?C:""}
            </div>
          </${ie}>
          ${W}
        </${X}>
      `}let x,N,I,_,M="",R="",O="";const{open:V,tagContainer:q,tagHeader:K}=m(c[g]),te=[["class",`${r}-code`]];V&&te.push(["open",""]);const ae={attrs:Ve(c[g],te)};for(let U=g;U<c.length&&(x=c[U],[N,I]=f(x),N===S);U++){x.info=x.info.replace(n,"").replace(a,""),x.hidden=!0;const X=`${r}-codetab-${l.editorId}-${g}-${U-g}`;_=U-g>0?"":"checked",M+=`
        <li>
          <input
            type="radio"
            id="label-${r}-codetab-label-1-${l.editorId}-${g}-${U-g}"
            name="${r}-codetab-label-${l.editorId}-${g}"
            class="${X}"
            ${_}
          >
          <label
            for="label-${r}-codetab-label-1-${l.editorId}-${g}-${U-g}"
            onclick="this.getRootNode().querySelectorAll('.${X}').forEach(e => e.click())"
          >
            ${I||s(x)}
          </label>
        </li>`,R+=`
        <div role="tabpanel">
          <input
            type="radio"
            name="${r}-codetab-pre-${l.editorId}-${g}"
            class="${X}"
            ${_}
            role="presentation">
          ${t(c,U,h,y,p)}
        </div>`,O+=`
        <input
          type="radio"
          name="${r}-codetab-lang-${l.editorId}-${g}"
          class="${X}"
          ${_}
          role="presentation">
        <span class=${r}-code-lang role="note">${s(x)}</span>`}return`
      <${q} ${p.renderAttrs(ae)}>
        <${K} class="${r}-code-head">
          <div class="${r}-code-flag">
            <ul class="${r}-codetab-label" role="tablist">${M}</ul>
          </div>
          <div class="${r}-code-action">
            <span class="${r}-codetab-lang">${O}</span>
            <span class="${r}-copy-button" data-tips="${k}"${T?" data-is-icon=true":""}>${b}</span>
            ${q==="details"?C:""}
          </div>
        </${K}>
        ${R}
      </${q}>
    `};e.renderer.rules.fence=i,e.renderer.rules.code_block=i};function Vn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var it={exports:{}},j={},rt={exports:{}},he={};function lo(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function Wn(e,l,t){}function Un(e,l,t){}var zn=/javascript\s*\:/img;function Gn(e,l){return zn.test(l)?"":l}he.whiteList=lo();he.getDefaultWhiteList=lo;he.onAttr=Wn;he.onIgnoreAttr=Un;he.safeAttrValue=Gn;var qn={indexOf:function(e,l){var t,o;if(Array.prototype.indexOf)return e.indexOf(l);for(t=0,o=e.length;t<o;t++)if(e[t]===l)return t;return-1},forEach:function(e,l,t){var o,n;if(Array.prototype.forEach)return e.forEach(l,t);for(o=0,n=e.length;o<n;o++)l.call(t,e[o],o,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},$e=qn;function Xn(e,l){e=$e.trimRight(e),e[e.length-1]!==";"&&(e+=";");var t=e.length,o=!1,n=0,a=0,u="";function f(){if(!o){var i=$e.trim(e.slice(n,a)),c=i.indexOf(":");if(c!==-1){var g=$e.trim(i.slice(0,c)),h=$e.trim(i.slice(c+1));if(g){var y=l(n,u.length,g,h,i);y&&(u+=y+"; ")}}}n=a+1}for(;a<t;a++){var s=e[a];if(s==="/"&&e[a+1]==="*"){var m=e.indexOf("*/",a+2);if(m===-1)break;a=m+1,n=a+1,o=!1}else s==="("?o=!0:s===")"?o=!1:s===";"?o||f():s===`
`&&f()}return $e.trim(u)}var Kn=Xn,Le=he,Yn=Kn;function Tl(e){return e==null}function Zn(e){var l={};for(var t in e)l[t]=e[t];return l}function oo(e){e=Zn(e||{}),e.whiteList=e.whiteList||Le.whiteList,e.onAttr=e.onAttr||Le.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Le.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Le.safeAttrValue,this.options=e}oo.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var l=this,t=l.options,o=t.whiteList,n=t.onAttr,a=t.onIgnoreAttr,u=t.safeAttrValue,f=Yn(e,function(s,m,i,c,g){var h=o[i],y=!1;if(h===!0?y=h:typeof h=="function"?y=h(c):h instanceof RegExp&&(y=h.test(c)),y!==!0&&(y=!1),c=u(i,c),!!c){var p={position:m,sourcePosition:s,source:g,isWhite:y};if(y){var v=n(i,c,p);return Tl(v)?i+":"+c:v}else{var v=a(i,c,p);if(!Tl(v))return v}}});return f};var Jn=oo;(function(e,l){var t=he,o=Jn;function n(u,f){var s=new o(f);return s.process(u)}l=e.exports=n,l.FilterCSS=o;for(var a in t)l[a]=t[a];typeof window<"u"&&(window.filterCSS=e.exports)})(rt,rt.exports);var dt=rt.exports,ft={indexOf:function(e,l){var t,o;if(Array.prototype.indexOf)return e.indexOf(l);for(t=0,o=e.length;t<o;t++)if(e[t]===l)return t;return-1},forEach:function(e,l,t){var o,n;if(Array.prototype.forEach)return e.forEach(l,t);for(o=0,n=e.length;o<n;o++)l.call(t,e[o],o,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var l=/\s|\n|\t/,t=l.exec(e);return t?t.index:-1}},Qn=dt.FilterCSS,ea=dt.getDefaultWhiteList,We=ft;function no(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var ao=new Qn;function ta(e,l,t){}function la(e,l,t){}function oa(e,l,t){}function na(e,l,t){}function io(e){return e.replace(ia,"&lt;").replace(ra,"&gt;")}function aa(e,l,t,o){if(t=mo(t),l==="href"||l==="src"){if(t=We.trim(t),t==="#")return"#";if(!(t.substr(0,7)==="http://"||t.substr(0,8)==="https://"||t.substr(0,7)==="mailto:"||t.substr(0,4)==="tel:"||t.substr(0,11)==="data:image/"||t.substr(0,6)==="ftp://"||t.substr(0,2)==="./"||t.substr(0,3)==="../"||t[0]==="#"||t[0]==="/"))return""}else if(l==="background"){if(He.lastIndex=0,He.test(t))return""}else if(l==="style"){if(Sl.lastIndex=0,Sl.test(t)||(xl.lastIndex=0,xl.test(t)&&(He.lastIndex=0,He.test(t))))return"";o!==!1&&(o=o||ao,t=o.process(t))}return t=go(t),t}var ia=/</g,ra=/>/g,sa=/"/g,ca=/&quot;/g,ua=/&#([a-zA-Z0-9]*);?/gim,da=/&colon;?/gim,fa=/&newline;?/gim,He=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Sl=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,xl=/u\s*r\s*l\s*\(.*/gi;function ro(e){return e.replace(sa,"&quot;")}function so(e){return e.replace(ca,'"')}function co(e){return e.replace(ua,function(t,o){return o[0]==="x"||o[0]==="X"?String.fromCharCode(parseInt(o.substr(1),16)):String.fromCharCode(parseInt(o,10))})}function uo(e){return e.replace(da,":").replace(fa," ")}function fo(e){for(var l="",t=0,o=e.length;t<o;t++)l+=e.charCodeAt(t)<32?" ":e.charAt(t);return We.trim(l)}function mo(e){return e=so(e),e=co(e),e=uo(e),e=fo(e),e}function go(e){return e=ro(e),e=io(e),e}function ma(){return""}function ga(e,l){typeof l!="function"&&(l=function(){});var t=!Array.isArray(e);function o(u){return t?!0:We.indexOf(e,u)!==-1}var n=[],a=!1;return{onIgnoreTag:function(u,f,s){if(o(u))if(s.isClosing){var m="[/removed]",i=s.position+m.length;return n.push([a!==!1?a:s.position,i]),a=!1,m}else return a||(a=s.position),"[removed]";else return l(u,f,s)},remove:function(u){var f="",s=0;return We.forEach(n,function(m){f+=u.slice(s,m[0]),s=m[1]}),f+=u.slice(s),f}}}function va(e){for(var l="",t=0;t<e.length;){var o=e.indexOf("<!--",t);if(o===-1){l+=e.slice(t);break}l+=e.slice(t,o);var n=e.indexOf("-->",o);if(n===-1)break;t=n+3}return l}function ha(e){var l=e.split("");return l=l.filter(function(t){var o=t.charCodeAt(0);return o===127?!1:o<=31?o===10||o===13:!0}),l.join("")}j.whiteList=no();j.getDefaultWhiteList=no;j.onTag=ta;j.onIgnoreTag=la;j.onTagAttr=oa;j.onIgnoreTagAttr=na;j.safeAttrValue=aa;j.escapeHtml=io;j.escapeQuote=ro;j.unescapeQuote=so;j.escapeHtmlEntities=co;j.escapeDangerHtml5Entities=uo;j.clearNonPrintableCharacter=fo;j.friendlyAttrValue=mo;j.escapeAttrValue=go;j.onIgnoreTagStripAll=ma;j.StripTagBody=ga;j.stripCommentTag=va;j.stripBlankChar=ha;j.attributeWrapSign='"';j.cssFilter=ao;j.getDefaultCSSWhiteList=ea;var qe={},me=ft;function pa(e){var l=me.spaceIndex(e),t;return l===-1?t=e.slice(1,-1):t=e.slice(1,l+1),t=me.trim(t).toLowerCase(),t.slice(0,1)==="/"&&(t=t.slice(1)),t.slice(-1)==="/"&&(t=t.slice(0,-1)),t}function ba(e){return e.slice(0,2)==="</"}function ya(e,l,t){var o="",n=0,a=!1,u=!1,f=0,s=e.length,m="",i="";e:for(f=0;f<s;f++){var c=e.charAt(f);if(a===!1){if(c==="<"){a=f;continue}}else if(u===!1){if(c==="<"){o+=t(e.slice(n,f)),a=f,n=f;continue}if(c===">"||f===s-1){o+=t(e.slice(n,a)),i=e.slice(a,f+1),m=pa(i),o+=l(a,o.length,m,i,ba(i)),n=f+1,a=!1;continue}if(c==='"'||c==="'")for(var g=1,h=e.charAt(f-g);h.trim()===""||h==="=";){if(h==="="){u=c;continue e}h=e.charAt(f-++g)}}else if(c===u){u=!1;continue}}return n<s&&(o+=t(e.substr(n))),o}var ka=/[^a-zA-Z0-9\\_:.-]/gim;function wa(e,l){var t=0,o=0,n=[],a=!1,u=e.length;function f(g,h){if(g=me.trim(g),g=g.replace(ka,"").toLowerCase(),!(g.length<1)){var y=l(g,h||"");y&&n.push(y)}}for(var s=0;s<u;s++){var m=e.charAt(s),i,c;if(a===!1&&m==="="){a=e.slice(t,s),t=s+1,o=e.charAt(t)==='"'||e.charAt(t)==="'"?t:$a(e,s+1);continue}if(a!==!1&&s===o){if(c=e.indexOf(m,s+1),c===-1)break;i=me.trim(e.slice(o+1,c)),f(a,i),a=!1,s=c,t=s+1;continue}if(/\s|\n|\t/.test(m))if(e=e.replace(/\s|\n|\t/g," "),a===!1)if(c=Ca(e,s),c===-1){i=me.trim(e.slice(t,s)),f(i),a=!1,t=s+1;continue}else{s=c-1;continue}else if(c=Ta(e,s-1),c===-1){i=me.trim(e.slice(t,s)),i=El(i),f(a,i),a=!1,t=s+1;continue}else continue}return t<e.length&&(a===!1?f(e.slice(t)):f(a,El(me.trim(e.slice(t))))),me.trim(n.join(" "))}function Ca(e,l){for(;l<e.length;l++){var t=e[l];if(t!==" ")return t==="="?l:-1}}function $a(e,l){for(;l<e.length;l++){var t=e[l];if(t!==" ")return t==="'"||t==='"'?l:-1}}function Ta(e,l){for(;l>0;l--){var t=e[l];if(t!==" ")return t==="="?l:-1}}function Sa(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function El(e){return Sa(e)?e.substr(1,e.length-2):e}qe.parseTag=ya;qe.parseAttr=wa;var xa=dt.FilterCSS,se=j,vo=qe,Ea=vo.parseTag,_a=vo.parseAttr,Oe=ft;function Fe(e){return e==null}function Aa(e){var l=Oe.spaceIndex(e);if(l===-1)return{html:"",closing:e[e.length-2]==="/"};e=Oe.trim(e.slice(l+1,-1));var t=e[e.length-1]==="/";return t&&(e=Oe.trim(e.slice(0,-1))),{html:e,closing:t}}function Ia(e){var l={};for(var t in e)l[t]=e[t];return l}function La(e){var l={};for(var t in e)Array.isArray(e[t])?l[t.toLowerCase()]=e[t].map(function(o){return o.toLowerCase()}):l[t.toLowerCase()]=e[t];return l}function ho(e){e=Ia(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=se.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=La(e.whiteList||e.allowList):e.whiteList=se.whiteList,this.attributeWrapSign=e.singleQuotedAttributeValue===!0?"'":se.attributeWrapSign,e.onTag=e.onTag||se.onTag,e.onTagAttr=e.onTagAttr||se.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||se.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||se.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||se.safeAttrValue,e.escapeHtml=e.escapeHtml||se.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new xa(e.css))}ho.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var l=this,t=l.options,o=t.whiteList,n=t.onTag,a=t.onIgnoreTag,u=t.onTagAttr,f=t.onIgnoreTagAttr,s=t.safeAttrValue,m=t.escapeHtml,i=l.attributeWrapSign,c=l.cssFilter;t.stripBlankChar&&(e=se.stripBlankChar(e)),t.allowCommentTag||(e=se.stripCommentTag(e));var g=!1;t.stripIgnoreTagBody&&(g=se.StripTagBody(t.stripIgnoreTagBody,a),a=g.onIgnoreTag);var h=Ea(e,function(y,p,v,k,b){var T={sourcePosition:y,position:p,isClosing:b,isWhite:Object.prototype.hasOwnProperty.call(o,v)},C=n(v,k,T);if(!Fe(C))return C;if(T.isWhite){if(T.isClosing)return"</"+v+">";var S=Aa(k),x=o[v],N=_a(S.html,function(I,_){var M=Oe.indexOf(x,I)!==-1,R=u(v,I,_,M);return Fe(R)?M?(_=s(v,I,_,c),_?I+"="+i+_+i:I):(R=f(v,I,_,M),Fe(R)?void 0:R):R});return k="<"+v,N&&(k+=" "+N),S.closing&&(k+=" /"),k+=">",k}else return C=a(v,k,T),Fe(C)?m(k):C},m);return g&&(h=g.remove(h)),h};var Ha=ho;(function(e,l){var t=j,o=qe,n=Ha;function a(f,s){var m=new n(s);return m.process(f)}l=e.exports=a,l.filterXSS=a,l.FilterXSS=n,function(){for(var f in t)l[f]=t[f];for(var s in o)l[s]=o[s]}(),typeof window<"u"&&(window.filterXSS=e.exports);function u(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}u()&&(self.filterXSS=e.exports)})(it,it.exports);var Ae=it.exports;const Fa=Vn(Ae),Ra=En({__proto__:null,default:Fa},[Ae]),_l={img:["class"],input:["class","disabled","type","checked"],iframe:["class","width","height","src","title","border","frameborder","framespacing","allow","allowfullscreen"]},Ma=(e,l)=>{const{extendedWhiteList:t={},xss:o={}}=l;let n;if(typeof o=="function")n=new Ae.FilterXSS(o(Ra));else{const a=Ae.getDefaultWhiteList();[...Object.keys(t),...Object.keys(_l)].forEach(f=>{const s=a[f]||[],m=_l[f]||[],i=t[f]||[];a[f]=[...new Set([...s,...m,...i])]}),n=new Ae.FilterXSS({whiteList:a,...o})}e.core.ruler.after("linkify","xss",a=>{for(let u=0;u<a.tokens.length;u++){const f=a.tokens[u];switch(f.type){case"html_block":{f.content=n.process(f.content);break}case"inline":{(f.children||[]).forEach(m=>{m.type==="html_inline"&&(m.content=n.process(m.content))});break}}}})},Al=(e,l,t)=>{const o=e.attrIndex(l),n=[l,t];o<0?e.attrPush(n):(e.attrs=e.attrs||[],e.attrs[o]=n)},Pa=e=>e.type==="inline",Na=e=>e.type==="paragraph_open",Oa=e=>e.type==="list_item_open",Ba=e=>e.content.indexOf("[ ] ")===0||e.content.indexOf("[x] ")===0||e.content.indexOf("[X] ")===0,Da=(e,l)=>Pa(e[l])&&Na(e[l-1])&&Oa(e[l-2])&&Ba(e[l]),ja=(e,l)=>{const t=e[l].level-1;for(let o=l-1;o>=0;o--)if(e[o].level===t)return o;return-1},Va=e=>{const l=new e("html_inline","",0);return l.content="<label>",l},Wa=e=>{const l=new e("html_inline","",0);return l.content="</label>",l},Ua=(e,l,t)=>{const o=new t("html_inline","",0);return o.content='<label class="task-list-item-label" for="'+l+'">'+e+"</label>",o.attrs=[{for:l}],o},za=(e,l,t)=>{const o=new l("html_inline","",0),n=t.enabled?" ":' disabled="" ';return e.content.indexOf("[ ] ")===0?o.content='<input class="task-list-item-checkbox"'+n+'type="checkbox">':(e.content.indexOf("[x] ")===0||e.content.indexOf("[X] ")===0)&&(o.content='<input class="task-list-item-checkbox" checked=""'+n+'type="checkbox">'),o},Ga=(e,l,t)=>{if(e.children=e.children||[],e.children.unshift(za(e,l,t)),e.children[1].content=e.children[1].content.slice(3),e.content=e.content.slice(3),t.label)if(t.labelAfter){e.children.pop();const o="task-item-"+Math.ceil(Math.random()*(1e4*1e3)-1e3);e.children[0].content=e.children[0].content.slice(0,-1)+' id="'+o+'">',e.children.push(Ua(e.content,o,l))}else e.children.unshift(Va(l)),e.children.push(Wa(l))},qa=(e,l={})=>{e.core.ruler.after("inline","github-task-lists",t=>{const o=t.tokens;for(let n=2;n<o.length;n++)Da(o,n)&&(Ga(o[n],t.Token,l),Al(o[n-2],"class","task-list-item"+(l.enabled?" enabled":" ")),Al(o[ja(o,n-2)],"class","contains-task-list"))})},Xa=e=>{e.core.ruler.push("init-line-number",l=>(l.tokens.forEach(t=>{t.map&&(t.attrs||(t.attrs=[]),t.attrs.push(["data-line",t.map[0].toString()]))}),!0))},Ka=(e,l)=>{const{editorConfig:t,markdownItPlugins:o}=z,n=E("editorId"),a=E("language"),u=E("usedLanguageText"),f=E("showCodeRowNumber"),s=E("theme"),m=E("customIcon"),i=E("rootRef"),c=F([]),g=In(e),h=Hn(e),{reRenderRef:y,replaceMermaid:p}=Ln(e),v=Ko({html:!0,breaks:!0,linkify:!0}),k=[{type:"image",plugin:Yo,options:{figcaption:!0,classes:"md-zoom"}},{type:"admonition",plugin:Nn,options:{}},{type:"taskList",plugin:qa,options:{}},{type:"heading",plugin:On,options:{mdHeadingId:e.mdHeadingId,headsRef:c}},{type:"code",plugin:jn,options:{editorId:n,usedLanguageTextRef:u,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,customIconRef:m}},{type:"xss",plugin:Ma,options:{}},{type:"sub",plugin:Zo,options:{}},{type:"sup",plugin:Jo,options:{}}];e.noKatex||k.push({type:"katex",plugin:Pn,options:{katexRef:h}}),e.noMermaid||k.push({type:"mermaid",plugin:Fn,options:{themeRef:s}}),o(k,{editorId:n}).forEach(I=>{v.use(I.plugin,I.options)});const b=v.options.highlight;v.set({highlight:(I,_,M)=>{if(b){const V=b(I,_,M);if(V)return V}let R;!e.noHighlight&&g.value?g.value.getLanguage(_)?R=g.value.highlight(I,{language:_,ignoreIllegals:!0}).value:R=g.value.highlightAuto(I).value:R=v.utils.escapeHtml(I);const O=f?pn(R.replace(/^\n+|\n+$/g,""),I.replace(/^\n+|\n+$/g,"")):`<span class="${r}-code-block">${R.replace(/^\n+|\n+$/g,"")}</span>`;return`<pre><code class="language-${_}" language=${_}>${O}</code></pre>`}}),Xa(v);const T=F(`_article-key_${lt()}`),C=F(e.sanitize(v.render(e.modelValue))),S=()=>{$.emit(n,Pe,C.value),e.onHtmlChanged(C.value),e.onGetCatalog(c.value),$.emit(n,Ee,c.value),ue(()=>{p().then(()=>{Cl(i.value.querySelectorAll(`#${n} .${r}-mermaid`))})})};G(S);const x=()=>{c.value=[],C.value=e.sanitize(v.render(e.modelValue)),S()},N=J(()=>(e.noKatex||h.value)&&(e.noHighlight||g.value));return A([ce(e,"modelValue"),N,y,a],st(x,l?0:t.renderDelay)),A(()=>e.setting.preview,()=>{e.setting.preview&&ue(()=>{p().then(()=>{Cl(i.value.querySelectorAll(`#${n} .${r}-mermaid`))}),$.emit(n,Ee,c.value)})}),G(()=>{$.on(n,{name:Jl,callback(){$.emit(n,Ee,c.value)}}),$.on(n,{name:ut,callback:()=>{T.value=`_article-key_${lt()}`,x()}})}),{html:C,key:T}},Il={checked:{regexp:/- \[x\]/,value:"- [ ]"},unChecked:{regexp:/- \[\s\]/,value:"- [x]"}},Ya=(e,l)=>{const t=E("editorId"),o=E("rootRef");let n=()=>{};const a=()=>{if(!o.value)return!1;const u=o.value.querySelectorAll(".task-list-item.enabled"),f=s=>{var m;s.preventDefault();const i=s.target.checked?"unChecked":"checked",c=(m=s.target.parentElement)==null?void 0:m.dataset.line;if(!c)return;const g=Number(c),h=e.modelValue.split(`
`),y=h[Number(g)].replace(Il[i].regexp,Il[i].value);e.previewOnly?(h[Number(g)]=y,e.onChange(h.join(`
`))):$.emit(t,eo,g+1,y)};u.forEach(s=>{s.addEventListener("click",f)}),n=()=>{u.forEach(s=>{s.removeEventListener("click",f)})}};Ce(()=>{n()}),A([l],()=>{n(),ue(a)},{immediate:!0})},po={modelValue:{type:String,default:""},onChange:{type:Function,default:()=>{}},setting:{type:Object,default:()=>({preview:!0})},onHtmlChanged:{type:Function,default:()=>{}},onGetCatalog:{type:Function,default:()=>{}},mdHeadingId:{type:Function,default:()=>""},noMermaid:{type:Boolean,default:!1},sanitize:{type:Function,default:e=>e},noKatex:{type:Boolean,default:!1},formatCopiedText:{type:Function,default:e=>e},noHighlight:{type:Boolean,default:!1},previewOnly:{type:Boolean,default:!1},noImgZoomIn:{type:Boolean},sanitizeMermaid:{type:Function},codeFoldable:{type:Boolean},autoFoldThreshold:{type:Number}},Za={...po,updateModelValue:{type:Function,default:()=>{}},placeholder:{type:String,default:""},scrollAuto:{type:Boolean},autofocus:{type:Boolean},disabled:{type:Boolean},readonly:{type:Boolean},maxlength:{type:Number},autoDetectCode:{type:Boolean},onBlur:{type:Function,default:()=>{}},onFocus:{type:Function,default:()=>{}},noPrettier:{type:Boolean},completions:{type:Array},catalogVisible:{type:Boolean},theme:{type:String,default:"light"},onInput:{type:Function},onDrop:{type:Function,default:()=>{}},inputBoxWitdh:{type:String},onInputBoxWitdhChange:{type:Function},transformImgUrl:{type:Function,default:e=>e}},bo=D({name:"ContentPreview",props:po,setup(e){const l=E("editorId"),t=E("previewTheme"),o=E("showCodeRowNumber"),{html:n,key:a}=Ka(e,e.previewOnly);return An(e,n,a),_n(e,n),Ya(e,n),()=>d(Ue,null,[e.setting.preview&&d("div",{id:`${l}-preview-wrapper`,class:`${r}-preview-wrapper`,key:"content-preview-wrapper"},[d("div",{key:a.value,id:`${l}-preview`,class:[`${r}-preview`,`${t==null?void 0:t.value}-theme`,o&&`${r}-scrn`],innerHTML:n.value},null)]),!e.previewOnly&&e.setting.htmlPreview&&d("div",{id:`${l}-html-wrapper`,class:`${r}-preview-wrapper`,key:"html-preview-wrapper"},[d("div",{class:`${r}-html`},[n.value])])])}}),Ja=(e,l)=>{const{editorId:t}=e,o=ee({buildFinished:!1,html:""});A(()=>e.modelValue,()=>{o.buildFinished=!1}),G(()=>{$.on(t,{name:Pe,callback(n){o.buildFinished=!0,o.html=n}}),$.on(t,{name:ze,callback(){const n=new Promise(a=>{if(o.buildFinished)a(o.html);else{const u=f=>{a(f),$.remove(t,Pe,u)};$.on(t,{name:Pe,callback:u})}});e.onSave?e.onSave(e.modelValue,n):l.emit("onSave",e.modelValue,n)}})})},yo=(e,l)=>{const{editorId:t}=e,o=z.editorExtensions.highlight,n=z.editorExtensionsAttrs.highlight;re("editorId",t),re("rootRef",l),re("theme",J(()=>e.theme)),re("language",J(()=>e.language)),re("highlight",J(()=>{const{js:u}=o,f={...nt,...o.css},{js:s,css:m={}}=n||{},i=e.codeStyleReverse&&e.codeStyleReverseList.includes(e.previewTheme)?"dark":e.theme,c=f[e.codeTheme]?f[e.codeTheme][i]:nt.atom[i],g=f[e.codeTheme]&&m[e.codeTheme]?m[e.codeTheme][i]:m.atom?m.atom[i]:{};return{js:{src:u,...s},css:{href:c,...g}}})),re("showCodeRowNumber",e.showCodeRowNumber);const a=J(()=>{const u={...gl,...z.editorConfig.languageUserDefined};return To(So(gl["en-US"]),u[e.language]||{})});re("usedLanguageText",a),re("previewTheme",J(()=>e.previewTheme)),re("customIcon",J(()=>e.customIcon))},Qa=(e,l)=>{yo(e,l),re("tabWidth",e.tabWidth)},ko=e=>{G(()=>{const{editorExtensions:l,editorExtensionsAttrs:t}=z;e.noIconfont||oe("script",{...t.iconfont,src:l.iconfont,id:`${r}-icon`})})},ei=e=>{const{noPrettier:l,noUploadImg:t}=e,{editorExtensions:o,editorExtensionsAttrs:n}=z,a=l||o.prettier.prettierInstance,u=l||o.prettier.parserMarkdownInstance,f=t||o.cropper.instance;G(()=>{if(!f){const{js:s={},css:m={}}=n.cropper||{};oe("link",{...m,rel:"stylesheet",href:o.cropper.css,id:`${r}-cropperCss`}),oe("script",{...s,src:o.cropper.js,id:`${r}-cropper`})}if(!a){const{standaloneJs:s={}}=n.prettier||{};oe("script",{...s,src:o.prettier.standaloneJs,id:`${r}-prettier`})}if(!u){const{parserMarkdownJs:s={}}=n.prettier||{};oe("script",{...s,src:o.prettier.parserMarkdownJs,id:`${r}-prettierMD`})}}),ko(e)},ti=(e,l)=>{const{editorId:t}=e;G(()=>{$.on(t,{name:ve,callback:o=>{e.onError instanceof Function?e.onError(o):l.emit("onError",o)}})})},li=(e,l)=>{const{editorId:t}=e,o=ee({pageFullscreen:e.pageFullscreen,fullscreen:!1,preview:e.preview,htmlPreview:e.preview?!1:e.htmlPreview,previewOnly:!1}),n=ee({...o}),a=(s,m)=>{const i=m===void 0?!o[s]:m;switch(s){case"preview":{o.htmlPreview=!1,o.previewOnly=!1;break}case"htmlPreview":{o.preview=!1,o.previewOnly=!1;break}case"previewOnly":{i?!o.preview&&!o.htmlPreview&&(o.preview=!0):(n.preview||(o.preview=!1),n.htmlPreview||(o.htmlPreview=!1));break}}n[s]=i,o[s]=i};let u="";const f=()=>{o.pageFullscreen||o.fullscreen?document.body.style.overflow="hidden":document.body.style.overflow=u};return A(()=>[o.pageFullscreen,o.fullscreen],f),G(()=>{$.on(t,{name:Ge,callback(s,m){const i=c=>{$.emit(t,P,"image",{desc:"",urls:c}),m&&m()};e.onUploadImg?e.onUploadImg(s,i):l.emit("onUploadImg",s,i)}}),u=document.body.style.overflow,f()}),[o,a]},oi=e=>{const{editorId:l}=e,t=F(!1);return G(()=>{$.on(l,{name:ct,callback:n=>{n===void 0?t.value=!t.value:t.value=n}})}),J(()=>!e.toolbarsExclude.includes("catalog")&&e.toolbars.includes("catalog")&&t.value)},ni=(e,l,t,o,n,a)=>{const{editorId:u}=e;A(()=>o.pageFullscreen,s=>{$.emit(u,vl,s)}),A(()=>o.fullscreen,s=>{$.emit(u,hl,s)}),A(()=>o.preview,s=>{$.emit(u,pl,s)}),A(()=>o.previewOnly,s=>{$.emit(u,bl,s)}),A(()=>o.htmlPreview,s=>{$.emit(u,yl,s)}),A(t,s=>{$.emit(u,kl,s)});const f={on(s,m){switch(s){case"pageFullscreen":{$.on(u,{name:vl,callback(i){m(i)}});break}case"fullscreen":{$.on(u,{name:hl,callback(i){m(i)}});break}case"preview":{$.on(u,{name:pl,callback(i){m(i)}});break}case"previewOnly":{$.on(u,{name:bl,callback(i){m(i)}});break}case"htmlPreview":{$.on(u,{name:yl,callback(i){m(i)}});break}case"catalog":{$.on(u,{name:kl,callback(i){m(i)}});break}}},togglePageFullscreen(s){n("pageFullscreen",s)},toggleFullscreen(s){$.emit(u,Kl,s)},togglePreview(s){n("preview",s)},togglePreviewOnly(s){n("previewOnly",s)},toggleHtmlPreview(s){n("htmlPreview",s)},toggleCatalog(s){$.emit(u,ct,s)},triggerSave(){$.emit(u,ze)},insert(s){$.emit(u,P,"universal",{generate:s})},focus(s){var m;(m=a.value)==null||m.focus(s)},rerender(){$.emit(u,ut)},getSelectedText(){var s;return(s=a.value)==null?void 0:s.getSelectedText()},resetHistory(){var s;(s=a.value)==null||s.resetHistory()},domEventHandlers(s){$.emit(u,Ql,s)},execCommand(s){$.emit(u,P,s)},getEditorView(){var s;return(s=a.value)==null?void 0:s.getEditorView()}};l.expose(f)},ai=e=>e,wo={modelValue:{type:String,default:""},onChange:{type:Function,default:void 0},theme:{type:String,default:"light"},class:{type:String,default:""},language:{type:String,default:"zh-CN"},onHtmlChanged:{type:Function,default:void 0},onGetCatalog:{type:Function,default:void 0},editorId:{type:String,default:()=>yn("md-editor-v3_")},showCodeRowNumber:{type:Boolean,default:!0},previewTheme:{type:String,default:"default"},style:{type:Object,default:()=>({})},mdHeadingId:{type:Function,default:ai},sanitize:{type:Function,default:e=>e},noMermaid:{type:Boolean,default:!1},noKatex:{type:Boolean,default:!1},codeTheme:{type:String,default:"atom"},noIconfont:{type:Boolean,default:void 0},formatCopiedText:{type:Function,default:e=>e},codeStyleReverse:{type:Boolean,default:!0},codeStyleReverseList:{type:Array,default:["default","mk-cute"]},noHighlight:{type:Boolean,default:!1},noImgZoomIn:{type:Boolean,default:!1},customIcon:{type:Object,default:{}},sanitizeMermaid:{type:Function,default:e=>Promise.resolve(e)},codeFoldable:{type:Boolean,default:!0},autoFoldThreshold:{type:Number,default:30}},ii={...wo,onSave:{type:Function,default:void 0},onUploadImg:{type:Function,default:void 0},pageFullscreen:{type:Boolean,default:!1},preview:{type:Boolean,default:!0},htmlPreview:{type:Boolean,default:!1},toolbars:{type:Array,default:ql},toolbarsExclude:{type:Array,default:[]},noPrettier:{type:Boolean,default:!1},tabWidth:{type:Number,default:2},tableShape:{type:Array,default:[6,4]},placeholder:{type:String,default:""},defToolbars:{type:[String,Object],default:void 0},onError:{type:Function,default:void 0},footers:{type:Array,default:Xl},scrollAuto:{type:Boolean,default:!0},defFooters:{type:[String,Object],default:void 0},noUploadImg:{type:Boolean,default:!1},autoFocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1},maxLength:{type:Number,default:void 0},autoDetectCode:{type:Boolean,default:!1},onBlur:{type:Function,default:void 0},onFocus:{type:Function,default:void 0},completions:{type:Array,default:void 0},showToolbarName:{type:Boolean,default:!1},onInput:{type:Function,default:void 0},onDrop:{type:Function,default:void 0},inputBoxWitdh:{type:String,default:"50%"},onInputBoxWitdhChange:{type:Function,default:void 0},transformImgUrl:{type:Function,default:e=>e}},Co=["onHtmlChanged","onGetCatalog","onChange","update:modelValue"],ri=[...Co,"onSave","onUploadImg","onError","onBlur","onFocus","onInput","onDrop","onInputBoxWitdhChange"],si=(e,l)=>{const{editorId:t}=e,o={rerender(){$.emit(t,ut)}};l.expose(o)},Be=D({name:"MdPreview",props:wo,emits:Co,setup(e,l){const{editorId:t,noKatex:o,noMermaid:n,noHighlight:a}=e,u=F();return yo(e,u),ko(e),si(e,l),Ce(()=>{$.clear(t)}),()=>d("div",{id:t,class:[r,e.class,e.theme==="dark"&&`${r}-dark`,`${r}-previewOnly`],style:e.style,ref:u},[d(bo,{modelValue:e.modelValue,onChange:f=>{e.onChange&&e.onChange(f),l.emit("onChange",f),l.emit("update:modelValue",f)},onHtmlChanged:f=>{e.onHtmlChanged?e.onHtmlChanged(f):l.emit("onHtmlChanged",f)},onGetCatalog:f=>{e.onGetCatalog?e.onGetCatalog(f):l.emit("onGetCatalog",f)},mdHeadingId:e.mdHeadingId,noMermaid:n,sanitize:e.sanitize,noKatex:o,formatCopiedText:e.formatCopiedText,noHighlight:a,noImgZoomIn:e.noImgZoomIn,previewOnly:!0,sanitizeMermaid:e.sanitizeMermaid,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold},null)])}});Be.install=e=>(e.component(Be.name,Be),e);const ci={title:{type:String,default:""},trigger:{type:[String,Object],default:void 0},onClick:{type:Function,default:void 0},insert:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},previewTheme:{type:String,default:void 0},codeTheme:{type:String,default:void 0}},De=D({name:"NormalToolbar",props:ci,emits:["onClick"],setup(e,l){return()=>{const t=ne({props:e,ctx:l},"trigger");return d("div",{class:`${r}-toolbar-item`,title:e.title,onClick:o=>{e.onClick instanceof Function?e.onClick(o):l.emit("onClick",o)}},[t])}}});De.install=e=>(e.component(De.name,De),e);function ui(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Lo(e)}const di={title:{type:String,default:""},modalTitle:{type:String,default:""},visible:{type:Boolean,default:void 0},width:{type:String,default:"auto"},height:{type:String,default:"auto"},trigger:{type:[String,Object],default:void 0},onClick:{type:Function,default:void 0},onClose:{type:Function,default:void 0},showAdjust:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},onAdjust:{type:Function,default:void 0},class:{type:String,default:void 0},style:{type:[Object,String],default:void 0},showMask:{type:Boolean,default:!0},insert:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},previewTheme:{type:String,default:void 0},codeTheme:{type:String,default:void 0}},je=D({name:"ModalToolbar",props:di,emits:["onClick","onClose","onAdjust"],setup(e,l){return()=>{const t=ne({props:e,ctx:l},"trigger"),o=ne({props:e,ctx:l},"default");return d(Ue,null,[d("div",{class:`${r}-toolbar-item`,title:e.title,onClick:()=>{e.onClick instanceof Function?e.onClick():l.emit("onClick")}},[t]),d(we,{style:e.style,class:e.class,width:e.width,height:e.height,title:e.modalTitle,visible:e.visible,showMask:e.showMask,onClose:()=>{e.onClose instanceof Function?e.onClose():l.emit("onClose")},showAdjust:e.showAdjust,isFullscreen:e.isFullscreen,onAdjust:n=>{e.onAdjust instanceof Function?e.onAdjust(n):l.emit("onAdjust",n)}},ui(o)?o:{default:()=>[o]})])}}});je.install=e=>(e.component(je.name,je),e);var fi=Object.defineProperty,mi=(e,l,t)=>l in e?fi(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,fe=(e,l,t)=>mi(e,typeof l!="symbol"?l+"":l,t);const gi=D({setup(){return()=>d("div",{class:`${r}-divider`},null)}}),vi={noPrettier:{type:Boolean},toolbars:{type:Array,default:()=>[]},toolbarsExclude:{type:Array,default:()=>[]},setting:{type:Object,default:()=>({})},screenfull:{type:Object,default:null},screenfullJs:{type:String,default:""},updateSetting:{type:Function,default:()=>{}},tableShape:{type:Array,default:()=>[6,4]},defToolbars:{type:Object},noUploadImg:{type:Boolean},showToolbarName:{type:Boolean},catalogVisible:{type:Boolean},codeTheme:{type:String}},hi=e=>{const l=E("editorId"),{editorExtensions:t,editorExtensionsAttrs:o}=z;let n=t.screenfull.instance;const a=F(!1),u=m=>{if(!n){$.emit(l,ve,{name:"fullscreen",message:"fullscreen is undefined"});return}n.isEnabled?(a.value=!0,(m===void 0?!n.isFullscreen:m)?n.request():n.exit()):console.error("browser does not support screenfull!")},f=()=>{n&&n.isEnabled&&n.on("change",()=>{(a.value||e.setting.fullscreen)&&(a.value=!1,e.updateSetting("fullscreen"))})},s=()=>{n=window.screenfull,f()};return G(()=>{var m;f(),n||oe("script",{...(m=o.screenfull)==null?void 0:m.js,src:t.screenfull.js,id:`${r}-screenfull`,onload:s},"screenfull")}),G(()=>{$.on(l,{name:Kl,callback:u})}),{fullscreenHandler:u}},pi={tableShape:{type:Array,default:()=>[6,4]},onSelected:{type:Function,default:()=>{}}},bi=D({name:"TableShape",props:pi,setup(e){const l=ee({x:-1,y:-1}),t=J(()=>JSON.stringify(e.tableShape)),o=()=>{const a=[...JSON.parse(t.value)];return(!a[2]||a[2]<a[0])&&(a[2]=a[0]),(!a[3]||a[3]<a[3])&&(a[3]=a[1]),a},n=F(o());return A([t],()=>{n.value=o()}),()=>d("div",{class:`${r}-table-shape`,onMouseleave:()=>{n.value=o(),l.x=-1,l.y=-1}},[new Array(n.value[1]).fill("").map((a,u)=>d("div",{class:`${r}-table-shape-row`,key:`table-shape-row-${u}`},[new Array(n.value[0]).fill("").map((f,s)=>d("div",{class:`${r}-table-shape-col`,key:`table-shape-col-${s}`,onMouseenter:()=>{l.x=u,l.y=s,s+1===n.value[0]&&s+1<n.value[2]?n.value[0]++:s+2<n.value[0]&&n.value[0]>e.tableShape[0]&&n.value[0]--,u+1===n.value[1]&&u+1<n.value[3]?n.value[1]++:u+2<n.value[1]&&n.value[1]>e.tableShape[1]&&n.value[1]--},onClick:()=>{e.onSelected(l)}},[d("div",{class:[`${r}-table-shape-col-default`,u<=l.x&&s<=l.y&&`${r}-table-shape-col-include`]},null)]))]))])}}),yi={type:{type:String,default:"link"},visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},ki=D({props:yi,setup(e){const l=E("usedLanguageText"),t=E("editorId"),o=J(()=>{var a,u;switch(e.type){case"link":return(a=l.value.linkModalTips)==null?void 0:a.linkTitle;case"image":return(u=l.value.linkModalTips)==null?void 0:u.imageTitle;default:return""}}),n=ee({desc:"",url:""});return A(()=>e.visible,a=>{a||setTimeout(()=>{n.desc="",n.url=""},200)}),()=>d(we,{title:o.value,visible:e.visible,onClose:e.onCancel},{default:()=>{var a,u,f,s,m;return[d("div",{class:`${r}-form-item`},[d("label",{class:`${r}-label`,for:`link-desc-${t}`},[(a=l.value.linkModalTips)==null?void 0:a.descLabel]),d("input",{placeholder:(u=l.value.linkModalTips)==null?void 0:u.descLabelPlaceHolder,class:`${r}-input`,id:`link-desc-${t}`,type:"text",value:n.desc,onChange:i=>{n.desc=i.target.value},autocomplete:"off"},null)]),d("div",{class:`${r}-form-item`},[d("label",{class:`${r}-label`,for:`link-url-${t}`},[(f=l.value.linkModalTips)==null?void 0:f.urlLabel]),d("input",{placeholder:(s=l.value.linkModalTips)==null?void 0:s.urlLabelPlaceHolder,class:`${r}-input`,id:`link-url-${t}`,type:"text",value:n.url,onChange:i=>{n.url=i.target.value},autocomplete:"off"},null)]),d("div",{class:`${r}-form-item`},[d("button",{class:[`${r}-btn`,`${r}-btn-row`],type:"button",onClick:()=>{e.onOk(n),n.desc="",n.url=""}},[(m=l.value.linkModalTips)==null?void 0:m.buttonOK])])]}})}}),wi={visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},Ci=D({props:wi,setup(e){const l=E("usedLanguageText"),t=E("editorId"),o=E("rootRef");let n=z.editorExtensions.cropper.instance;const a=F(),u=F(),f=F(),s=ee({cropperInited:!1,imgSelected:!1,imgSrc:"",isFullscreen:!1});let m=null;A(()=>e.visible,()=>{e.visible&&!s.cropperInited&&(n=n||window.Cropper,a.value.onchange=()=>{if(!n){$.emit(t,ve,{name:"Cropper",message:"Cropper is undefined"});return}const c=a.value.files||[];if(s.imgSelected=!0,(c==null?void 0:c.length)>0){const g=new FileReader;g.onload=h=>{s.imgSrc=h.target.result},g.readAsDataURL(c[0])}})}),A(()=>[s.imgSelected],()=>{f.value.style=""}),A([ce(()=>s.isFullscreen),ce(()=>s.imgSrc)],()=>{s.imgSrc&&ue(()=>{m==null||m.destroy(),f.value.style="",u.value&&(m=new n(u.value,{viewMode:2,preview:o.value.getRootNode().querySelector(`.${r}-clip-preview-target`)}))})});const i=()=>{m.clear(),m.destroy(),m=null,a.value.value="",s.imgSelected=!1};return()=>{var c;return d(we,{class:`${r}-modal-clip`,title:(c=l.value.clipModalTips)==null?void 0:c.title,visible:e.visible,onClose:e.onCancel,showAdjust:!0,isFullscreen:s.isFullscreen,onAdjust:g=>{s.isFullscreen=g},width:"668px",height:"421px"},{default:()=>{var g,h,y;return[d("div",{class:`${r}-form-item ${r}-clip`},[d("div",{class:`${r}-clip-main`},[s.imgSelected?d("div",{class:`${r}-clip-cropper`},[d("img",{src:s.imgSrc,ref:u,style:{display:"none"},alt:""},null),d("div",{class:`${r}-clip-delete`,onClick:i},[d(H,{name:"delete"},null)])]):d("div",{class:`${r}-clip-upload`,onClick:()=>{a.value.click()},role:"button",tabindex:"0","aria-label":(g=l.value.imgTitleItem)==null?void 0:g.upload},[d(H,{name:"upload"},null)])]),d("div",{class:`${r}-clip-preview`},[d("div",{class:`${r}-clip-preview-target`,ref:f},null)])]),d("div",{class:`${r}-form-item`},[d("button",{class:`${r}-btn`,type:"button",onClick:()=>{if(m){const p=m.getCroppedCanvas();$.emit(t,Ge,[hn(p.toDataURL("image/png"))],e.onOk),i()}}},[((h=l.value.clipModalTips)==null?void 0:h.buttonUpload)||((y=l.value.linkModalTips)==null?void 0:y.buttonOK)])]),d("input",{ref:a,accept:"image/*",type:"file",multiple:!1,style:{display:"none"},"aria-hidden":"true"},null)]}})}}}),$i={type:{type:String,default:"link"},linkVisible:{type:Boolean,default:!1},clipVisible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},Ti=D({props:$i,setup(e){return()=>d(Ue,null,[d(ki,{type:e.type,visible:e.linkVisible,onOk:e.onOk,onCancel:e.onCancel},null),d(Ci,{visible:e.clipVisible,onOk:e.onOk,onCancel:e.onCancel},null)])}}),Si=D({name:"MDEditorToolbar",props:vi,setup(e){const l=E("editorId"),t=E("usedLanguageText"),o=E("theme"),n=E("previewTheme"),a=E("language"),{fullscreenHandler:u}=hi(e),f=`${l}-toolbar-wrapper`,s=F(),m=ee({title:!1,catalog:!1,image:!1,table:!1,mermaid:!1,katex:!1}),i=(k,b)=>{$.emit(l,P,k,b)},c=ee({type:"link",linkVisible:!1,clipVisible:!1}),g=F();G(()=>{$.on(l,{name:at,callback(k){c.type=k,c.linkVisible=!0}})});const h=J(()=>{const k=e.toolbars.filter(S=>!e.toolbarsExclude.includes(S)),b=k.indexOf("="),T=b===-1?k:k.slice(0,b+1),C=b===-1?[]:k.slice(b,Number.MAX_SAFE_INTEGER);return[T,C]}),y=F(),p=()=>{$.emit(l,Ge,Array.from(y.value.files||[])),y.value.value=""};G(()=>{y.value.addEventListener("change",p)});const v=k=>{var b,T,C,S,x,N,I,_,M,R,O,V,q,K,te,ae,U,X,ie,le,Q,W,Y,Xe,mt,gt,vt,ht,pt,bt,yt,kt,wt,Ct,$t,Tt,St,xt,Et,_t,At,It,Lt,Ht,Ft,Rt,Mt,Pt,Nt,Ot,Bt,Dt,jt,Vt,Wt,Ut,zt,Gt,qt,Xt,Kt,Yt,Zt,Jt,Qt,el,tl,ll,ol,nl,al,il,rl,sl,cl,ul,dl;if(ql.includes(k))switch(k){case"-":return d(gi,null,null);case"bold":return d("div",{class:`${r}-toolbar-item`,title:(b=t.value.toolbarTips)==null?void 0:b.bold,onClick:()=>{i("bold")}},[d(H,{name:"bold"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(T=t.value.toolbarTips)==null?void 0:T.bold])]);case"underline":return d("div",{class:`${r}-toolbar-item`,title:(C=t.value.toolbarTips)==null?void 0:C.underline,onClick:()=>{i("underline")}},[d(H,{name:"underline"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(S=t.value.toolbarTips)==null?void 0:S.underline])]);case"italic":return d("div",{class:`${r}-toolbar-item`,title:(x=t.value.toolbarTips)==null?void 0:x.italic,onClick:()=>{i("italic")}},[d(H,{name:"italic"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(N=t.value.toolbarTips)==null?void 0:N.italic])]);case"strikeThrough":return d("div",{class:`${r}-toolbar-item`,title:(I=t.value.toolbarTips)==null?void 0:I.strikeThrough,onClick:()=>{i("strikeThrough")}},[d(H,{name:"strike-through"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(_=t.value.toolbarTips)==null?void 0:_.strikeThrough])]);case"title":return d(ye,{relative:`#${f}`,visible:m.title,onChange:L=>{m.title=L},overlay:d("ul",{class:`${r}-menu`,onClick:()=>{m.title=!1},role:"menu"},[d("li",{class:`${r}-menu-item ${r}-menu-item-title`,onClick:()=>{i("h1")},role:"menuitem",tabindex:"0"},[(M=t.value.titleItem)==null?void 0:M.h1]),d("li",{class:`${r}-menu-item ${r}-menu-item-title`,onClick:()=>{i("h2")},role:"menuitem",tabindex:"0"},[(R=t.value.titleItem)==null?void 0:R.h2]),d("li",{class:`${r}-menu-item ${r}-menu-item-title`,onClick:()=>{i("h3")},role:"menuitem",tabindex:"0"},[(O=t.value.titleItem)==null?void 0:O.h3]),d("li",{class:`${r}-menu-item ${r}-menu-item-title`,onClick:()=>{i("h4")},role:"menuitem",tabindex:"0"},[(V=t.value.titleItem)==null?void 0:V.h4]),d("li",{class:`${r}-menu-item ${r}-menu-item-title`,onClick:()=>{i("h5")},role:"menuitem",tabindex:"0"},[(q=t.value.titleItem)==null?void 0:q.h5]),d("li",{class:`${r}-menu-item ${r}-menu-item-title`,onClick:()=>{i("h6")},role:"menuitem",tabindex:"0"},[(K=t.value.titleItem)==null?void 0:K.h6])])},{default:()=>{var L,Z;return[d("div",{class:`${r}-toolbar-item`,title:(L=t.value.toolbarTips)==null?void 0:L.title},[d(H,{name:"title"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(Z=t.value.toolbarTips)==null?void 0:Z.title])])]}});case"sub":return d("div",{class:`${r}-toolbar-item`,title:(te=t.value.toolbarTips)==null?void 0:te.sub,onClick:()=>{i("sub")}},[d(H,{name:"sub"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(ae=t.value.toolbarTips)==null?void 0:ae.sub])]);case"sup":return d("div",{class:`${r}-toolbar-item`,title:(U=t.value.toolbarTips)==null?void 0:U.sup,onClick:()=>{i("sup")}},[d(H,{name:"sup"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(X=t.value.toolbarTips)==null?void 0:X.sup])]);case"quote":return d("div",{class:`${r}-toolbar-item`,title:(ie=t.value.toolbarTips)==null?void 0:ie.quote,onClick:()=>{i("quote")}},[d(H,{name:"quote"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(le=t.value.toolbarTips)==null?void 0:le.quote])]);case"unorderedList":return d("div",{class:`${r}-toolbar-item`,title:(Q=t.value.toolbarTips)==null?void 0:Q.unorderedList,onClick:()=>{i("unorderedList")}},[d(H,{name:"unordered-list"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(W=t.value.toolbarTips)==null?void 0:W.unorderedList])]);case"orderedList":return d("div",{class:`${r}-toolbar-item`,title:(Y=t.value.toolbarTips)==null?void 0:Y.orderedList,onClick:()=>{i("orderedList")}},[d(H,{name:"ordered-list"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(Xe=t.value.toolbarTips)==null?void 0:Xe.orderedList])]);case"task":return d("div",{class:`${r}-toolbar-item`,title:(mt=t.value.toolbarTips)==null?void 0:mt.task,onClick:()=>{i("task")}},[d(H,{name:"task"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(gt=t.value.toolbarTips)==null?void 0:gt.task])]);case"codeRow":return d("div",{class:`${r}-toolbar-item`,title:(vt=t.value.toolbarTips)==null?void 0:vt.codeRow,onClick:()=>{i("codeRow")}},[d(H,{name:"code-row"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(ht=t.value.toolbarTips)==null?void 0:ht.codeRow])]);case"code":return d("div",{class:`${r}-toolbar-item`,title:(pt=t.value.toolbarTips)==null?void 0:pt.code,onClick:()=>{i("code")}},[d(H,{name:"code"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(bt=t.value.toolbarTips)==null?void 0:bt.code])]);case"link":return d("div",{class:`${r}-toolbar-item`,title:(yt=t.value.toolbarTips)==null?void 0:yt.link,onClick:()=>{c.type="link",c.linkVisible=!0}},[d(H,{name:"link"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(kt=t.value.toolbarTips)==null?void 0:kt.link])]);case"image":return e.noUploadImg?d("div",{class:`${r}-toolbar-item`,title:(wt=t.value.toolbarTips)==null?void 0:wt.image,onClick:()=>{c.type="image",c.linkVisible=!0}},[d(H,{name:"image"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(Ct=t.value.toolbarTips)==null?void 0:Ct.image])]):d(ye,{relative:`#${f}`,visible:m.image,onChange:L=>{m.image=L},overlay:d("ul",{class:`${r}-menu`,onClick:()=>{m.title=!1},role:"menu"},[d("li",{class:`${r}-menu-item ${r}-menu-item-image`,onClick:()=>{c.type="image",c.linkVisible=!0},role:"menuitem",tabindex:"0"},[($t=t.value.imgTitleItem)==null?void 0:$t.link]),d("li",{class:`${r}-menu-item ${r}-menu-item-image`,onClick:()=>{y.value.click()},role:"menuitem",tabindex:"0"},[(Tt=t.value.imgTitleItem)==null?void 0:Tt.upload]),d("li",{class:`${r}-menu-item ${r}-menu-item-image`,onClick:()=>{c.clipVisible=!0},role:"menuitem",tabindex:"0"},[(St=t.value.imgTitleItem)==null?void 0:St.clip2upload])])},{default:()=>{var L,Z;return[d("div",{class:`${r}-toolbar-item`,title:(L=t.value.toolbarTips)==null?void 0:L.image},[d(H,{name:"image"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(Z=t.value.toolbarTips)==null?void 0:Z.image])])]}});case"table":return d(ye,{relative:`#${f}`,visible:m.table,onChange:L=>{m.table=L},key:"bar-table",overlay:d(bi,{tableShape:e.tableShape,onSelected:L=>{i("table",{selectedShape:L})}},null)},{default:()=>{var L,Z;return[d("div",{class:`${r}-toolbar-item`,title:(L=t.value.toolbarTips)==null?void 0:L.table},[d(H,{name:"table"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(Z=t.value.toolbarTips)==null?void 0:Z.table])])]}});case"revoke":return d("div",{class:`${r}-toolbar-item`,title:(xt=t.value.toolbarTips)==null?void 0:xt.revoke,onClick:()=>{$.emit(l,Yl)}},[d(H,{name:"revoke"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(Et=t.value.toolbarTips)==null?void 0:Et.revoke])]);case"next":return d("div",{class:`${r}-toolbar-item`,title:(_t=t.value.toolbarTips)==null?void 0:_t.next,onClick:()=>{$.emit(l,Zl)}},[d(H,{name:"next"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(At=t.value.toolbarTips)==null?void 0:At.next])]);case"save":return d("div",{class:`${r}-toolbar-item`,title:(It=t.value.toolbarTips)==null?void 0:It.save,onClick:()=>{$.emit(l,ze)}},[d(H,{name:"baocun"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(Lt=t.value.toolbarTips)==null?void 0:Lt.save])]);case"prettier":return e.noPrettier?"":d("div",{class:`${r}-toolbar-item`,title:(Ht=t.value.toolbarTips)==null?void 0:Ht.prettier,onClick:()=>{i("prettier")}},[d(H,{name:"prettier"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(Ft=t.value.toolbarTips)==null?void 0:Ft.prettier])]);case"pageFullscreen":return!e.setting.fullscreen&&d("div",{class:[`${r}-toolbar-item`,e.setting.pageFullscreen&&`${r}-toolbar-active`],title:(Rt=t.value.toolbarTips)==null?void 0:Rt.pageFullscreen,onClick:()=>{e.updateSetting("pageFullscreen")}},[d(H,{name:e.setting.pageFullscreen?"suoxiao":"fangda"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(Mt=t.value.toolbarTips)==null?void 0:Mt.pageFullscreen])]);case"fullscreen":return d("div",{class:[`${r}-toolbar-item`,e.setting.fullscreen&&`${r}-toolbar-active`],title:(Pt=t.value.toolbarTips)==null?void 0:Pt.fullscreen,onClick:()=>{u()}},[d(H,{name:e.setting.fullscreen?"fullscreen-exit":"fullscreen"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(Nt=t.value.toolbarTips)==null?void 0:Nt.fullscreen])]);case"preview":return d("div",{class:[`${r}-toolbar-item`,e.setting.preview&&`${r}-toolbar-active`],title:(Ot=t.value.toolbarTips)==null?void 0:Ot.preview,onClick:()=>{e.updateSetting("preview")}},[d(H,{name:"preview"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(Bt=t.value.toolbarTips)==null?void 0:Bt.preview])]);case"previewOnly":return d("div",{class:[`${r}-toolbar-item`,e.setting.previewOnly&&`${r}-toolbar-active`],title:(Dt=t.value.toolbarTips)==null?void 0:Dt.previewOnly,onClick:()=>{e.updateSetting("previewOnly")}},[d(H,{name:"preview-only"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(jt=t.value.toolbarTips)==null?void 0:jt.previewOnly])]);case"htmlPreview":return d("div",{class:[`${r}-toolbar-item`,e.setting.htmlPreview&&`${r}-toolbar-active`],title:(Vt=t.value.toolbarTips)==null?void 0:Vt.htmlPreview,onClick:()=>{e.updateSetting("htmlPreview")}},[d(H,{name:"coding"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(Wt=t.value.toolbarTips)==null?void 0:Wt.htmlPreview])]);case"catalog":return d("div",{class:[`${r}-toolbar-item`,e.catalogVisible&&`${r}-toolbar-active`],title:(Ut=t.value.toolbarTips)==null?void 0:Ut.catalog,onClick:()=>{$.emit(l,ct)},key:"bar-catalog"},[d(H,{name:"catalog"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(zt=t.value.toolbarTips)==null?void 0:zt.catalog])]);case"github":return d("div",{class:`${r}-toolbar-item`,title:(Gt=t.value.toolbarTips)==null?void 0:Gt.github,onClick:()=>Eo("https://github.com/imzbf/md-editor-v3")},[d(H,{name:"github"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(qt=t.value.toolbarTips)==null?void 0:qt.github])]);case"mermaid":return d(ye,{relative:`#${f}`,visible:m.mermaid,onChange:L=>{m.mermaid=L},overlay:d("ul",{class:`${r}-menu`,onClick:()=>{m.mermaid=!1},role:"menu"},[d("li",{class:`${r}-menu-item ${r}-menu-item-mermaid`,onClick:()=>{i("flow")},role:"menuitem",tabindex:"0"},[(Xt=t.value.mermaid)==null?void 0:Xt.flow]),d("li",{class:`${r}-menu-item ${r}-menu-item-mermaid`,onClick:()=>{i("sequence")},role:"menuitem",tabindex:"0"},[(Kt=t.value.mermaid)==null?void 0:Kt.sequence]),d("li",{class:`${r}-menu-item ${r}-menu-item-mermaid`,onClick:()=>{i("gantt")},role:"menuitem",tabindex:"0"},[(Yt=t.value.mermaid)==null?void 0:Yt.gantt]),d("li",{class:`${r}-menu-item ${r}-menu-item-mermaid`,onClick:()=>{i("class")},role:"menuitem",tabindex:"0"},[(Zt=t.value.mermaid)==null?void 0:Zt.class]),d("li",{class:`${r}-menu-item ${r}-menu-item-mermaid`,onClick:()=>{i("state")},role:"menuitem",tabindex:"0"},[(Jt=t.value.mermaid)==null?void 0:Jt.state]),d("li",{class:`${r}-menu-item ${r}-menu-item-mermaid`,onClick:()=>{i("pie")},role:"menuitem",tabindex:"0"},[(Qt=t.value.mermaid)==null?void 0:Qt.pie]),d("li",{class:`${r}-menu-item ${r}-menu-item-mermaid`,onClick:()=>{i("relationship")},role:"menuitem",tabindex:"0"},[(el=t.value.mermaid)==null?void 0:el.relationship]),d("li",{class:`${r}-menu-item ${r}-menu-item-mermaid`,onClick:()=>{i("journey")},role:"menuitem",tabindex:"0"},[(tl=t.value.mermaid)==null?void 0:tl.journey])]),key:"bar-mermaid"},{default:()=>{var L,Z;return[d("div",{class:`${r}-toolbar-item`,title:(L=t.value.toolbarTips)==null?void 0:L.mermaid},[d(H,{name:"mermaid"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(Z=t.value.toolbarTips)==null?void 0:Z.mermaid])])]}});case"katex":return d(ye,{relative:`#${f}`,visible:m.katex,onChange:L=>{m.katex=L},overlay:d("ul",{class:`${r}-menu`,onClick:()=>{m.katex=!1},role:"menu"},[d("li",{class:`${r}-menu-item ${r}-menu-item-katex`,onClick:()=>{i("katexInline")},role:"menuitem",tabindex:"0"},[(ll=t.value.katex)==null?void 0:ll.inline]),d("li",{class:`${r}-menu-item ${r}-menu-item-katex`,onClick:()=>{i("katexBlock")},role:"menuitem",tabindex:"0"},[(ol=t.value.katex)==null?void 0:ol.block])]),key:"bar-katex"},{default:()=>{var L,Z;return[d("div",{class:`${r}-toolbar-item`,title:(L=t.value.toolbarTips)==null?void 0:L.katex},[d(H,{name:"formula"},null),e.showToolbarName&&d("div",{class:`${r}-toolbar-item-name`},[(Z=t.value.toolbarTips)==null?void 0:Z.katex])])]}})}else if(e.defToolbars instanceof Array){const L=e.defToolbars[k];return L?ot(L,{theme:((nl=L.props)==null?void 0:nl.theme)||o.value,previewTheme:((al=L.props)==null?void 0:al.theme)||n.value,language:((il=L.props)==null?void 0:il.theme)||a.value,codeTheme:((rl=L.props)==null?void 0:rl.codeTheme)||e.codeTheme,insert(Ke){$.emit(l,P,"universal",{generate:Ke})}}):""}else if(e.defToolbars&&e.defToolbars.children instanceof Array){const L=e.defToolbars.children[k];return L?ot(L,{theme:((sl=L.props)==null?void 0:sl.theme)||o.value,previewTheme:((cl=L.props)==null?void 0:cl.theme)||n.value,language:((ul=L.props)==null?void 0:ul.theme)||a.value,codeTheme:((dl=L.props)==null?void 0:dl.codeTheme)||e.codeTheme,insert(Ke){$.emit(l,P,"universal",{generate:Ke})}}):""}else return""};return A(()=>e.toolbars,()=>{ue(()=>{s.value&&xo(s.value)})},{immediate:!0}),()=>{var k;const b=h.value[0].map(C=>v(C)),T=h.value[1].map(C=>v(C));return d(Ue,null,[e.toolbars.length>0&&d("div",{class:`${r}-toolbar-wrapper`,ref:s,id:f},[d("div",{class:[`${r}-toolbar`,e.showToolbarName&&`${r}-stn`]},[d("div",{class:`${r}-toolbar-left`,ref:g},[b]),d("div",{class:`${r}-toolbar-right`},[T])])]),d("label",{for:`${f}_label`,style:{display:"none"},"aria-label":(k=t.value.imgTitleItem)==null?void 0:k.upload},null),d("input",{id:`${f}_label`,ref:y,accept:"image/*",type:"file",multiple:!0,style:{display:"none"}},null),d(Ti,{linkVisible:c.linkVisible,clipVisible:c.clipVisible,type:c.type,onCancel:()=>{c.linkVisible=!1,c.clipVisible=!1},onOk:C=>{C&&i(c.type,{desc:C.desc,url:C.url,transform:c.type==="image"}),c.linkVisible=!1,c.clipVisible=!1}},null)])}}}),xi=(e,l,t)=>{const o=E("editorId");let n=()=>{},a=()=>{};const u=()=>{var f;n();const s=(f=t.value)==null?void 0:f.view.contentDOM.getRootNode(),m=s.querySelector(`#${o} .cm-scroller`),i=s.querySelector(`[id="${o}-preview-wrapper"]`),c=s.querySelector(`[id="${o}-html-wrapper"]`);(i||c)&&([a,n]=(i?Tn:$n)(m,i||c,t.value),e.scrollAuto&&a())};A([l,ce(e.setting,"preview"),ce(e.setting,"htmlPreview"),ce(e.setting,"fullscreen"),ce(e.setting,"pageFullscreen")],()=>{ue(u)}),A(()=>e.scrollAuto,f=>{f?a():n()}),A(()=>e.setting.previewOnly,f=>{f?n():a()}),G(u)},Ze=async(e,l,t)=>{var o;let n="",a=0,u=0,f=!0,s=!1;const m=l.getSelectedText(),i=z.editorConfig.mermaidTemplate;if(/^h[1-6]{1}$/.test(e)){const c=e.replace(/^h(\d)/,(g,h)=>new Array(Number(h)).fill("#",0,h).join(""));n=`${c} ${m}`,a=c.length+1}else if(e==="prettier"){const c=window.prettier||z.editorExtensions.prettier.prettierInstance,g=[((o=window.prettierPlugins)==null?void 0:o.markdown)||z.editorExtensions.prettier.parserMarkdownInstance];!c||g[0]===void 0?($.emit(t.editorId,ve,{name:"prettier",message:"prettier is undefined"}),n=l.getValue()):n=await c.format(l.getValue(),{parser:"markdown",plugins:g}),f=!1,s=!0}else switch(e){case"bold":{n=`**${m}**`,a=2,u=-2;break}case"underline":{n=`<u>${m}</u>`,a=3,u=-4;break}case"italic":{n=`*${m}*`,a=1,u=-1;break}case"strikeThrough":{n=`~~${m}~~`,a=2,u=-2;break}case"sub":{n=`~${m}~`,a=1,u=-1;break}case"sup":{n=`^${m}^`,a=1,u=-1;break}case"codeRow":{n="`"+m+"`",a=1,u=-1;break}case"quote":{n=`> ${m}`,a=2;break}case"orderedList":{n=`1. ${m}`,a=3;break}case"unorderedList":{n=`- ${m}`,a=2;break}case"task":{n=`- [ ] ${m}`,a=6;break}case"code":{const c=t.text||m||"",g=t.mode||"language";n=`\`\`\`${g}
${c}
\`\`\`
`,a=3,u=3+g.length-n.length;break}case"table":{n="|";const{selectedShape:c={x:1,y:1}}=t,{x:g,y:h}=c;for(let y=0;y<=h;y++)n+=" col |";n+=`
|`;for(let y=0;y<=h;y++)n+=" - |";for(let y=0;y<=g;y++){n+=`
|`;for(let p=0;p<=h;p++)n+=" content |"}a=2,u=5-n.length;break}case"link":{const{desc:c,url:g}=t;n=`[${c}](${g})`,f=!1;break}case"image":{const{desc:c,url:g,urls:h}=t;h instanceof Array?n=h.reduce((y,p)=>{const{url:v="",alt:k="",title:b=""}=typeof p=="object"?p:{url:p};return y+`![${k}](${v}${b?" '"+b+"'":""})
`},""):n=`![${c}](${g})
`,f=!1;break}case"flow":{n=`\`\`\`mermaid
${(i==null?void 0:i.flow)||`flowchart TD 
  Start --> Stop`}
\`\`\`
`,a=11,u=-5;break}case"sequence":{n=`\`\`\`mermaid
${(i==null?void 0:i.sequence)||`sequenceDiagram
  A->>B: hello!
  B-->>A: hi!
  A-)B: bye!`}
\`\`\`
`,a=11,u=-5;break}case"gantt":{n=`\`\`\`mermaid
${(i==null?void 0:i.gantt)||`gantt
title A Gantt Diagram
dateFormat  YYYY-MM-DD
section Section
A task  :a1, 2014-01-01, 30d
Another task  :after a1, 20d`}
\`\`\`
`,a=11,u=-5;break}case"class":{n=`\`\`\`mermaid
${(i==null?void 0:i.class)||`classDiagram
  class Animal
  Vehicle <|-- Car`}
\`\`\`
`,a=11,u=-5;break}case"state":{n=`\`\`\`mermaid
${(i==null?void 0:i.state)||`stateDiagram-v2
  s1 --> s2`}
\`\`\`
`,a=11,u=-5;break}case"pie":{n=`\`\`\`mermaid
${(i==null?void 0:i.pie)||`pie title Pets adopted by volunteers
  "Dogs" : 386
  "Cats" : 85
  "Rats" : 15`}
\`\`\`
`,a=11,u=-5;break}case"relationship":{n=`\`\`\`mermaid
${(i==null?void 0:i.relationship)||`erDiagram
  CAR ||--o{ NAMED-DRIVER : allows
  PERSON ||--o{ NAMED-DRIVER : is`}
\`\`\`
`,a=11,u=-5;break}case"journey":{n=`\`\`\`mermaid
${(i==null?void 0:i.journey)||`journey
  title My working day
  section Go to work
    Make tea: 5: Me
    Go upstairs: 3: Me
    Do work: 1: Me, Cat
  section Go home
    Go downstairs: 5: Me
    Sit down: 5: Me`}
\`\`\`
`,a=11,u=-5;break}case"katexInline":{n="$$",a=1,u=-1;break}case"katexBlock":{n=`$$

$$
`,a=3,u=-4;break}case"universal":{const{generate:c}=t,g=c(m);n=g.targetValue,f=g.select??!0,a=g.deviationStart||0,u=g.deviationEnd||0}}return{text:n,options:{select:f,deviationStart:a,deviationEnd:u,replaceAll:s}}},Ei="#e5c07b",Ll="var(--md-color)",_i="#56b6c2",Ai="#ffffff",Se="var(--md-color)",Hl="#e5c07b",Ii="#e5c07b",Li="var(--md-color)",Fl="#d19a66",Hi="#c678dd",Fi="#21252b",Ri="#2c313a",Rl="var(--md-bk-color)",Je="var(--md-bk-color)",Mi="#ceedfa33",Ml="#528bff",Pi=de.theme({"&":{color:Se,backgroundColor:Rl},".cm-content":{caretColor:Ml},".cm-cursor, .cm-dropCursor":{borderLeftColor:Ml},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Mi},".cm-panels":{backgroundColor:Fi,color:Se},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Rl,color:Se,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:Ri},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:Je},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Je,borderBottomColor:Je},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:Se}}},{dark:!0}),Ni=Gl.define([{tag:w.keyword,color:Hi},{tag:[w.name,w.deleted,w.character,w.propertyName,w.macroName],color:Ll},{tag:[w.function(w.variableName),w.labelName],color:Ii},{tag:[w.color,w.constant(w.name),w.standard(w.name)],color:Fl},{tag:[w.definition(w.name),w.separator],color:Se},{tag:[w.typeName,w.className,w.number,w.changed,w.annotation,w.modifier,w.self,w.namespace],color:Ei},{tag:[w.operator,w.operatorKeyword,w.url,w.escape,w.regexp,w.link,w.special(w.string)],color:_i},{tag:[w.meta,w.comment],color:Hl},{tag:w.strong,fontWeight:"bold"},{tag:w.emphasis,fontStyle:"italic"},{tag:w.strikethrough,textDecoration:"line-through"},{tag:w.link,color:Hl,textDecoration:"underline"},{tag:w.heading,fontWeight:"bold",color:Ll},{tag:[w.atom,w.bool,w.special(w.variableName)],color:Fl},{tag:[w.processingInstruction,w.string,w.inserted],color:Li},{tag:w.invalid,color:Ai}]),Pl=[Pi,zl(Ni)],Oi="#e5c07b",Nl="#3f4a54",Bi="#56b6c2",Di="#fff",xe="#3f4a54",Ol="#2d8cf0",ji="#2d8cf0",Vi="#3f4a54",Bl="#d19a66",Wi="#c678dd",Ui="#f6f6f6",zi="#ceedfa33",Dl="var(--md-bk-color)",Qe="var(--md-bk-color)",Gi="#bad5fa",jl="#3f4a54",qi=de.theme({"&":{color:xe,backgroundColor:Dl},".cm-content":{caretColor:jl},".cm-cursor, .cm-dropCursor":{borderLeftColor:jl},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Gi},".cm-panels":{backgroundColor:Ui,color:xe},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Dl,color:xe,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:zi},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:Qe},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Qe,borderBottomColor:Qe},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:xe}}}),Xi=Gl.define([{tag:w.keyword,color:Wi},{tag:[w.name,w.deleted,w.character,w.propertyName,w.macroName],color:Nl},{tag:[w.function(w.variableName),w.labelName],color:ji},{tag:[w.color,w.constant(w.name),w.standard(w.name)],color:Bl},{tag:[w.definition(w.name),w.separator],color:xe},{tag:[w.typeName,w.className,w.number,w.changed,w.annotation,w.modifier,w.self,w.namespace],color:Oi},{tag:[w.operator,w.operatorKeyword,w.url,w.escape,w.regexp,w.link,w.special(w.string)],color:Bi},{tag:[w.meta,w.comment],color:Ol},{tag:w.strong,fontWeight:"bold"},{tag:w.emphasis,fontStyle:"italic"},{tag:w.strikethrough,textDecoration:"line-through"},{tag:w.link,color:Ol,textDecoration:"underline"},{tag:w.heading,fontWeight:"bold",color:Nl},{tag:[w.atom,w.bool,w.special(w.variableName)],color:Bl},{tag:[w.processingInstruction,w.string,w.inserted],color:Vi},{tag:w.invalid,color:Di}]),Vl=[qi,zl(Xi)],Re=(e,l,t,o,n)=>(a,u,f,s)=>{const m=`${e}${l}`.slice(s-f);a.dispatch(a.state.replaceSelection(`${m}${t}${o}`));const i=f+u.label.length+(n==="title"?t.length:0);a.dispatch({selection:ke.create([ke.range(f+u.label.length+(n==="title"?1:-l.length),i),ke.cursor(i)],1)}),a.focus()},Wl=e=>(l,t,o,n)=>{const a=e.slice(n-o);l.dispatch(l.state.replaceSelection(`${a} `))},Ul=e=>{const l=t=>{const o=t.matchBefore(/^#+|^-\s*\[*\s*\]*|`+|\[|!\[*|^\|\s?\|?|\$\$?|!+\s*\w*/);return o===null||o.from==o.to&&t.explicit?null:{from:o.from,options:[...["h2","h3","h4","h5","h6"].map((n,a)=>{const u=new Array(a+2).fill("#").join("");return{label:u,type:"text",apply:Wl(u)}}),...["unchecked","checked"].map(n=>{const a=n==="checked"?"- [x]":"- [ ]";return{label:a,type:"text",apply:Wl(a)}}),...[["`",""],["```","language"],["```mermaid\n",""]].map(n=>({label:`${n[0]}${n[1]}`,type:"text",apply:Re(n[0],n[1],"",n[0]==="`"?"`":"\n```","type")})),{label:"[]()",type:"text"},{label:"![]()",type:"text"},{label:"| |",type:"text",detail:"table",apply:`| col | col | col |
| - | - | - |
| content | content | content |
| content | content | content |`},{label:"$",type:"text",apply:Re("$","","","$","type")},{label:"$$",type:"text",apply:Re("$$","",`
`,`
$$`,"title")},...["note","abstract","info","tip","success","question","warning","failure","danger","bug","example","quote","hint","caution","error","attention"].map(n=>({label:`!!! ${n}`,type:"text",apply:Re("!!!",` ${n}`," Title",`

!!!`,"title")}))]}};return Uo({override:e?[l,...e]:[l]})},pe=e=>{const l=new be;return o=>(l.get(e.state)?e.dispatch({effects:l.reconfigure(o)}):e.dispatch({effects:Go.appendConfig.of(l.of(o))}),!0)};class Ki{constructor(l){fe(this,"view"),fe(this,"maxLength",Number.MAX_SAFE_INTEGER),fe(this,"toggleTabSize"),fe(this,"togglePlaceholder"),fe(this,"setExtensions"),fe(this,"toggleDisabled"),fe(this,"toggleReadOnly"),fe(this,"toggleMaxlength"),this.view=l,this.toggleTabSize=pe(this.view),this.togglePlaceholder=pe(this.view),this.setExtensions=pe(this.view),this.toggleDisabled=pe(this.view),this.toggleReadOnly=pe(this.view),this.toggleMaxlength=pe(this.view)}getValue(){return this.view.state.doc.toString()}setValue(l,t=0,o=this.view.state.doc.length){this.view.dispatch({changes:{from:t,to:o,insert:l}})}getSelectedText(){const{from:l,to:t}=this.view.state.selection.main;return this.view.state.sliceDoc(l,t)}replaceSelectedText(l,t={select:!0,deviationStart:0,deviationEnd:0,replaceAll:!1},o){try{if(t.replaceAll){if(this.setValue(l),l.length>this.maxLength)throw new Error("The input text is too long");return}if(this.view.state.doc.length-this.getSelectedText().length+l.length>this.maxLength)throw new Error("The input text is too long");const{from:n}=this.view.state.selection.main;if(this.view.dispatch(this.view.state.replaceSelection(l)),t.select){const a=n+l.length+t.deviationEnd;this.view.dispatch({selection:{anchor:n+t.deviationStart,head:a}})}this.view.focus()}catch(n){if(n.message==="The input text is too long")$.emit(o,ve,{name:"overlength",message:n.message,data:l});else throw n}}setTabSize(l){this.toggleTabSize([Ye.tabSize.of(l),Vo.of(" ".repeat(l))])}setPlaceholder(l){this.togglePlaceholder(Wo(l))}focus(l){if(this.view.focus(),!l)return;let t=0,o=0,n=0;switch(l){case"start":break;case"end":{t=o=n=this.getValue().length;break}default:t=l.rangeAnchor||l.cursorPos,o=l.rangeHead||l.cursorPos,n=l.cursorPos}this.view.dispatch({scrollIntoView:!0,selection:ke.create([ke.range(t,o),ke.cursor(n)],1)})}setDisabled(l){this.toggleDisabled([de.editable.of(!l)])}setReadOnly(l){this.toggleReadOnly([Ye.readOnly.of(l)])}setMaxLength(l){this.maxLength=l,this.toggleMaxlength([Ye.changeFilter.of(t=>t.newDoc.length<=l)])}}const Yi=(e,l)=>{const t=E("editorId"),o=a=>{a instanceof Promise?a.then(u=>{$.emit(t,P,"universal",{generate(){return{targetValue:u}}})}).catch(u=>{console.error(u)}):$.emit(t,P,"universal",{generate(){return{targetValue:a}}})};return a=>{var u,f,s;if(!a.clipboardData)return;if(a.clipboardData.files.length>0){const{files:p}=a.clipboardData;$.emit(t,Ge,Array.from(p).filter(v=>/image\/.*/.test(v.type))),a.preventDefault();return}const m=a.clipboardData.getData("text/plain"),i=((u=l.value)==null?void 0:u.view.state.selection.main.to)||0,c=((f=l.value)==null?void 0:f.view.state.doc.lineAt(i).from)||0,g=((s=l.value)==null?void 0:s.view.state.doc.sliceString(c,i))||"",h=/!\[.*\]\(\s*$/.test(g),y=/!\[.*\]\((.*)\s?.*\)/.test(m);if(h){const p=e.transformImgUrl(m);o(p),a.preventDefault();return}else if(y){const p=m.match(new RegExp(`(?<=!\\[.*\\]\\()([^)\\s]+)(?=\\s?["']?.*["']?\\))`,"g"));p?Promise.all(p.map(v=>e.transformImgUrl(v))).then(v=>{o(v.reduce((k,b,T)=>k.replace(p[T],b),m))}):o(m),a.preventDefault();return}if(e.autoDetectCode&&a.clipboardData.types.includes("vscode-editor-data")){const p=JSON.parse(a.clipboardData.getData("vscode-editor-data"));$.emit(t,P,"code",{mode:p.mode,text:a.clipboardData.getData("text/plain")}),a.preventDefault();return}e.maxlength&&m.length+e.modelValue.length>e.maxlength&&$.emit(t,ve,{name:"overlength",message:"The input text is too long",data:m})}},Zi=(e,l)=>[{key:"Ctrl-b",mac:"Cmd-b",run:()=>($.emit(e,P,"bold"),!0)},{key:"Ctrl-d",mac:"Cmd-d",run:Do,preventDefault:!0},{key:"Ctrl-s",mac:"Cmd-s",run:C=>($.emit(e,ze,C.state.doc.toString()),!0),shift:()=>($.emit(e,P,"strikeThrough"),!0)},{key:"Ctrl-u",mac:"Cmd-u",preventDefault:!0,run:()=>($.emit(e,P,"underline"),!0),shift:()=>($.emit(e,P,"unorderedList"),!0)},{key:"Ctrl-i",mac:"Cmd-i",preventDefault:!0,run:()=>($.emit(e,P,"italic"),!0),shift:()=>($.emit(e,at,"image"),!0)},{key:"Ctrl-1",mac:"Cmd-1",run:()=>($.emit(e,P,"h1"),!0)},{key:"Ctrl-2",mac:"Cmd-2",run:()=>($.emit(e,P,"h2"),!0)},{key:"Ctrl-3",mac:"Cmd-3",run:()=>($.emit(e,P,"h3"),!0)},{key:"Ctrl-4",mac:"Cmd-4",run:()=>($.emit(e,P,"h4"),!0)},{key:"Ctrl-5",mac:"Cmd-5",run:()=>($.emit(e,P,"h5"),!0)},{key:"Ctrl-6",mac:"Cmd-6",run:()=>($.emit(e,P,"h6"),!0)},{key:"Ctrl-ArrowUp",mac:"Cmd-ArrowUp",run:()=>($.emit(e,P,"sup"),!0)},{key:"Ctrl-ArrowDown",mac:"Cmd-ArrowDown",run:()=>($.emit(e,P,"sub"),!0)},{key:"Ctrl-o",mac:"Cmd-o",run:()=>($.emit(e,P,"orderedList"),!0)},{key:"Ctrl-c",mac:"Cmd-c",shift:()=>($.emit(e,P,"code"),!0),any(C,S){return(S.ctrlKey||S.metaKey)&&S.altKey&&S.code==="KeyC"?($.emit(e,P,"codeRow"),!0):!1}},{key:"Ctrl-l",mac:"Cmd-l",run:()=>($.emit(e,at,"link"),!0)},{key:"Ctrl-f",mac:"Cmd-f",shift:()=>l.noPrettier?!1:($.emit(e,P,"prettier"),!0)},{any:(C,S)=>(S.ctrlKey||S.metaKey)&&S.altKey&&S.shiftKey&&S.code==="KeyT"?($.emit(e,P,"table"),!0):!1},...jo];de.EDIT_CONTEXT=!1;const Ji=e=>{const l=E("tabWidth"),t=E("editorId"),o=E("theme"),n=F(),a=ge(),u=F(!1),f=new be,s=new be,m=new be,i=new be,c=new be,g=Zi(t,e),h=()=>[...g,...Ro,...Mo,Po],p={paste:Yi(e,a),blur:e.onBlur,focus:e.onFocus,drop:e.onDrop,compositionstart:()=>{u.value=!0},compositionend:(b,T)=>{u.value=!1,e.updateModelValue(T.state.doc.toString())},input:b=>{e.onInput&&e.onInput(b);const{data:T}=b;e.maxlength&&e.modelValue.length+T.length>e.maxlength&&$.emit(t,ve,{name:"overlength",message:"The input text is too long",data:T})}},v=[Ho.of(h()),i.of(fl()),f.of(No({codeLanguages:zo})),de.lineWrapping,de.updateListener.of(b=>{b.docChanged&&(e.onChange(b.state.doc.toString()),u.value||e.updateModelValue(b.state.doc.toString()))}),c.of(de.domEventHandlers(p)),Fo()],k=()=>{const b=[...v,s.of(o.value==="light"?Vl:Pl),m.of(Ul(e.completions))];return z.codeMirrorExtensions(o.value,b,h(),{editorId:t})};return G(()=>{const b=new de({doc:e.modelValue,parent:n.value,extensions:[k()]}),T=new Ki(b);a.value=T,setTimeout(()=>{T.setTabSize(l),T.setDisabled(e.disabled),T.setReadOnly(e.readonly),e.placeholder&&T.setPlaceholder(e.placeholder),typeof e.maxlength=="number"&&T.setMaxLength(e.maxlength),e.autofocus&&b.focus()},0),$.on(t,{name:Yl,callback(){Oo(b)}}),$.on(t,{name:Zl,callback(){Bo(b)}}),$.on(t,{name:P,async callback(C,S={}){var x,N;if(C==="image"&&S.transform){const I=e.transformImgUrl(S.url);if(I instanceof Promise)I.then(async _=>{var M;const{text:R,options:O}=await Ze(C,a.value,{...S,url:_});(M=a.value)==null||M.replaceSelectedText(R,O,t)}).catch(_=>{console.error(_)});else{const{text:_,options:M}=await Ze(C,a.value,{...S,url:I});(x=a.value)==null||x.replaceSelectedText(_,M,t)}}else{const{text:I,options:_}=await Ze(C,a.value,S);(N=a.value)==null||N.replaceSelectedText(I,_,t)}}}),$.on(t,{name:Ql,callback:_o(C=>{var S;const x={...p},N=Object.keys(p);for(const I in C){const _=I;N.includes(_)?x[_]=(M,R)=>{C[_](M,R),M.defaultPrevented||p[_](M,R)}:x[_]=C[_]}(S=a.value)==null||S.view.dispatch({effects:c.reconfigure(de.domEventHandlers(x))})})}),$.on(t,{name:eo,callback:(C,S)=>{const x=b.state.doc.line(C);b.dispatch(b.state.update({changes:{from:x.from,to:x.to,insert:S}}))}})}),A(o,()=>{var b;(b=a.value)==null||b.view.dispatch({effects:s.reconfigure(o.value==="light"?Vl:Pl)})},{deep:!0}),A(()=>e.completions,()=>{var b;(b=a.value)==null||b.view.dispatch({effects:m.reconfigure(Ul(e.completions))})},{deep:!0}),A(()=>e.modelValue,()=>{var b,T;((b=a.value)==null?void 0:b.getValue())!==e.modelValue&&((T=a.value)==null||T.setValue(e.modelValue))}),A(()=>e.placeholder,()=>{var b;(b=a.value)==null||b.setPlaceholder(e.placeholder)}),A(()=>e.disabled,()=>{var b;(b=a.value)==null||b.setDisabled(e.disabled)}),A(()=>e.readonly,()=>{var b;(b=a.value)==null||b.setDisabled(e.readonly)}),A(()=>e.maxlength,()=>{var b;e.maxlength&&((b=a.value)==null||b.setMaxLength(e.maxlength))}),{inputWrapperRef:n,codeMirrorUt:a,resetHistory(){var b,T;(b=a.value)==null||b.view.dispatch({effects:i.reconfigure([])}),(T=a.value)==null||T.view.dispatch({effects:i.reconfigure(fl())})}}},Qi=(e,l,t)=>{const o=ee({resizedWidth:e.inputBoxWitdh}),n=ee({width:e.inputBoxWitdh}),a=ee({left:e.inputBoxWitdh,display:"initial"}),u=F(e.setting.preview||e.setting.htmlPreview),f=i=>{var c,g,h;const y=((c=l.value)==null?void 0:c.offsetWidth)||0,p=((g=l.value)==null?void 0:g.getBoundingClientRect().x)||0;let v=i.x-p;v<Ie?v=Ie:v>y-Ie&&(v=y-Ie);const k=`${v}px`;n.width=k,a.left=k,o.resizedWidth=k,(h=e.onInputBoxWitdhChange)==null||h.call(e,k)},s=()=>{document.addEventListener("mousemove",f)},m=()=>{document.removeEventListener("mousemove",f)};return A([t],()=>{var i,c;(i=t.value)==null||i.addEventListener("mousedown",s),(c=t.value)==null||c.addEventListener("mouseup",m)},{immediate:!0}),Ce(()=>{var i,c;(i=t.value)==null||i.removeEventListener("mousedown",s),(c=t.value)==null||c.removeEventListener("mouseup",m)}),A(()=>e.inputBoxWitdh,i=>{i&&(o.resizedWidth=i,n.width=i,a.left=i)}),A([ce(e.setting,"htmlPreview"),ce(e.setting,"preview"),ce(e.setting,"previewOnly")],()=>{e.setting.previewOnly?(n.width="0%",a.display="none",u.value=!0):!e.setting.htmlPreview&&!e.setting.preview?(n.width="100%",a.display="none",u.value=!1):(n.width=o.resizedWidth,a.display="initial",u.value=!0)},{immediate:!0}),{inputWrapperStyle:n,resizeOperateStyle:a,showPreviewWrapper:u}},er=D({name:"MDEditorContent",props:Za,setup(e,l){const t=E("editorId"),o=F(""),n=F(),a=F(),{inputWrapperRef:u,codeMirrorUt:f,resetHistory:s}=Ji(e),{inputWrapperStyle:m,resizeOperateStyle:i,showPreviewWrapper:c}=Qi(e,n,a);return xi(e,o,f),l.expose({getSelectedText(){var g;return(g=f.value)==null?void 0:g.getSelectedText()},focus(g){var h;(h=f.value)==null||h.focus(g)},resetHistory:s,getEditorView(){var g;return(g=f.value)==null?void 0:g.view}}),()=>d("div",{class:`${r}-content${c.value?" has-preview":""}`,ref:n},[d("div",{class:`${r}-input-wrapper`,style:m,ref:u},null),(e.setting.htmlPreview||e.setting.preview)&&d("div",{class:`${r}-resize-operate`,style:i,ref:a},null),c.value&&d(bo,{modelValue:e.modelValue,onChange:e.onChange,setting:e.setting,onHtmlChanged:g=>{o.value=g,e.onHtmlChanged(g)},onGetCatalog:e.onGetCatalog,mdHeadingId:e.mdHeadingId,noMermaid:e.noMermaid,sanitize:e.sanitize,noKatex:e.noKatex,formatCopiedText:e.formatCopiedText,noHighlight:e.noHighlight,noImgZoomIn:e.noImgZoomIn,sanitizeMermaid:e.sanitizeMermaid,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold},null),e.catalogVisible&&d(_e,{theme:e.theme,class:`${r}-catalog-editor`,editorId:t,mdHeadingId:e.mdHeadingId,key:"internal-catalog",scrollElementOffsetTop:2},null)])}}),tr=D({props:{modelValue:{type:String,default:""}},setup(e){const l=E("usedLanguageText");return()=>{var t,o;return d("div",{class:`${r}-footer-item`},[d("label",{class:`${r}-footer-label`},[`${(t=l.value.footer)==null?void 0:t.markdownTotal}:`]),d("span",null,[((o=e.modelValue)==null?void 0:o.length)||0])])}}}),lr={checked:{type:Boolean,default:!1},onChange:{type:Function,default:()=>{}}},or=D({props:lr,setup(e){return()=>d("div",{class:[`${r}-checkbox`,e.checked&&`${r}-checkbox-checked`],onClick:()=>{e.onChange(!e.checked)}},null)}}),nr={scrollAuto:{type:Boolean},onScrollAutoChange:{type:Function,default:()=>{}}},ar=D({props:nr,setup(e){const l=E("usedLanguageText");return()=>{var t;return d("div",{class:`${r}-footer-item`},[d("label",{class:`${r}-footer-label`,onClick:()=>{e.onScrollAutoChange(!e.scrollAuto)}},[(t=l.value.footer)==null?void 0:t.scrollAuto]),d(or,{checked:e.scrollAuto,onChange:e.onScrollAutoChange},null)])}}}),ir={modelValue:{type:String,default:""},footers:{type:Array,default:[]},scrollAuto:{type:Boolean},noScrollAuto:{type:Boolean},onScrollAutoChange:{type:Function,default:()=>{}},defFooters:{type:Object}},rr=D({name:"MDEditorFooter",props:ir,setup(e){const l=J(()=>{const o=e.footers.indexOf("="),n=o===-1?e.footers:e.footers.slice(0,o),a=o===-1?[]:e.footers.slice(o,Number.MAX_SAFE_INTEGER);return[n,a]}),t=o=>{if(Xl.includes(o))switch(o){case"markdownTotal":return d(tr,{modelValue:e.modelValue},null);case"scrollSwitch":return!e.noScrollAuto&&d(ar,{scrollAuto:e.scrollAuto,onScrollAutoChange:e.onScrollAutoChange},null)}else return e.defFooters instanceof Array?e.defFooters[o]||"":e.defFooters&&e.defFooters.children instanceof Array&&e.defFooters.children[o]||""};return()=>{const o=l.value[0].map(a=>t(a)),n=l.value[1].map(a=>t(a));return d("div",{class:`${r}-footer`},[d("div",{class:`${r}-footer-left`},[o]),d("div",{class:`${r}-footer-right`},[n])])}}}),et=D({name:"MdEditorV3",props:ii,emits:ri,setup(e,l){const{editorId:t,noKatex:o,noMermaid:n,noPrettier:a,noUploadImg:u,noHighlight:f}=e,s=ee({scrollAuto:e.scrollAuto}),m=F(),i=F();Ja(e,l),Qa(e,m),ei(e),ti(e,l);const[c,g]=li(e,l),h=oi(e);return Ce(()=>{$.clear(t)}),ni(e,l,h,c,g,i),()=>{const y=ne({props:e,ctx:l},"defToolbars"),p=ne({props:e,ctx:l},"defFooters");return d("div",{id:t,class:[r,e.class,e.theme==="dark"&&`${r}-dark`,c.fullscreen||c.pageFullscreen?`${r}-fullscreen`:""],style:e.style,ref:m},[e.toolbars.length>0&&d(Si,{noPrettier:a,toolbars:e.toolbars,toolbarsExclude:e.toolbarsExclude,setting:c,updateSetting:g,tableShape:e.tableShape,defToolbars:y,noUploadImg:u,showToolbarName:e.showToolbarName,catalogVisible:h.value,codeTheme:e.codeTheme},null),d(er,{ref:i,modelValue:e.modelValue,setting:c,mdHeadingId:e.mdHeadingId,noMermaid:n,noPrettier:a,sanitize:e.sanitize,placeholder:e.placeholder,noKatex:o,scrollAuto:s.scrollAuto,formatCopiedText:e.formatCopiedText,autofocus:e.autoFocus,disabled:e.disabled,readonly:e.readOnly,maxlength:e.maxLength,autoDetectCode:e.autoDetectCode,noHighlight:f,updateModelValue:v=>{l.emit("update:modelValue",v)},onChange:v=>{e.onChange&&e.onChange(v),l.emit("onChange",v)},onHtmlChanged:v=>{e.onHtmlChanged&&e.onHtmlChanged(v),l.emit("onHtmlChanged",v)},onGetCatalog:v=>{e.onGetCatalog&&e.onGetCatalog(v),l.emit("onGetCatalog",v)},onBlur:v=>{e.onBlur&&e.onBlur(v),l.emit("onBlur",v)},onFocus:v=>{e.onFocus&&e.onFocus(v),l.emit("onFocus",v)},onInput:v=>{e.onInput&&e.onInput(v),l.emit("onInput",v)},completions:e.completions,catalogVisible:h.value,theme:e.theme,noImgZoomIn:e.noImgZoomIn,onDrop:v=>{e.onDrop&&e.onDrop(v),l.emit("onDrop",v)},inputBoxWitdh:e.inputBoxWitdh,onInputBoxWitdhChange:v=>{e.onInputBoxWitdhChange&&e.onInputBoxWitdhChange(v),l.emit("onInputBoxWitdhChange",v)},sanitizeMermaid:e.sanitizeMermaid,transformImgUrl:e.transformImgUrl,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold},null),e.footers.length>0&&d(rr,{modelValue:e.modelValue,footers:e.footers,defFooters:p,noScrollAuto:!c.preview&&!c.htmlPreview||c.previewOnly,scrollAuto:s.scrollAuto,onScrollAutoChange:v=>s.scrollAuto=v},null)])}}});et.install=e=>(e.component(et.name,et),e.use(De).use(Me).use(je).use(_e).use(Be),e);const sr={onClick:{type:Function,default:void 0}},tt=D({name:"NormalFooterToolbar",props:sr,emits:["onClick"],setup(e,l){return()=>{const t=ne({props:e,ctx:l});return d("div",{class:`${r}-footer-item`,onClick:o=>{e.onClick instanceof Function?e.onClick(o):l.emit("onClick",o)}},[t])}}});tt.install=e=>(e.component(tt.name,tt),e);export{et as E};
